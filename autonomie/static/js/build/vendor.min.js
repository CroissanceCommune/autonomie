!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n=window.webpackJsonp;window.webpackJsonp=function(o,a){for(var s,c,l=0,u=[];l<o.length;l++)c=o[l],i[c]&&u.push.apply(u,i[c]),i[c]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);for(n&&n(o,a);u.length;)u.shift().call(null,t);if(a[0])return r[0]=0,t(0)};var r={},i={0:0};return t.e=function(e,n){if(0===i[e])return n.call(null,t);if(void 0!==i[e])i[e].push(n);else{i[e]=[n];var r=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.charset="utf-8",o.async=!0,o.src=t.p+""+e+"."+({1:"task",2:"expense",3:"base_setup"}[e]||e)+".min.js",r.appendChild(o)}},t.m=e,t.c=r,t.p="",t(0)}({0:function(e,t,n){n(5),n(8),n(3),n(1),n(58),n(46),n(38),e.exports=n(11)},1:function(e,t,n){/**
	* @license
	* MarionetteJS (Backbone.Marionette)
	* ----------------------------------
	* v3.5.1
	*
	* Copyright (c)2017 Derick Bailey, Muted Solutions, LLC.
	* Distributed under MIT license
	*
	* http://marionettejs.com
	*/
!function(t,r){e.exports=r(n(8),n(3),n(4))}(this,function(e,t,n){"use strict";function r(e,t,n){return n.toUpperCase()}function i(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Y(e),a=W.call(this,o),s=void 0;return t.isFunction(a)&&(s=a.apply(this,r)),this.trigger.apply(this,arguments),s}function o(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.isFunction(e.triggerMethod)?e.triggerMethod.apply(e,r):i.apply(e,r)}function a(e,n,r){e._getImmediateChildren&&t.each(e._getImmediateChildren(),function(e){r(e)&&o(e,n,e)})}function s(e){return!e._isAttached}function c(e){return!!s(e)&&(e._isAttached=!0,!0)}function l(e){return e._isAttached}function u(e){return!!l(e)&&(e._isAttached=!1,!0)}function d(e){e._isAttached&&e._isRendered&&o(e,"dom:refresh",e)}function f(e){e._isAttached&&e._isRendered&&o(e,"dom:remove",e)}function h(){a(this,"before:attach",s)}function p(){a(this,"attach",c),d(this)}function g(){a(this,"before:detach",l),f(this)}function m(){a(this,"detach",u)}function v(){f(this)}function y(){d(this)}function _(e){e._areViewEventsMonitored||e.monitorViewEvents===!1||(e._areViewEventsMonitored=!0,e.on({"before:attach":h,attach:p,"before:detach":g,detach:m,"before:render":v,render:y}))}function b(e,n,r,i,o){var a=i.split(/\s+/);a.length>1&&q("Multiple handlers for a single event are deprecated. If needed, use a single handler to call multiple methods."),t.each(a,function(t){var i=e[t];if(!i)throw new G('Method "'+t+'" was configured as an event handler, but does not exist.');e[o](n,r,i)})}function w(e,n,r,i){if(!t.isObject(r))throw new G({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindevents"});t.each(r,function(r,o){return t.isString(r)?void b(e,n,o,r,i):void e[i](n,o,r)})}function x(e,t){return e&&t?(w(this,e,t,"listenTo"),this):this}function C(e,t){return e?t?(w(this,e,t,"stopListening"),this):(this.stopListening(e),this):this}function k(e,n,r,i){if(!t.isObject(r))throw new G({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindrequests"});var o=K.call(e,r);n[i](o,e)}function E(e,t){return e&&t?(k(this,e,t,"reply"),this):this}function T(e,t){return e?t?(k(this,e,t,"stopReplying"),this):(e.stopReplying(null,null,this),this):this}function S(e,n){return e.behaviorClass?e.behaviorClass:t.isFunction(e)?e:t.isFunction(Ue.Behaviors.behaviorsLookup)?Ue.Behaviors.behaviorsLookup(e,n)[n]:Ue.Behaviors.behaviorsLookup[n]}function N(e,n){return t.chain(n).map(function(n,r){var i=S(n,r),o=n===i?{}:n,a=new i(o,e),s=N(e,t.result(a,"behaviors"));return[a].concat(s)}).flatten().value()}function A(e){return!!le[e]}function j(e,t){return le[e]=t}function D(e,n){t.isString(n)&&(n={event:n});var r=n.event,i=!!n.preventDefault;A("triggersPreventDefault")&&(i=n.preventDefault!==!1);var o=!!n.stopPropagation;return A("triggersStopPropagation")&&(o=n.stopPropagation!==!1),function(t){i&&t.preventDefault(),o&&t.stopPropagation(),e.triggerMethod(r,e,t)}}function O(t){return t instanceof e.$?t:e.$(t)}function R(e){return this.prototype.Dom=t.extend({},this.prototype.Dom,e),this}function B(e){e._isRendered||(e.supportsRenderLifecycle||o(e,"before:render",e),e.render(),e.supportsRenderLifecycle||(e._isRendered=!0,o(e,"render",e)))}function P(e){if(e.destroy)return void e.destroy();e.supportsDestroyLifecycle||o(e,"before:destroy",e);var t=e._isAttached&&!e._shouldDisableEvents;t&&o(e,"before:detach",e),e.remove(),t&&(e._isAttached=!1,o(e,"detach",e)),e._isDestroyed=!0,e.supportsDestroyLifecycle||o(e,"destroy",e)}function F(e,n){var r=t.extend({},n);if(t.isString(e))return t.extend(r,{el:e}),I(r);if(t.isFunction(e))return t.extend(r,{regionClass:e}),I(r);if(t.isObject(e))return e.selector&&q("The selector option on a Region definition object is deprecated. Use el to pass a selector string"),t.extend(r,{el:e.selector},e),I(r);throw new G({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})}function I(e){var n=e.regionClass,r=t.omit(e,"regionClass");return new n(r)}function L(e,t){return t.model&&t.model.get(e)}function M(){throw new G({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.md#behaviorslookup"})}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var V="3.5.1",$=function(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.apply(t,r)}},U=e.Model.extend,q=function e(n,r){t.isObject(n)&&(n=n.prev+" is going to be removed in the future. Please use "+n.next+" instead."+(n.url?" See: "+n.url:"")),Ue.DEV_MODE&&(void 0!==r&&r||e._cache[n]||(e._warn("Deprecation warning: "+n),e._cache[n]=!0))};q._console="undefined"!=typeof console?console:{},q._warn=function(){var e=q._console.warn||q._console.log||t.noop;return e.apply(q._console,arguments)},q._cache={};var H=function(e){return document.documentElement.contains(e&&e.parentNode)},z=function(e,n){var r=this;e&&t.each(n,function(t){var n=e[t];void 0!==n&&(r[t]=n)})},W=function(e){if(e)return this.options&&void 0!==this.options[e]?this.options[e]:this[e]},K=function(e){var n=this;return t.reduce(e,function(e,r,i){return t.isFunction(r)||(r=n[r]),r&&(e[i]=r),e},{})},X=/(^|:)(\w)/gi,Y=t.memoize(function(e){return"on"+e.replace(X,r)}),J=["description","fileName","lineNumber","name","message","number"],G=U.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+V+"/",constructor:function(e,n){t.isObject(e)?(n=e,e=n.message):n||(n={});var r=Error.call(this,e);t.extend(this,t.pick(r,J),t.pick(n,J)),this.captureStackTrace(),n.url&&(this.url=this.urlRoot+n.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,G)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});G.extend=U;var Z=function(e){this.options=t.extend({},t.result(this,"options"),e)},Q={normalizeMethods:K,_setOptions:Z,mergeOptions:z,getOption:W,bindEvents:x,unbindEvents:C},ee={_initRadio:function(){var e=t.result(this,"channelName");if(e){if(!n)throw new G({name:"BackboneRadioMissing",message:'The dependency "backbone.radio" is missing.'});var r=this._channel=n.channel(e),i=t.result(this,"radioEvents");this.bindEvents(r,i);var o=t.result(this,"radioRequests");this.bindRequests(r,o),this.on("destroy",this._destroyRadio)}},_destroyRadio:function(){this._channel.stopReplying(null,null,this)},getChannel:function(){return this._channel},bindEvents:x,unbindEvents:C,bindRequests:E,unbindRequests:T},te=["channelName","radioEvents","radioRequests"],ne=function(e){this.hasOwnProperty("options")||this._setOptions(e),this.mergeOptions(e,te),this._setCid(),this._initRadio(),this.initialize.apply(this,arguments)};ne.extend=U,t.extend(ne.prototype,e.Events,Q,ee,{cidPrefix:"mno",_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},initialize:function(){},_setCid:function(){this.cid||(this.cid=t.uniqueId(this.cidPrefix))},destroy:function(){if(this._isDestroyed)return this;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.triggerMethod.apply(this,["before:destroy",this].concat(t)),this._isDestroyed=!0,this.triggerMethod.apply(this,["destroy",this].concat(t)),this.stopListening(),this},triggerMethod:i});var re=function(e){this.templateId=e};t.extend(re,{templateCaches:{},get:function(e,t){var n=this.templateCaches[e];return n||(n=new re(e),this.templateCaches[e]=n),n.load(t)},clear:function(){for(var e=void 0,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.length;if(i>0)for(e=0;e<i;e++)delete this.templateCaches[n[e]];else this.templateCaches={}}}),t.extend(re.prototype,{load:function(e){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId,e);return this.compiledTemplate=this.compileTemplate(t,e),this.compiledTemplate},loadTemplate:function(t,n){var r=e.$(t);if(!r.length)throw new G({name:"NoTemplateError",message:'Could not find template: "'+t+'"'});return r.html()},compileTemplate:function(e,n){return t.template(e,n)}});var ie=t.invokeMap||t.invoke,oe={_initBehaviors:function(){this._behaviors=this._getBehaviors()},_getBehaviors:function(){var e=t.result(this,"behaviors");return t.isObject(e)?N(this,e):{}},_getBehaviorTriggers:function(){var e=ie(this._behaviors,"getTriggers");return t.reduce(e,function(e,n){return t.extend(e,n)},{})},_getBehaviorEvents:function(){var e=ie(this._behaviors,"getEvents");return t.reduce(e,function(e,n){return t.extend(e,n)},{})},_proxyBehaviorViewProperties:function(){ie(this._behaviors,"proxyViewProperties")},_delegateBehaviorEntityEvents:function(){ie(this._behaviors,"delegateEntityEvents")},_undelegateBehaviorEntityEvents:function(){ie(this._behaviors,"undelegateEntityEvents")},_destroyBehaviors:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];ie.apply(void 0,[this._behaviors,"destroy"].concat(t))},_removeBehavior:function(e){this._isDestroyed||(this.undelegate(".trig"+e.cid+" ."+e.cid),this._behaviors=t.without(this._behaviors,e))},_bindBehaviorUIElements:function(){ie(this._behaviors,"bindUIElements")},_unbindBehaviorUIElements:function(){ie(this._behaviors,"unbindUIElements")},_triggerEventOnBehaviors:function(){for(var e=this._behaviors,t=0,n=e&&e.length;t<n;t++)i.apply(e[t],arguments)}},ae={_delegateEntityEvents:function(e,n){var r=t.result(this,"modelEvents");r&&(C.call(this,e,r),x.call(this,e,r));var i=t.result(this,"collectionEvents");i&&(C.call(this,n,i),x.call(this,n,i))},_undelegateEntityEvents:function(e,n){var r=t.result(this,"modelEvents");C.call(this,e,r);var i=t.result(this,"collectionEvents");C.call(this,n,i)}},se=/^(\S+)\s*(.*)$/,ce=function(e,t){var n=e.match(se);return n[1]+"."+t+" "+n[2]},le={childViewEventPrefix:!0,triggersStopPropagation:!0,triggersPreventDefault:!0},ue={_getViewTriggers:function(e,n){var r=this;return t.reduce(n,function(t,n,i){return i=ce(i,"trig"+r.cid),t[i]=D(e,n),t},{})}},de=function(e,n){return t.reduce(e,function(e,t,r){var i=fe(r,n);return e[i]=t,e},{})},fe=function(e,t){return e.replace(/@ui\.[a-zA-Z-_$0-9]*/g,function(e){return t[e.slice(4)]})},he=function e(n,r,i){return t.each(n,function(o,a){t.isString(o)?n[a]=fe(o,r):t.isObject(o)&&t.isArray(i)&&(t.extend(o,e(t.pick(o,i),r)),t.each(i,function(e){var n=o[e];t.isString(n)&&(o[e]=fe(n,r))}))}),n},pe={normalizeUIKeys:function(e){var t=this._getUIBindings();return de(e,t)},normalizeUIString:function(e){var t=this._getUIBindings();return fe(e,t)},normalizeUIValues:function(e,t){var n=this._getUIBindings();return he(e,n,t)},_getUIBindings:function(){var e=t.result(this,"_uiBindings"),n=t.result(this,"ui");return e||n},_bindUIElements:function(){var e=this;if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var n=t.result(this,"_uiBindings");this._ui={},t.each(n,function(t,n){e._ui[n]=e.$(t)}),this.ui=this._ui}},_unbindUIElements:function(){var e=this;this.ui&&this._uiBindings&&(t.each(this.ui,function(t,n){delete e.ui[n]}),this.ui=this._uiBindings,delete this._uiBindings,delete this._ui)},_getUI:function(e){return this._ui[e]}},ge={createBuffer:function(){return document.createDocumentFragment()},getEl:function(e){return O(e)},findEl:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O(e);return n.find(t)},hasEl:function(e,t){return e.contains(t&&t.parentNode)},detachEl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O(e);t.detach()},replaceEl:function(e,t){if(e!==t){var n=t.parentNode;n&&n.replaceChild(e,t)}},swapEl:function(e,t){if(e!==t){var n=e.parentNode,r=t.parentNode;if(n&&r){var i=e.nextSibling,o=t.nextSibling;n.insertBefore(t,i),r.insertBefore(e,o)}}},setContents:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O(e);n.html(t)},appendContents:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n._$el,i=void 0===r?O(e):r,o=n._$contents,a=void 0===o?O(t):o;i.append(a)},hasContents:function(e){return!!e&&e.hasChildNodes()},detachContents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O(e);t.contents().detach()}},me={Dom:ge,supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,_isDestroyed:!1,isDestroyed:function(){return!!this._isDestroyed},_isRendered:!1,isRendered:function(){return!!this._isRendered},_isAttached:!1,isAttached:function(){return!!this._isAttached},delegateEvents:function(n){this._proxyBehaviorViewProperties(),this._buildEventProxies();var r=this._getEvents(n);"undefined"==typeof n&&(this.events=r);var i=t.extend({},this._getBehaviorEvents(),r,this._getBehaviorTriggers(),this.getTriggers());return e.View.prototype.delegateEvents.call(this,i),this},_getEvents:function(e){var n=e||this.events;return t.isFunction(n)?this.normalizeUIKeys(n.call(this)):this.normalizeUIKeys(n)},getTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(t.result(this,"triggers"));return this._getViewTriggers(this,e)}},delegateEntityEvents:function(){return this._delegateEntityEvents(this.model,this.collection),this._delegateBehaviorEntityEvents(),this},undelegateEntityEvents:function(){return this._undelegateEntityEvents(this.model,this.collection),this._undelegateBehaviorEntityEvents(),this},destroy:function(){if(this._isDestroyed)return this;for(var e=this._isAttached&&!this._shouldDisableEvents,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.triggerMethod.apply(this,["before:destroy",this].concat(n)),e&&this.triggerMethod("before:detach",this),this.unbindUIElements(),this._removeElement(),e&&(this._isAttached=!1,this.triggerMethod("detach",this)),this._removeChildren(),this._isDestroyed=!0,this._isRendered=!1,this._destroyBehaviors.apply(this,n),this.triggerMethod.apply(this,["destroy",this].concat(n)),this.stopListening(),this},_removeElement:function(){this.$el.off().removeData(),this.Dom.detachEl(this.el,this.$el)},bindUIElements:function(){return this._bindUIElements(),this._bindBehaviorUIElements(),this},unbindUIElements:function(){return this._unbindUIElements(),this._unbindBehaviorUIElements(),this},getUI:function(e){return this._getUI(e)},childViewEventPrefix:function(){return!!A("childViewEventPrefix")&&"childview"},triggerMethod:function(){var e=i.apply(this,arguments);return this._triggerEventOnBehaviors.apply(this,arguments),e},_buildEventProxies:function(){this._childViewEvents=t.result(this,"childViewEvents"),this._childViewTriggers=t.result(this,"childViewTriggers")},_proxyChildViewEvents:function(e){this.listenTo(e,"all",this._childViewEventHandler)},_childViewEventHandler:function(e){for(var n=this.normalizeMethods(this._childViewEvents),r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];"undefined"!=typeof n&&t.isFunction(n[e])&&n[e].apply(this,i);var a=this._childViewTriggers;a&&t.isString(a[e])&&this.triggerMethod.apply(this,[a[e]].concat(i));var s=t.result(this,"childViewEventPrefix");if(s!==!1){var c=s+":"+e;this.triggerMethod.apply(this,[c].concat(i))}}};t.extend(me,oe,Q,ae,ue,pe);var ve=["allowMissingEl","parentEl","replaceElement"],ye=ne.extend({Dom:ge,cidPrefix:"mnr",replaceElement:!1,_isReplaced:!1,_isSwappingView:!1,constructor:function(t){if(this._setOptions(t),this.mergeOptions(t,ve),this._initEl=this.el=this.getOption("el"),this.el=this.el instanceof e.$?this.el[0]:this.el,!this.el)throw new G({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),ne.call(this,t)},show:function(e,t){if(this._ensureElement(t))return e=this._getView(e,t),e===this.currentView?this:(this._isSwappingView=!!this.currentView,this.triggerMethod("before:show",this,e,t),e._isAttached||this.empty(t),this._setupChildView(e),this.currentView=e,B(e),this._attachView(e,t),this.triggerMethod("show",this,e,t),this._isSwappingView=!1,this)},_setupChildView:function(e){_(e),this._proxyChildViewEvents(e),e.on("destroy",this._empty,this)},_proxyChildViewEvents:function(e){var t=this._parentView;t&&t._proxyChildViewEvents(e)},_shouldDisableMonitoring:function(){return this._parentView&&this._parentView.monitorViewEvents===!1},_attachView:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!e._isAttached&&H(this.el)&&!this._shouldDisableMonitoring(),i="undefined"==typeof n.replaceElement?!!t.result(this,"replaceElement"):!!n.replaceElement;r&&o(e,"before:attach",e),i?this._replaceEl(e):this.attachHtml(e),r&&(e._isAttached=!0,o(e,"attach",e))},_ensureElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0],this.$el=this.Dom.getEl(this.el)),!this.$el||0===this.$el.length){var n="undefined"==typeof e.allowMissingEl?!!t.result(this,"allowMissingEl"):!!e.allowMissingEl;if(n)return!1;throw new G('An "el" must exist in DOM for this region '+this.cid)}return!0},_getView:function(t){if(!t)throw new G({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(t._isDestroyed)throw new G({name:"ViewDestroyedError",message:'View (cid: "'+t.cid+'") has already been destroyed and cannot be used.'});if(t instanceof e.View)return t;var n=this._getViewOptions(t);return new Ce(n)},_getViewOptions:function(e){if(t.isFunction(e))return{template:e};if(t.isObject(e))return e;var n=function(){return e};return{template:n}},getEl:function(e){var n=t.result(this,"parentEl");return n&&t.isString(e)?this.Dom.findEl(n,e):this.Dom.getEl(e)},_replaceEl:function(e){this._restoreEl(),e.on("before:destroy",this._restoreEl,this),this.Dom.replaceEl(e.el,this.el),this._isReplaced=!0},_restoreEl:function(){if(this._isReplaced){var e=this.currentView;e&&(this._detachView(e),this._isReplaced=!1)}},isReplaced:function(){return!!this._isReplaced},isSwappingView:function(){return!!this._isSwappingView},attachHtml:function(e){this.Dom.appendContents(this.el,e.el,{_$el:this.$el,_$contents:e.$el})},empty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allowMissingEl:!0},t=this.currentView;if(!t)return this._ensureElement(e)&&this.detachHtml(),this;var n=!e.preventDestroy;return n||q("The preventDestroy option is deprecated. Use Region#detachView"),this._empty(t,n),this},_empty:function(e,t){e.off("destroy",this._empty,this),this.triggerMethod("before:empty",this,e),this._restoreEl(),delete this.currentView,e._isDestroyed||(t?this.removeView(e):this._detachView(e),this._stopChildViewEvents(e)),this.triggerMethod("empty",this,e)},_stopChildViewEvents:function(e){var t=this._parentView;t&&this._parentView.stopListening(e)},destroyView:function(e){return e._isDestroyed?e:(e._shouldDisableEvents=this._shouldDisableMonitoring(),P(e),e)},removeView:function(e){this.destroyView(e)},detachView:function(){var e=this.currentView;if(e)return this._empty(e),e},_detachView:function(e){var t=e._isAttached&&!this._shouldDisableMonitoring(),n=this._isReplaced;t&&o(e,"before:detach",e),n?this.Dom.replaceEl(this.el,e.el):this.detachHtml(),t&&(e._isAttached=!1,o(e,"detach",e))},detachHtml:function(){this.Dom.detachContents(this.el,this.$el)},hasView:function(){return!!this.currentView},reset:function(e){return this.empty(e),this.$el&&(this.el=this._initEl),delete this.$el,this},destroy:function(e){return this._isDestroyed?this:(this.reset(e),this._name&&this._parentView._removeReferences(this._name),delete this._parentView,delete this._name,ne.prototype.destroy.apply(this,arguments))}},{setDomApi:R}),_e=function(e,t){return e instanceof ye?e:F(e,t)},be={regionClass:ye,_initRegions:function(){this.regions=this.regions||{},this._regions={},this.addRegions(t.result(this,"regions"))},_reInitRegions:function(){ie(this._regions,"reset")},addRegion:function(e,t){var n={};return n[e]=t,this.addRegions(n)[e]},addRegions:function(e){if(!t.isEmpty(e))return e=this.normalizeUIValues(e,["selector","el"]),this.regions=t.extend({},this.regions,e),this._addRegions(e)},_addRegions:function(e){var n=this,r={regionClass:this.regionClass,parentEl:t.partial(t.result,this,"el")};return t.reduce(e,function(e,t,i){return e[i]=_e(t,r),n._addRegion(e[i],i),e},{})},_addRegion:function(e,t){this.triggerMethod("before:add:region",this,t,e),e._parentView=this,e._name=t,this._regions[t]=e,this.triggerMethod("add:region",this,t,e)},removeRegion:function(e){var t=this._regions[e];return this._removeRegion(t,e),t},removeRegions:function(){var e=this._getRegions();return t.each(this._regions,t.bind(this._removeRegion,this)),e},_removeRegion:function(e,t){this.triggerMethod("before:remove:region",this,t,e),e.destroy(),this.triggerMethod("remove:region",this,t,e)},_removeReferences:function(e){delete this.regions[e],delete this._regions[e]},emptyRegions:function(){var e=this.getRegions();return ie(e,"empty"),e},hasRegion:function(e){return!!this.getRegion(e)},getRegion:function(e){return this._isRendered||this.render(),this._regions[e]},_getRegions:function(){return t.clone(this._regions)},getRegions:function(){return this._isRendered||this.render(),this._getRegions()},showChildView:function(e,t){for(var n=this.getRegion(e),r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return n.show.apply(n,[t].concat(i))},detachChildView:function(e){return this.getRegion(e).detachView()},getChildView:function(e){return this.getRegion(e).currentView}},we={render:function(e,n){if(!e)throw new G({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var r=t.isFunction(e)?e:re.get(e);return r(n)}},xe=["behaviors","childViewEventPrefix","childViewEvents","childViewTriggers","collectionEvents","events","modelEvents","regionClass","regions","template","templateContext","triggers","ui"],Ce=e.View.extend({constructor:function(n){this.render=t.bind(this.render,this),this._setOptions(n),this.mergeOptions(n,xe),_(this),this._initBehaviors(),this._initRegions();var r=Array.prototype.slice.call(arguments);r[0]=this.options,e.View.prototype.constructor.apply(this,r),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this)},serializeData:function(){return this.model||this.collection?this.model?this.serializeModel():{items:this.serializeCollection()}:{}},serializeModel:function(){return this.model?t.clone(this.model.attributes):{}},serializeCollection:function(){return this.collection?this.collection.map(function(e){return t.clone(e.attributes)}):{}},setElement:function(){return e.View.prototype.setElement.apply(this,arguments),this._isRendered=this.Dom.hasContents(this.el),this._isAttached=H(this.el),this._isRendered&&this.bindUIElements(),this},render:function(){return this._isDestroyed?this:(this.triggerMethod("before:render",this),this._isRendered&&this._reInitRegions(),this._renderTemplate(),this.bindUIElements(),this._isRendered=!0,this.triggerMethod("render",this),this)},_renderTemplate:function(){var e=this.getTemplate();if(e===!1)return void q("template:false is deprecated.  Use _.noop.");var t=this.mixinTemplateContext(this.serializeData()),n=this._renderHtml(e,t);this.attachElContent(n)},_renderHtml:function(e,t){return we.render(e,t,this)},getTemplate:function(){return this.template},mixinTemplateContext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.result(this,"templateContext");return t.extend(e,n)},attachElContent:function(e){return this.Dom.setContents(this.el,e,this.$el),this},_removeChildren:function(){this.removeRegions()},_getImmediateChildren:function(){return t.chain(this._getRegions()).map("currentView").compact().value()}},{setRenderer:function(e){return this.prototype._renderHtml=e,this},setDomApi:R});t.extend(Ce.prototype,me,be);var ke=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce","partition"],Ee=function(e,n){t.each(ke,function(r){e[r]=function(){var e=t.result(this,n),i=Array.prototype.slice.call(arguments);return t[r].apply(t,[e].concat(i))}})},Te=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,t.bind(this.add,this))};Ee(Te.prototype,"_getViews"),t.extend(Te.prototype,{_getViews:function(){return t.values(this._views)},add:function(e,t){return this._add(e,t)._updateLength()},_add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){return this._remove(e)._updateLength()},_remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.some(this._indexByCustom,t.bind(function(e,t){if(e===n)return delete this._indexByCustom[t],!0},this)),delete this._views[n],this},_updateLength:function(){return this.length=t.size(this._views),this}});var Se=["behaviors","childView","childViewEventPrefix","childViewEvents","childViewOptions","childViewTriggers","collectionEvents","events","filter","emptyView","emptyViewOptions","modelEvents","reorderOnSort","sort","triggers","ui","viewComparator"],Ne=e.View.extend({sort:!0,constructor:function(n){this.render=t.bind(this.render,this),this._setOptions(n),this.mergeOptions(n,Se),_(this),this._initBehaviors(),this.once("render",this._initialEvents),this._initChildViewStorage(),this._bufferedChildren=[];var r=Array.prototype.slice.call(arguments);r[0]=this.options,e.View.prototype.constructor.apply(this,r),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this)},_startBuffering:function(){this._isBuffering=!0},_endBuffering:function(){var e=this._isAttached&&this.monitorViewEvents!==!1,n=e?this._getImmediateChildren():[];this._isBuffering=!1,t.each(n,function(e){o(e,"before:attach",e)}),this.attachBuffer(this,this._createBuffer()),t.each(n,function(e){e._isAttached=!0,o(e,"attach",e)}),this._bufferedChildren=[]},_getImmediateChildren:function(){return t.values(this.children._views)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"update",this._onCollectionUpdate),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e,n,r){var i=void 0!==r.at&&(r.index||n.indexOf(e));(this.filter||i===!1)&&(i=t.indexOf(this._filteredSortedModels(i),e)),this._shouldAddChild(e,i)&&(this._destroyEmptyView(),this._addChild(e,i))},_onCollectionUpdate:function(e,t){var n=t.changes;this._removeChildModels(n.removed)},_removeChildModels:function(e){var t=this._getRemovedViews(e);t.length&&(this.children._updateLength(),this._updateIndices(t,!1),this.isEmpty()&&this._showEmptyView())},_getRemovedViews:function(e){var n=this;return t.reduce(e,function(e,t){var r=t&&n.children.findByModel(t);return!r||r._isDestroyed?e:(n._removeChildView(r),e.push(r),e)},[])},_removeChildView:function(e){this.triggerMethod("before:remove:child",this,e),this.children._remove(e),e._shouldDisableEvents=this.monitorViewEvents===!1,P(e),this.stopListening(e),this.triggerMethod("remove:child",this,e)},setElement:function(){return e.View.prototype.setElement.apply(this,arguments),this._isAttached=H(this.el),this},render:function(){return this._isDestroyed?this:(this.triggerMethod("before:render",this),this._renderChildren(),this._isRendered=!0,this.triggerMethod("render",this),this)},setFilter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.preventRender,r=this._isRendered&&!this._isDestroyed,i=this.filter!==e,o=r&&i&&!n;if(o){var a=this._filteredSortedModels();this.filter=e;var s=this._filteredSortedModels();this._applyModelDeltas(s,a)}else this.filter=e;return this},removeFilter:function(e){return this.setFilter(null,e)},_applyModelDeltas:function(e,n){var r=this,i={};t.each(e,function(e,t){var n=!r.children.findByModel(e);n&&r._onCollectionAdd(e,r.collection,{at:t}),i[e.cid]=!0});var o=t.filter(n,function(e){return!i[e.cid]&&r.children.findByModel(e)});this._removeChildModels(o)},reorder:function(){var e=this,n=this.children,r=this._filteredSortedModels();if(!r.length&&this._showingEmptyView)return this;var i=t.some(r,function(e){return!n.findByModel(e)});if(i)this.render();else{var o=[],a=t.reduce(this.children._views,function(e,n){var i=t.indexOf(r,n.model);return i===-1?(o.push(n.model),e):(n._index=i,e[i]=n.el,e)},new Array(r.length));this.triggerMethod("before:reorder",this);var s=this.Dom.createBuffer();t.each(a,function(t){e.Dom.appendContents(s,t)}),this._appendReorderedChildren(s),this._removeChildModels(o),this.triggerMethod("reorder",this)}return this},resortView:function(){return this.reorderOnSort?this.reorder():this._renderChildren(),this},_sortViews:function(){var e=this,n=this._filteredSortedModels(),r=t.find(n,function(t,n){var r=e.children.findByModel(t);return!r||r._index!==n});r&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(e){this.Dom.appendContents(this.el,e,{_$el:this.$el})},_renderChildren:function(){this._isRendered&&(this._destroyEmptyView(),this._destroyChildren());var e=this._filteredSortedModels();this.isEmpty({processedModels:e})?this._showEmptyView():(this.triggerMethod("before:render:children",this),this._startBuffering(),this._showCollection(e),this._endBuffering(),this.triggerMethod("render:children",this))},_createView:function(e,t){var n=this._getChildView(e),r=this._getChildViewOptions(e,t),i=this.buildChildView(e,n,r);return i},_setupChildView:function(e,t){_(e),this._proxyChildViewEvents(e),this.sort&&(e._index=t)},_showCollection:function(e){t.each(e,t.bind(this._addChild,this)),this.children._updateLength()},_filteredSortedModels:function(e){if(!this.collection||!this.collection.length)return[];var t=this.getViewComparator(),n=this.collection.models;if(e=Math.min(Math.max(e,0),n.length-1),t){var r=void 0;e&&(r=n[e],n=n.slice(0,e).concat(n.slice(e+1))),n=this._sortModelsBy(n,t),r&&n.splice(e,0,r)}return n=this._filterModels(n)},getViewComparator:function(){return this.viewComparator},_filterModels:function(e){var n=this;return this.filter&&(e=t.filter(e,function(e,t){return n._shouldAddChild(e,t)})),e},_sortModelsBy:function(e,n){return"string"==typeof n?t.sortBy(e,function(e){return e.get(n)}):1===n.length?t.sortBy(e,t.bind(n,this)):t.clone(e).sort(t.bind(n,this))},_showEmptyView:function(){var n=this._getEmptyView();if(n&&!this._showingEmptyView){this._showingEmptyView=!0;var r=new e.Model,i=this.emptyViewOptions||this.childViewOptions;t.isFunction(i)&&(i=i.call(this,r,this._emptyViewIndex));var o=this.buildChildView(r,n,i);this.triggerMethod("before:render:empty",this,o),this.addChildView(o,0),this.triggerMethod("render:empty",this,o)}},_destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty",this),this._destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty",this))},_getEmptyView:function(){var e=this.emptyView;if(e)return this._getView(e)},_getChildView:function(e){var t=this.childView;if(!t)throw new G({name:"NoChildViewError",message:'A "childView" must be specified'});if(t=this._getView(t,e),!t)throw new G({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return t},_getView:function(n,r){return n.prototype instanceof e.View||n===e.View?n:t.isFunction(n)?n.call(this,r):void 0},_addChild:function(e,t){var n=this._createView(e,t);return this.addChildView(n,t),n},_getChildViewOptions:function(e,n){return t.isFunction(this.childViewOptions)?this.childViewOptions(e,n):this.childViewOptions;
},addChildView:function(e,t){return this.triggerMethod("before:add:child",this,e),this._setupChildView(e,t),this._isBuffering?this.children._add(e):(this._updateIndices(e,!0),this.children.add(e)),B(e),this._attachView(e,t),this.triggerMethod("add:child",this,e),e},_updateIndices:function(e,n){if(this.sort){if(!n)return void t.each(t.sortBy(this.children._views,"_index"),function(e,t){e._index=t});var r=t.isArray(e)?t.max(e,"_index"):e;t.isObject(r)&&t.each(this.children._views,function(e){e._index>=r._index&&(e._index+=1)})}},_attachView:function(e,t){var n=!e._isAttached&&!this._isBuffering&&this._isAttached&&this.monitorViewEvents!==!1;n&&o(e,"before:attach",e),this.attachHtml(this,e,t),n&&(e._isAttached=!0,o(e,"attach",e))},buildChildView:function(e,n,r){var i=t.extend({model:e},r);return new n(i)},removeChildView:function(e){return!e||e._isDestroyed?e:(this._removeChildView(e),this.children._updateLength(),this._updateIndices(e,!1),e)},isEmpty:function(e){var n=void 0;return t.result(e,"processedModels")?n=e.processedModels:(n=this.collection?this.collection.models:[],n=this._filterModels(n)),0===n.length},attachBuffer:function(e,t){this.Dom.appendContents(e.el,t,{_$el:e.$el})},_createBuffer:function(){var e=this,n=this.Dom.createBuffer();return t.each(this._bufferedChildren,function(t){e.Dom.appendContents(n,t.el,{_$contents:t.$el})}),n},attachHtml:function(e,t,n){e._isBuffering?e._bufferedChildren.splice(n,0,t):e._insertBefore(t,n)||e._insertAfter(t)},_insertBefore:function(e,n){var r=void 0,i=this.sort&&n<this.children.length-1;return i&&(r=t.find(this.children._views,function(e){return e._index===n+1})),!!r&&(this.beforeEl(r.el,e.el),!0)},beforeEl:function(e,t){this.$(e).before(t)},_insertAfter:function(e){this.Dom.appendContents(this.el,e.el,{_$el:this.$el,_$contents:e.$el})},_initChildViewStorage:function(){this.children=new Te},_removeChildren:function(){this._destroyChildren()},_destroyChildren:function(e){this.children.length&&(this.triggerMethod("before:destroy:children",this),t.each(this.children._views,t.bind(this._removeChildView,this)),this.children._updateLength(),this.triggerMethod("destroy:children",this))},_shouldAddChild:function(e,n){var r=this.filter;return!t.isFunction(r)||r.call(this,e,n,this.collection)}},{setDomApi:R});t.extend(Ne.prototype,me);var Ae=function(){this._init()};Ee(Ae.prototype,"_views"),t.extend(Ae.prototype,{_init:function(){this._views=[],this._viewsByCid={},this._indexByModel={},this._updateLength()},_add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._views.length,n=e.cid;this._viewsByCid[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),this._views.splice(t,0,e),this._updateLength()},_sort:function(e,n){return"string"==typeof e?(e=t.partial(L,e),this._sortBy(e)):1===e.length?this._sortBy(t.bind(e,n)):this._views.sort(t.bind(e,n))},_sortBy:function(e){var n=t.sortBy(this._views,e);return this._set(n),n},_set:function(e){this._views.length=0,this._views.push.apply(this._views,e.slice(0)),this._updateLength()},_swap:function(e,t){var n=this.findIndexByView(e),r=this.findIndexByView(t);if(n!==-1&&r!==-1){var i=this._views[n];this._views[n]=this._views[r],this._views[r]=i}},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByIndex:function(e){return this._views[e]},findIndexByView:function(e){return this._views.indexOf(e)},findByCid:function(e){return this._viewsByCid[e]},hasView:function(e){return!!this.findByCid(e.cid)},_remove:function(e){if(this._viewsByCid[e.cid]){e.model&&delete this._indexByModel[e.model.cid],delete this._viewsByCid[e.cid];var t=this.findIndexByView(e);this._views.splice(t,1),this._updateLength()}},_updateLength:function(){this.length=this._views.length}});var je=["behaviors","childView","childViewEventPrefix","childViewEvents","childViewOptions","childViewTriggers","collectionEvents","emptyView","emptyViewOptions","events","modelEvents","sortWithCollection","triggers","ui","viewComparator","viewFilter"],De=e.View.extend({sortWithCollection:!0,constructor:function(t){this._setOptions(t),this.mergeOptions(t,je),_(this),this.once("render",this._initialEvents),this._initChildViewStorage(),this._initBehaviors();var n=Array.prototype.slice.call(arguments);n[0]=this.options,e.View.prototype.constructor.apply(this,n),this.getEmptyRegion(),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this)},_initChildViewStorage:function(){this.children=new Ae},getEmptyRegion:function(){return this._emptyRegion&&!this._emptyRegion.isDestroyed()?this._emptyRegion:(this._emptyRegion=new ye({el:this.el,replaceElement:!1}),this._emptyRegion._parentView=this,this._emptyRegion)},_initialEvents:function(){this.listenTo(this.collection,{sort:this._onCollectionSort,reset:this._onCollectionReset,update:this._onCollectionUpdate})},_onCollectionSort:function(e,t){var n=t.add,r=t.merge,i=t.remove;this.sortWithCollection&&this.viewComparator!==!1&&(n||i||r||this.sort())},_onCollectionReset:function(){this.render()},_onCollectionUpdate:function(e,t){var n=t.changes,r=n.removed.length&&this._removeChildModels(n.removed);this._addedViews=n.added.length&&this._addChildModels(n.added),this._detachChildren(r),this._showChildren(),this._removeChildViews(r)},_removeChildModels:function(e){var n=this;return t.reduce(e,function(e,t){var r=n._removeChildModel(t);return r&&e.push(r),e},[])},_removeChildModel:function(e){var t=this.children.findByModel(e);return t&&this._removeChild(t),t},_removeChild:function(e){this.triggerMethod("before:remove:child",this,e),this.children._remove(e),this.triggerMethod("remove:child",this,e)},_addChildModels:function(e){return t.map(e,t.bind(this._addChildModel,this))},_addChildModel:function(e){var t=this._createChildView(e);return this._addChild(t),t},_createChildView:function(e){var t=this._getChildView(e),n=this._getChildViewOptions(e),r=this.buildChildView(e,t,n);return r},_addChild:function(e,t){this.triggerMethod("before:add:child",this,e),this._setupChildView(e),this.children._add(e,t),this.triggerMethod("add:child",this,e)},_getChildView:function(e){var t=this.childView;if(!t)throw new G({name:"NoChildViewError",message:'A "childView" must be specified'});if(t=this._getView(t,e),!t)throw new G({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return t},_getView:function(n,r){return n.prototype instanceof e.View||n===e.View?n:t.isFunction(n)?n.call(this,r):void 0},_getChildViewOptions:function(e){return t.isFunction(this.childViewOptions)?this.childViewOptions(e):this.childViewOptions},buildChildView:function(e,n,r){var i=t.extend({model:e},r);return new n(i)},_setupChildView:function(e){_(e),e.on("destroy",this.removeChildView,this),this._proxyChildViewEvents(e)},_getImmediateChildren:function(){return this.children._views},setElement:function(){return e.View.prototype.setElement.apply(this,arguments),this._isAttached=H(this.el),this},render:function(){return this._isDestroyed?this:(this.triggerMethod("before:render",this),this._destroyChildren(),this.children._init(),this.collection&&this._addChildModels(this.collection.models),this._showChildren(),this._isRendered=!0,this.triggerMethod("render",this),this)},sort:function(){return this._isDestroyed?this:this.children.length?(this._showChildren(),this):this},_showChildren:function(){return this.isEmpty()?void this._showEmptyView():(this._sortChildren(),void this.filter())},isEmpty:function(e){return e||!this.children.length},_showEmptyView:function(){var e=this._getEmptyView();if(e){var t=this._getEmptyViewOptions(),n=this.getEmptyRegion();n.show(new e(t))}},_getEmptyView:function(){var e=this.emptyView;if(e)return this._getView(e)},_destroyEmptyView:function(){var e=this.getEmptyRegion();e.hasView()&&e.empty()},_getEmptyViewOptions:function(){var e=this.emptyViewOptions||this.childViewOptions;return t.isFunction(e)?e.call(this):e},_sortChildren:function(){var e=this.getComparator();e&&(delete this._addedViews,this.triggerMethod("before:sort",this),this.children._sort(e,this),this.triggerMethod("sort",this))},setComparator:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.preventRender,r=this.viewComparator!==e,i=r&&!n;return this.viewComparator=e,i&&this.sort(),this},removeComparator:function(e){return this.setComparator(null,e)},getComparator:function(){return this.viewComparator?this.viewComparator:!(!this.sortWithCollection||this.viewComparator===!1||!this.collection)&&this._viewComparator},_viewComparator:function(e){return this.collection.indexOf(e.model)},filter:function(){if(this._isDestroyed)return this;if(!this.children.length)return this;var e=this._filterChildren();return this._renderChildren(e),this},_filterChildren:function(){var e=this,n=this._getFilter(),r=this._addedViews;if(delete this._addedViews,!n)return r?r:this.children._views;this.triggerMethod("before:filter",this);var i=[],o=[];return t.each(this.children._views,function(t,r,a){(n.call(e,t,r,a)?i:o).push(t)}),this._detachChildren(o),this.triggerMethod("filter",this,i,o),i},_getFilter:function(){var e=this.getFilter();if(!e)return!1;if(t.isFunction(e))return e;if(t.isObject(e)){var n=t.matches(e);return function(e){return n(e.model&&e.model.attributes)}}if(t.isString(e))return function(t){return t.model&&t.model.get(e)};throw new G({name:"InvalidViewFilterError",message:'"viewFilter" must be a function, predicate object literal, a string indicating a model attribute, or falsy'})},getFilter:function(){return this.viewFilter},setFilter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.preventRender,r=this.viewFilter!==e,i=r&&!n;return this.viewFilter=e,i&&this.filter(),this},removeFilter:function(e){return this.setFilter(null,e)},_detachChildren:function(e){t.each(e,t.bind(this._detachChildView,this))},_detachChildView:function(e){var t=e._isAttached&&this.monitorViewEvents!==!1;t&&o(e,"before:detach",e),this.detachHtml(e),t&&(e._isAttached=!1,o(e,"detach",e))},detachHtml:function(e){this.Dom.detachEl(e.el,e.$el)},_renderChildren:function(e){if(this.isEmpty(!e.length))return void this._showEmptyView();this._destroyEmptyView(),this.triggerMethod("before:render:children",this,e);var t=this._getBuffer(e);this._attachChildren(t,e),this.triggerMethod("render:children",this,e)},_attachChildren:function(e,n){var r=this._isAttached&&this.monitorViewEvents!==!1;n=r?n:[],t.each(n,function(e){e._isAttached||o(e,"before:attach",e)}),this.attachHtml(e),t.each(n,function(e){e._isAttached||(e._isAttached=!0,o(e,"attach",e))})},_getBuffer:function(e){var n=this,r=this.Dom.createBuffer();return t.each(e,function(e){B(e),n.Dom.appendContents(r,e.el,{_$contents:e.$el})}),r},attachHtml:function(e){this.Dom.appendContents(this.el,e,{_$el:this.$el})},swapChildViews:function(e,t){if(!this.children.hasView(e)||!this.children.hasView(t))throw new G({name:"ChildSwapError",message:"Both views must be children of the collection view"});return this.children._swap(e,t),this.Dom.swapEl(e.el,t.el),this.Dom.hasEl(this.el,e.el)!==this.Dom.hasEl(this.el,t.el)&&this.filter(),this},addChildView:function(e,t){return!e||e._isDestroyed?e:((!t||t>=this.children.length)&&(this._addedViews=[e]),this._addChild(e,t),this._showChildren(),e)},detachChildView:function(e){return this.removeChildView(e,{shouldDetach:!0}),e},removeChildView:function(e,t){return e?(this._removeChildView(e,t),this._removeChild(e),this.isEmpty()&&this._showEmptyView(),e):e},_removeChildViews:function(e){t.each(e,t.bind(this._removeChildView,this))},_removeChildView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.shouldDetach;e.off("destroy",this.removeChildView,this),n?this._detachChildView(e):this._destroyChildView(e),this.stopListening(e)},_destroyChildView:function(e){e._isDestroyed||(e._shouldDisableEvents=this.monitorViewEvents===!1,P(e))},_removeChildren:function(){this._destroyChildren();var e=this.getEmptyRegion();e.destroy(),delete this._addedViews},_destroyChildren:function(){this.children&&this.children.length&&(this.triggerMethod("before:destroy:children",this),this.monitorViewEvents===!1&&this.Dom.detachContents(this.el,this.$el),t.each(this.children._views,t.bind(this._removeChildView,this)),this.triggerMethod("destroy:children",this))}},{setDomApi:R});t.extend(De.prototype,me);var Oe=["childViewContainer","template","templateContext"],Re=Ne.extend({constructor:function(e){q("CompositeView is deprecated. Convert to View at your earliest convenience"),this.mergeOptions(e,Oe),Ne.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"update",this._onCollectionUpdate),this.listenTo(this.collection,"reset",this.renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_getChildView:function(e){var t=this.childView;if(!t)return this.constructor;if(t=this._getView(t,e),!t)throw new G({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return t},serializeData:function(){return this.serializeModel()},render:function(){return this._isDestroyed?this:(this._isRendering=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.renderChildren(),this._isRendering=!1,this._isRendered=!0,this.triggerMethod("render",this),this)},renderChildren:function(){(this._isRendered||this._isRendering)&&Ne.prototype._renderChildren.call(this)},attachBuffer:function(e,t){var n=this.getChildViewContainer(e);this.Dom.appendContents(n[0],t,{_$el:n})},_insertAfter:function(e){var t=this.getChildViewContainer(this,e);this.Dom.appendContents(t[0],e.el,{_$el:t,_$contents:e.$el})},_appendReorderedChildren:function(e){var t=this.getChildViewContainer(this);this.Dom.appendContents(t[0],e,{_$el:t})},getChildViewContainer:function(e,n){if(e.$childViewContainer)return e.$childViewContainer;var r=void 0,i=e.childViewContainer;if(i){var o=t.result(e,"childViewContainer");if(r="@"===o.charAt(0)&&e.ui?e.ui[o.substr(4)]:this.$(o),r.length<=0)throw new G({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else r=e.$el;return e.$childViewContainer=r,r},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}}),Be=t.pick(Ce.prototype,"serializeModel","getTemplate","_renderTemplate","_renderHtml","mixinTemplateContext","attachElContent");t.extend(Re.prototype,Be);var Pe=["collectionEvents","events","modelEvents","triggers","ui"],Fe=ne.extend({cidPrefix:"mnb",constructor:function(e,n){this.view=n,this.defaults&&q("Behavior defaults are deprecated. For similar functionality set options on the Behavior class."),this.defaults=t.clone(t.result(this,"defaults",{})),this._setOptions(t.extend({},this.defaults,e)),this.mergeOptions(this.options,Pe),this.ui=t.extend({},t.result(this,"ui"),t.result(n,"ui")),ne.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this.view._removeBehavior(this),this},proxyViewProperties:function(){return this.$el=this.view.$el,this.el=this.view.el,this},bindUIElements:function(){return this._bindUIElements(),this},unbindUIElements:function(){return this._unbindUIElements(),this},getUI:function(e){return this._getUI(e)},delegateEntityEvents:function(){return this._delegateEntityEvents(this.view.model,this.view.collection),this},undelegateEntityEvents:function(){return this._undelegateEntityEvents(this.view.model,this.view.collection),this},getEvents:function(){var e=this,n=this.normalizeUIKeys(t.result(this,"events"));return t.reduce(n,function(n,r,i){return t.isFunction(r)||(r=e[r]),r?(i=ce(i,e.cid),n[i]=t.bind(r,e),n):n},{})},getTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(t.result(this,"triggers"));return this._getViewTriggers(this.view,e)}}});t.extend(Fe.prototype,ae,ue,pe);var Ie=["region","regionClass"],Le=ne.extend({cidPrefix:"mna",constructor:function(e){this._setOptions(e),this.mergeOptions(e,Ie),this._initRegion(),ne.prototype.constructor.apply(this,arguments)},regionClass:ye,_initRegion:function(){var e=this.region;if(e){var t={regionClass:this.regionClass};this._region=_e(e,t)}},getRegion:function(){return this._region},showView:function(e){for(var t=this.getRegion(),n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.show.apply(t,[e].concat(r))},getView:function(){return this.getRegion().currentView},start:function(e){return this.triggerMethod("before:start",this,e),this.triggerMethod("start",this,e),this}}),Me=["appRoutes","controller"],Ve=e.Router.extend({constructor:function(t){this._setOptions(t),this.mergeOptions(t,Me),e.Router.apply(this,arguments);var n=this.appRoutes,r=this._getController();this.processAppRoutes(r,n),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var n=this._getController();return this._addAppRoute(n,e,t),this},_processOnRoute:function(e,n){if(t.isFunction(this.onRoute)){var r=t.invert(this.appRoutes)[e];this.onRoute(e,r,n)}},processAppRoutes:function(e,n){var r=this;if(!n)return this;var i=t.keys(n).reverse();return t.each(i,function(t){r._addAppRoute(e,t,n[t])}),this},_getController:function(){return this.controller},_addAppRoute:function(e,n,r){var i=e[r];if(!i)throw new G('Method "'+r+'" was not found on the controller');this.route(n,r,t.bind(i,e))},triggerMethod:i});t.extend(Ve.prototype,Q);var $e=e.Marionette,Ue=e.Marionette={};return Ue.noConflict=function(){return e.Marionette=$e,this},Ue.bindEvents=$(x),Ue.unbindEvents=$(C),Ue.bindRequests=$(E),Ue.unbindRequests=$(T),Ue.mergeOptions=$(z),Ue.getOption=$(W),Ue.normalizeMethods=$(K),Ue.extend=U,Ue.isNodeAttached=H,Ue.deprecate=q,Ue.triggerMethod=$(i),Ue.triggerMethodOn=o,Ue.isEnabled=A,Ue.setEnabled=j,Ue.monitorViewEvents=_,Ue.Behaviors={},Ue.Behaviors.behaviorsLookup=M,Ue.Application=Le,Ue.AppRouter=Ve,Ue.Renderer=we,Ue.TemplateCache=re,Ue.View=Ce,Ue.CollectionView=Ne,Ue.NextCollectionView=De,Ue.CompositeView=Re,Ue.Behavior=Fe,Ue.Region=ye,Ue.Error=G,Ue.Object=ne,Ue.DEV_MODE=!1,Ue.FEATURES=le,Ue.VERSION=V,Ue.DomApi=ge,Ue.setDomApi=function(e){Ne.setDomApi(e),Re.setDomApi(e),De.setDomApi(e),ye.setDomApi(e),Ce.setDomApi(e)},Ue}),this&&this.Marionette&&(this.Mn=this.Marionette)},3:function(e,t,n){var r,i;(function(e,n){!function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},a=o._,s=Array.prototype,c=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,u=s.push,d=s.slice,f=c.toString,h=c.hasOwnProperty,p=Array.isArray,g=Object.keys,m=Object.create,v=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"==typeof t||t.nodeType?o._=y:("undefined"!=typeof n&&!n.nodeType&&n.exports&&(t=n.exports=y),t._=y),y.VERSION="1.9.1";var _,b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return y.iteratee!==_?y.iteratee(e,t):null==e?y.identity:y.isFunction(e)?b(e,t,n):y.isObject(e)&&!y.isArray(e)?y.matcher(e):y.property(e)};y.iteratee=_=function(e,t){return w(e,t,1/0)};var x=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},C=function(e){if(!y.isObject(e))return{};if(m)return m(e);v.prototype=e;var t=new v;return v.prototype=null,t},k=function(e){return function(t){return null==t?void 0:t[e]}},E=function(e,t){return null!=e&&h.call(e,t)},T=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},S=Math.pow(2,53)-1,N=k("length"),A=function(e){var t=N(e);return"number"==typeof t&&t>=0&&t<=S};y.each=y.forEach=function(e,t,n){t=b(t,n);var r,i;if(A(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,t,n){t=w(t,n);for(var r=!A(e)&&y.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o};var j=function(e){var t=function(t,n,r,i){var o=!A(t)&&y.keys(t),a=(o||t).length,s=e>0?0:a-1;for(i||(r=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var c=o?o[s]:s;r=n(r,t[c],c,t)}return r};return function(e,n,r,i){var o=arguments.length>=3;return t(e,b(n,i,4),r,o)}};y.reduce=y.foldl=y.inject=j(1),y.reduceRight=y.foldr=j(-1),y.find=y.detect=function(e,t,n){var r=A(e)?y.findIndex:y.findKey,i=r(e,t,n);if(void 0!==i&&i!==-1)return e[i]},y.filter=y.select=function(e,t,n){var r=[];return t=w(t,n),y.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(w(t)),n)},y.every=y.all=function(e,t,n){t=w(t,n);for(var r=!A(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},y.some=y.any=function(e,t,n){t=w(t,n);for(var r=!A(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return A(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=x(function(e,t,n){var r,i;return y.isFunction(t)?i=t:y.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),y.map(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=T(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})}),y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,i,o=-(1/0),a=-(1/0);if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=A(e)?e:y.values(e);for(var s=0,c=e.length;s<c;s++)r=e[s],null!=r&&r>o&&(o=r)}else t=w(t,n),y.each(e,function(e,n,r){i=t(e,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=e,a=i)});return o},y.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=A(e)?e:y.values(e);for(var s=0,c=e.length;s<c;s++)r=e[s],null!=r&&r<o&&(o=r)}else t=w(t,n),y.each(e,function(e,n,r){i=t(e,n,r),(i<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},y.shuffle=function(e){return y.sample(e,1/0)},y.sample=function(e,t,n){if(null==t||n)return A(e)||(e=y.values(e)),e[y.random(e.length-1)];var r=A(e)?y.clone(e):y.values(e),i=N(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,a=0;a<t;a++){var s=y.random(a,o),c=r[a];r[a]=r[s],r[s]=c}return r.slice(0,t)},y.sortBy=function(e,t,n){var r=0;return t=w(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var D=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=w(r,i),y.each(n,function(t,i){var a=r(t,i,n);e(o,t,a)}),o}};y.groupBy=D(function(e,t,n){E(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=D(function(e,t,n){e[n]=t}),y.countBy=D(function(e,t,n){E(e,n)?e[n]++:e[n]=1});var O=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(e){return e?y.isArray(e)?d.call(e):y.isString(e)?e.match(O):A(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:A(e)?e.length:y.keys(e).length},y.partition=D(function(e,t,n){e[n?0:1].push(t)},!0),y.first=y.head=y.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,Boolean)};var R=function(e,t,n,r){r=r||[];for(var i=r.length,o=0,a=N(e);o<a;o++){var s=e[o];if(A(s)&&(y.isArray(s)||y.isArguments(s)))if(t)for(var c=0,l=s.length;c<l;)r[i++]=s[c++];else R(s,t,n,r),i=r.length;else n||(r[i++]=s)}return r};y.flatten=function(e,t){return R(e,t,!1)},y.without=x(function(e,t){return y.difference(e,t)}),y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var i=[],o=[],a=0,s=N(e);a<s;a++){var c=e[a],l=n?n(c,a,e):c;t&&!n?(a&&o===l||i.push(c),o=l):n?y.contains(o,l)||(o.push(l),i.push(c)):y.contains(i,c)||i.push(c)}return i},y.union=x(function(e){return y.uniq(R(e,!0,!0))}),y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=N(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){var a;for(a=1;a<n&&y.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},y.difference=x(function(e,t){return t=R(t,!0,!0),y.filter(e,function(e){return!y.contains(t,e)})}),y.unzip=function(e){for(var t=e&&y.max(e,N).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.zip=x(y.unzip),y.object=function(e,t){for(var n={},r=0,i=N(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var B=function(e){return function(t,n,r){n=w(n,r);for(var i=N(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};y.findIndex=B(1),y.findLastIndex=B(-1),y.sortedIndex=function(e,t,n,r){n=w(n,r,1);for(var i=n(t),o=0,a=N(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o};var P=function(e,t,n){return function(r,i,o){var a=0,s=N(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(d.call(r,a,s),y.isNaN),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}};y.indexOf=P(1,y.findIndex,y.sortedIndex),y.lastIndexOf=P(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},y.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(d.call(e,r,r+=t));return n};var F=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=C(e.prototype),a=e.apply(o,i);return y.isObject(a)?a:o};y.bind=x(function(e,t,n){if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var r=x(function(i){return F(e,r,t,this,n.concat(i))});return r}),y.partial=x(function(e,t){var n=y.partial.placeholder,r=function(){for(var i=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return F(e,r,this,this,a)};return r}),y.partial.placeholder=y,y.bindAll=x(function(e,t){t=R(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=y.bind(e[r],e)}}),y.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return E(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=x(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,i,o,a,s=0;n||(n={});var c=function(){s=n.leading===!1?0:y.now(),r=null,a=e.apply(i,o),r||(i=o=null)},l=function(){var l=y.now();s||n.leading!==!1||(s=l);var u=t-(l-s);return i=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=l,a=e.apply(i,o),r||(i=o=null)):r||n.trailing===!1||(r=setTimeout(c,u)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l},y.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},a=x(function(a){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(o,t),s&&(i=e.apply(this,a))}else r=y.delay(o,t,this,a);return i});return a.cancel=function(){clearTimeout(r),r=null},a},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2),y.restArguments=x;var I=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],M=function(e,t){var n=L.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||c,o="constructor";for(E(e,o)&&!y.contains(t,o)&&t.push(o);n--;)o=L[n],o in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)};y.keys=function(e){if(!y.isObject(e))return[];if(g)return g(e);var t=[];for(var n in e)E(e,n)&&t.push(n);return I&&M(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return I&&M(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=w(t,n);for(var r=y.keys(e),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=t(e[s],s,e)}return o},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()};var V=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,c=0;c<s;c++){var l=a[c];t&&void 0!==n[l]||(n[l]=o[l])}return n}};y.extend=V(y.allKeys),y.extendOwn=y.assign=V(y.keys),y.findKey=function(e,t,n){t=w(t,n);for(var r,i=y.keys(e),o=0,a=i.length;o<a;o++)if(r=i[o],t(e[r],r,e))return r};var $=function(e,t,n){return t in n};y.pick=x(function(e,t){var n={},r=t[0];if(null==e)return n;y.isFunction(r)?(t.length>1&&(r=b(r,t[1])),t=y.allKeys(e)):(r=$,t=R(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var a=t[i],s=e[a];r(s,a,e)&&(n[a]=s)}return n}),y.omit=x(function(e,t){var n,r=t[0];return y.isFunction(r)?(r=y.negate(r),t.length>1&&(n=t[1])):(t=y.map(R(t,!1,!1),String),r=function(e,n){return!y.contains(t,n)}),y.pick(e,r,n)}),y.defaults=V(y.allKeys,!0),y.create=function(e,t){var n=C(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var U,q;U=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&q(e,t,n,r)},q=function(e,t,n,r){e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=f.call(e);if(i!==f.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return l.valueOf.call(e)===l.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),o){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!U(e[c],t[c],n,r))return!1}else{var u,d=y.keys(e);if(c=d.length,y.keys(t).length!==c)return!1;for(;c--;)if(u=d[c],!E(t,u)||!U(e[u],t[u],n,r))return!1}return n.pop(),
r.pop(),!0},y.isEqual=function(e,t){return U(e,t)},y.isEmpty=function(e){return null==e||(A(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=p||function(e){return"[object Array]"===f.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){y["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return E(e,"callee")});var H=o.document&&o.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof H&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return!y.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&isNaN(e)},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===f.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){if(!y.isArray(t))return E(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!h.call(e,i))return!1;e=e[i]}return!!n},y.noConflict=function(){return o._=a,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=function(e){return y.isArray(e)?function(t){return T(t,e)}:k(e)},y.propertyOf=function(e){return null==e?function(){}:function(t){return y.isArray(t)?T(e,t):e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=b(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},W=y.invert(z),K=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};y.escape=K(z),y.unescape=K(W),y.result=function(e,t,n){y.isArray(t)||(t=[t]);var r=t.length;if(!r)return y.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=y.isFunction(o)?o.call(e):o}return e};var X=0;y.uniqueId=function(e){var t=++X+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(e){return"\\"+J[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||Y).source,(t.interpolate||Y).source,(t.evaluate||Y).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(G,Z),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";var a;try{a=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var s=function(e){return a.call(this,e,y)},c=t.variable||"obj";return s.source="function("+c+"){\n"+o+"}",s},y.chain=function(e){var t=y(e);return t._chain=!0,t};var Q=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){return y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),Q(this,n.apply(y,e))}}),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Q(this,n)}}),y.each(["concat","join","slice"],function(e){var t=s[e];y.prototype[e]=function(){return Q(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},r=[],i=function(){return y}.apply(t,r),!(void 0!==i&&(n.exports=i))}()}).call(t,function(){return this}(),n(216)(e))},4:function(e,t,n){!function(t,r){e.exports=r(n(3),n(8))}(this,function(e,t){"use strict";function n(e,t,n,r){var i=e[t];if(!(n&&n!==i.callback&&n!==i.callback._callback||r&&r!==i.context))return delete e[t],!0}function r(t,r,i,o){t||(t={});for(var a=r?[r]:e.keys(t),s=!1,c=0,l=a.length;c<l;c++)r=a[c],t[r]&&n(t,r,i,o)&&(s=!0);return s}function i(t){return u[t]||(u[t]=e.bind(c.log,c,t))}function o(t){return e.isFunction(t)?t:function(){return t}}e="default"in e?e.default:e,t="default"in t?t.default:t;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=t.Radio,c=t.Radio={};c.VERSION="2.0.0",c.noConflict=function(){return t.Radio=s,this},c.DEBUG=!1,c._debugText=function(e,t,n){return e+(n?" on the "+n+" channel":"")+': "'+t+'"'},c.debugLog=function(e,t,n){c.DEBUG&&console&&console.warn&&console.warn(c._debugText(e,t,n))};var l=/\s+/;c._eventsApi=function(t,n,r,i){if(!r)return!1;var o={};if("object"===("undefined"==typeof r?"undefined":a(r))){for(var s in r){var c=t[n].apply(t,[s,r[s]].concat(i));l.test(s)?e.extend(o,c):o[s]=c}return o}if(l.test(r)){for(var u=r.split(l),d=0,f=u.length;d<f;d++)o[u[d]]=t[n].apply(t,[u[d]].concat(i));return o}return!1},c._callHandler=function(e,t,n){var r=n[0],i=n[1],o=n[2];switch(n.length){case 0:return e.call(t);case 1:return e.call(t,r);case 2:return e.call(t,r,i);case 3:return e.call(t,r,i,o);default:return e.apply(t,n)}};var u={};e.extend(c,{log:function(t,n){if("undefined"!=typeof console){var r=e.toArray(arguments).slice(2);console.log("["+t+'] "'+n+'"',r)}},tuneIn:function(e){var t=c.channel(e);return t._tunedIn=!0,t.on("all",i(e)),this},tuneOut:function(e){var t=c.channel(e);return t._tunedIn=!1,t.off("all",i(e)),delete u[e],this}}),c.Requests={request:function(t){var n=e.toArray(arguments).slice(1),r=c._eventsApi(this,"request",t,n);if(r)return r;var i=this.channelName,o=this._requests;if(i&&this._tunedIn&&c.log.apply(this,[i,t].concat(n)),o&&(o[t]||o.default)){var a=o[t]||o.default;return n=o[t]?n:arguments,c._callHandler(a.callback,a.context,n)}c.debugLog("An unhandled request was fired",t,i)},reply:function(e,t,n){return c._eventsApi(this,"reply",e,[t,n])?this:(this._requests||(this._requests={}),this._requests[e]&&c.debugLog("A request was overwritten",e,this.channelName),this._requests[e]={callback:o(t),context:n||this},this)},replyOnce:function(t,n,r){if(c._eventsApi(this,"replyOnce",t,[n,r]))return this;var i=this,a=e.once(function(){return i.stopReplying(t),o(n).apply(this,arguments)});return this.reply(t,a,r)},stopReplying:function(e,t,n){return c._eventsApi(this,"stopReplying",e)?this:(e||t||n?r(this._requests,e,t,n)||c.debugLog("Attempted to remove the unregistered request",e,this.channelName):delete this._requests,this)}},c._channels={},c.channel=function(e){if(!e)throw new Error("You must provide a name for the channel.");return c._channels[e]?c._channels[e]:c._channels[e]=new c.Channel(e)},c.Channel=function(e){this.channelName=e},e.extend(c.Channel.prototype,t.Events,c.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopReplying(),this}});var d,f,h=[t.Events,c.Requests];return e.each(h,function(t){e.each(t,function(t,n){c[n]=function(t){return f=e.toArray(arguments).slice(1),d=this.channel(t),d[n].apply(d,f)}})}),c.reset=function(t){var n=t?[this._channels[t]]:this._channels;e.each(n,function(e){e.reset()})},c})},5:function(e,t,n){var r,i;/*!
	 * jQuery JavaScript Library v3.3.1
	 * https://jquery.com/
	 *
	 * Includes Sizzle.js
	 * https://sizzlejs.com/
	 *
	 * Copyright JS Foundation and other contributors
	 * Released under the MIT license
	 * https://jquery.org/license
	 *
	 * Date: 2018-01-20T17:24Z
	 */
!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,o){"use strict";function a(e,t,n){t=t||ue;var r,i=t.createElement("script");if(i.text=e,n)for(r in ke)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function s(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?me[ve.call(e)]||"object":typeof e}function c(e){var t=!!e&&"length"in e&&e.length,n=s(e);return!xe(e)&&!Ce(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function u(e,t,n){return xe(t)?Te.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?Te.grep(e,function(e){return e===t!==n}):"string"!=typeof t?Te.grep(e,function(e){return ge.call(t,e)>-1!==n}):Te.filter(t,e,n)}function d(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function f(e){var t={};return Te.each(e.match(Le)||[],function(e,n){t[n]=!0}),t}function h(e){return e}function p(e){throw e}function g(e,t,n,r){var i;try{e&&xe(i=e.promise)?i.call(e).done(t).fail(n):e&&xe(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function m(){ue.removeEventListener("DOMContentLoaded",m),n.removeEventListener("load",m),Te.ready()}function v(e,t){return t.toUpperCase()}function y(e){return e.replace(Ue,"ms-").replace(qe,v)}function _(){this.expando=Te.expando+_.uid++}function b(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Ke.test(e)?JSON.parse(e):e)}function w(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Xe,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n=b(n)}catch(e){}We.set(e,t,n)}else n=void 0;return n}function x(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return Te.css(e,t,"")},c=s(),l=n&&n[3]||(Te.cssNumber[t]?"":"px"),u=(Te.cssNumber[t]||"px"!==l&&+c)&&Je.exec(Te.css(e,t));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;a--;)Te.style(e,t,u+l),(1-o)*(1-(o=s()/c||.5))<=0&&(a=0),u/=o;u*=2,Te.style(e,t,u+l),n=n||[]}return n&&(u=+u||+c||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=u,r.end=i)),i}function C(e){var t,n=e.ownerDocument,r=e.nodeName,i=et[r];return i?i:(t=n.body.appendChild(n.createElement(r)),i=Te.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),et[r]=i,i)}function k(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)r=e[o],r.style&&(n=r.style.display,t?("none"===n&&(i[o]=ze.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Ze(r)&&(i[o]=C(r))):"none"!==n&&(i[o]="none",ze.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function E(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&l(e,t)?Te.merge([e],n):n}function T(e,t){for(var n=0,r=e.length;n<r;n++)ze.set(e[n],"globalEval",!t||ze.get(t[n],"globalEval"))}function S(e,t,n,r,i){for(var o,a,c,l,u,d,f=t.createDocumentFragment(),h=[],p=0,g=e.length;p<g;p++)if(o=e[p],o||0===o)if("object"===s(o))Te.merge(h,o.nodeType?[o]:o);else if(ot.test(o)){for(a=a||f.appendChild(t.createElement("div")),c=(nt.exec(o)||["",""])[1].toLowerCase(),l=it[c]||it._default,a.innerHTML=l[1]+Te.htmlPrefilter(o)+l[2],d=l[0];d--;)a=a.lastChild;Te.merge(h,a.childNodes),a=f.firstChild,a.textContent=""}else h.push(t.createTextNode(o));for(f.textContent="",p=0;o=h[p++];)if(r&&Te.inArray(o,r)>-1)i&&i.push(o);else if(u=Te.contains(o.ownerDocument,o),a=E(f.appendChild(o),"script"),u&&T(a),n)for(d=0;o=a[d++];)rt.test(o.type||"")&&n.push(o);return f}function N(){return!0}function A(){return!1}function j(){try{return ue.activeElement}catch(e){}}function D(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)D(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=A;else if(!i)return e;return 1===o&&(a=i,i=function(e){return Te().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=Te.guid++)),e.each(function(){Te.event.add(this,t,i,r,n)})}function O(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")?Te(e).children("tbody")[0]||e:e}function R(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function B(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function P(e,t){var n,r,i,o,a,s,c,l;if(1===t.nodeType){if(ze.hasData(e)&&(o=ze.access(e),a=ze.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)Te.event.add(t,i,l[i][n])}We.hasData(e)&&(s=We.access(e),c=Te.extend({},s),We.set(t,c))}}function F(e,t){var n=t.nodeName.toLowerCase();"input"===n&&tt.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function I(e,t,n,r){t=he.apply([],t);var i,o,s,c,l,u,d=0,f=e.length,h=f-1,p=t[0],g=xe(p);if(g||f>1&&"string"==typeof p&&!we.checkClone&&ft.test(p))return e.each(function(i){var o=e.eq(i);g&&(t[0]=p.call(this,i,o.html())),I(o,t,n,r)});if(f&&(i=S(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=Te.map(E(i,"script"),R),c=s.length;d<f;d++)l=i,d!==h&&(l=Te.clone(l,!0,!0),c&&Te.merge(s,E(l,"script"))),n.call(e[d],l,d);if(c)for(u=s[s.length-1].ownerDocument,Te.map(s,B),d=0;d<c;d++)l=s[d],rt.test(l.type||"")&&!ze.access(l,"globalEval")&&Te.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?Te._evalUrl&&Te._evalUrl(l.src):a(l.textContent.replace(ht,""),u,l))}return e}function L(e,t,n){for(var r,i=t?Te.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||Te.cleanData(E(r)),r.parentNode&&(n&&Te.contains(r.ownerDocument,r)&&T(E(r,"script")),r.parentNode.removeChild(r));return e}function M(e,t,n){var r,i,o,a,s=e.style;return n=n||gt(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||Te.contains(e.ownerDocument,e)||(a=Te.style(e,t)),!we.pixelBoxStyles()&&pt.test(a)&&mt.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function V(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function $(e){if(e in xt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=wt.length;n--;)if(e=wt[n]+t,e in xt)return e}function U(e){var t=Te.cssProps[e];return t||(t=Te.cssProps[e]=$(e)||e),t}function q(e,t,n){var r=Je.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function H(e,t,n,r,i,o){var a="width"===t?1:0,s=0,c=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=Te.css(e,n+Ge[a],!0,i)),r?("content"===n&&(c-=Te.css(e,"padding"+Ge[a],!0,i)),"margin"!==n&&(c-=Te.css(e,"border"+Ge[a]+"Width",!0,i))):(c+=Te.css(e,"padding"+Ge[a],!0,i),"padding"!==n?c+=Te.css(e,"border"+Ge[a]+"Width",!0,i):s+=Te.css(e,"border"+Ge[a]+"Width",!0,i));return!r&&o>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-c-s-.5))),c}function z(e,t,n){var r=gt(e),i=M(e,t,r),o="border-box"===Te.css(e,"boxSizing",!1,r),a=o;if(pt.test(i)){if(!n)return i;i="auto"}return a=a&&(we.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===Te.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),i=parseFloat(i)||0,i+H(e,t,n||(o?"border":"content"),a,r,i)+"px"}function W(e,t,n,r,i){return new W.prototype.init(e,t,n,r,i)}function K(){kt&&(ue.hidden===!1&&n.requestAnimationFrame?n.requestAnimationFrame(K):n.setTimeout(K,Te.fx.interval),Te.fx.tick())}function X(){return n.setTimeout(function(){Ct=void 0}),Ct=Date.now()}function Y(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=Ge[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function J(e,t,n){for(var r,i=(Q.tweeners[t]||[]).concat(Q.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function G(e,t,n){var r,i,o,a,s,c,l,u,d="width"in t||"height"in t,f=this,h={},p=e.style,g=e.nodeType&&Ze(e),m=ze.get(e,"fxshow");n.queue||(a=Te._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,Te.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],Et.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}h[r]=m&&m[r]||Te.style(e,r)}if(c=!Te.isEmptyObject(t),c||!Te.isEmptyObject(h)){d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=m&&m.display,null==l&&(l=ze.get(e,"display")),u=Te.css(e,"display"),"none"===u&&(l?u=l:(k([e],!0),l=e.style.display||l,u=Te.css(e,"display"),k([e]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===Te.css(e,"float")&&(c||(f.done(function(){p.display=l}),null==l&&(u=p.display,l="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),c=!1;for(r in h)c||(m?"hidden"in m&&(g=m.hidden):m=ze.access(e,"fxshow",{display:l}),o&&(m.hidden=!g),g&&k([e],!0),f.done(function(){g||k([e]),ze.remove(e,"fxshow");for(r in h)Te.style(e,r,h[r])})),c=J(g?m[r]:0,r,f),r in m||(m[r]=c.start,g&&(c.end=c.start,c.start=0))}}function Z(e,t){var n,r,i,o,a;for(n in e)if(r=y(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=Te.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function Q(e,t,n){var r,i,o=0,a=Q.prefilters.length,s=Te.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var t=Ct||X(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,c=l.tweens.length;a<c;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),o<1&&c?n:(c||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:Te.extend({},t),opts:Te.extend(!0,{specialEasing:{},easing:Te.easing._default},n),originalProperties:t,originalOptions:n,startTime:Ct||X(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Te.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),u=l.props;for(Z(u,l.opts.specialEasing);o<a;o++)if(r=Q.prefilters[o].call(l,e,u,l.opts))return xe(r.stop)&&(Te._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return Te.map(u,J,l),xe(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),Te.fx.timer(Te.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}function ee(e){var t=e.match(Le)||[];return t.join(" ")}function te(e){return e.getAttribute&&e.getAttribute("class")||""}function ne(e){return Array.isArray(e)?e:"string"==typeof e?e.match(Le)||[]:[]}function re(e,t,n,r){var i;if(Array.isArray(t))Te.each(t,function(t,i){n||It.test(e)?r(e,i):re(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==s(t))r(e,t);else for(i in t)re(e+"["+i+"]",t[i],n,r)}function ie(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(Le)||[];if(xe(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function oe(e,t,n,r){function i(s){var c;return o[s]=!0,Te.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||a||o[l]?a?!(c=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),c}var o={},a=e===Yt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function ae(e,t){var n,r,i=Te.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Te.extend(!0,e,r),e}function se(e,t,n){for(var r,i,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==c[0]&&c.unshift(o),n[o]}function ce(e,t,n,r){var i,o,a,s,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(a=l[c+" "+o]||l["* "+o],!a)for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[c+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[i]:l[i]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}var le=[],ue=n.document,de=Object.getPrototypeOf,fe=le.slice,he=le.concat,pe=le.push,ge=le.indexOf,me={},ve=me.toString,ye=me.hasOwnProperty,_e=ye.toString,be=_e.call(Object),we={},xe=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},Ce=function(e){return null!=e&&e===e.window},ke={type:!0,src:!0,noModule:!0},Ee="3.3.1",Te=function(e,t){return new Te.fn.init(e,t)},Se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Te.fn=Te.prototype={jquery:Ee,constructor:Te,length:0,toArray:function(){return fe.call(this)},get:function(e){return null==e?fe.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Te.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Te.each(this,e)},map:function(e){return this.pushStack(Te.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(fe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:pe,sort:le.sort,splice:le.splice},Te.extend=Te.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||xe(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(l&&r&&(Te.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&Te.isPlainObject(n)?n:{},a[t]=Te.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},Te.extend({expando:"jQuery"+(Ee+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==ve.call(e)||(t=de(e))&&(n=ye.call(t,"constructor")&&t.constructor,"function"!=typeof n||_e.call(n)!==be))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){a(e)},each:function(e,t){var n,r=0;if(c(e))for(n=e.length;r<n&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(Se,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?Te.merge(n,"string"==typeof e?[e]:e):pe.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ge.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,a=[];if(c(e))for(r=e.length;o<r;o++)i=t(e[o],o,n),null!=i&&a.push(i);else for(o in e)i=t(e[o],o,n),null!=i&&a.push(i);return he.apply([],a)},guid:1,support:we}),"function"==typeof Symbol&&(Te.fn[Symbol.iterator]=le[Symbol.iterator]),Te.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){me["[object "+t+"]"]=t.toLowerCase()});var Ne=/*!
	 * Sizzle CSS Selector Engine v2.3.3
	 * https://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2016-08-08
	 */
function(e){function t(e,t,n,r){var i,o,a,s,c,l,u,f=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!r&&((t?t.ownerDocument||t:$)!==R&&O(t),t=t||R,P)){if(11!==p&&(c=ve.exec(e)))if(i=c[1]){if(9===p){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&M(t,a)&&a.id===i)return n.push(a),n}else{if(c[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((i=c[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(i)),n}if(x.qsa&&!W[e+" "]&&(!F||!F.test(e))){if(1!==p)f=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(we,xe):t.setAttribute("id",s=V),l=T(e),o=l.length;o--;)l[o]="#"+s+" "+h(l[o]);u=l.join(","),f=ye.test(e)&&d(t.parentNode)||t}if(u)try{return Z.apply(n,f.querySelectorAll(u)),n}catch(e){}finally{s===V&&t.removeAttribute("id")}}}return N(e.replace(se,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[V]=!0,e}function i(e){var t=R.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)C.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ke(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function d(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function h(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=q++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,c){var l,u,d,f=[U,s];if(c){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(d=t[V]||(t[V]={}),u=d[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=u[o])&&l[0]===U&&l[1]===s)return f[2]=l[2];if(u[o]=f,f[2]=e(t,n,c))return!0}return!1}}function g(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function v(e,t,n,r,i){for(var o,a=[],s=0,c=e.length,l=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function y(e,t,n,i,o,a){return i&&!i[V]&&(i=y(i)),o&&!o[V]&&(o=y(o,a)),r(function(r,a,s,c){var l,u,d,f=[],h=[],p=a.length,g=r||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?g:v(g,f,e,s,c),_=n?o||(r?e:p||i)?[]:a:y;if(n&&n(y,_,s,c),i)for(l=v(_,h),i(l,[],s,c),u=l.length;u--;)(d=l[u])&&(_[h[u]]=!(y[h[u]]=d));if(r){if(o||e){if(o){for(l=[],u=_.length;u--;)(d=_[u])&&l.push(y[u]=d);o(null,_=[],l,c)}for(u=_.length;u--;)(d=_[u])&&(l=o?ee(r,d):f[u])>-1&&(r[l]=!(a[l]=d))}}else _=v(_===a?_.splice(p,_.length):_),o?o(null,a,_,c):Z.apply(a,_)})}function _(e){for(var t,n,r,i=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,c=p(function(e){return e===t},a,!0),l=p(function(e){return ee(t,e)>-1},a,!0),u=[function(e,n,r){var i=!o&&(r||n!==A)||((t=n).nodeType?c(e,n,r):l(e,n,r));return t=null,i}];s<i;s++)if(n=C.relative[e[s].type])u=[p(g(u),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[V]){for(r=++s;r<i&&!C.relative[e[r].type];r++);return y(s>1&&g(u),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,s<r&&_(e.slice(s,r)),r<i&&_(e=e.slice(r)),r<i&&h(e))}u.push(n)}return g(u)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,c,l){var u,d,f,h=0,p="0",g=r&&[],m=[],y=A,_=r||o&&C.find.TAG("*",l),b=U+=null==y?1:Math.random()||.1,w=_.length;for(l&&(A=a===R||a||l);p!==w&&null!=(u=_[p]);p++){if(o&&u){for(d=0,a||u.ownerDocument===R||(O(u),s=!P);f=e[d++];)if(f(u,a||R,s)){c.push(u);break}l&&(U=b)}i&&((u=!f&&u)&&h--,r&&g.push(u))}if(h+=p,i&&p!==h){for(d=0;f=n[d++];)f(g,m,a,s);if(r){if(h>0)for(;p--;)g[p]||m[p]||(m[p]=J.call(c));m=v(m)}Z.apply(c,m),l&&!r&&m.length>0&&h+n.length>1&&t.uniqueSort(c)}return l&&(U=b,A=y),g};return i?r(a):a}var w,x,C,k,E,T,S,N,A,j,D,O,R,B,P,F,I,L,M,V="sizzle"+1*new Date,$=e.document,U=0,q=0,H=n(),z=n(),W=n(),K=function(e,t){return e===t&&(D=!0),0},X={}.hasOwnProperty,Y=[],J=Y.pop,G=Y.push,Z=Y.push,Q=Y.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ue=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(oe),fe=new RegExp("^"+re+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,_e=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),be=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},we=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xe=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Ce=function(){O()},ke=p(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Z.apply(Y=Q.call($.childNodes),$.childNodes),Y[$.childNodes.length].nodeType}catch(e){Z={apply:Y.length?function(e,t){G.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}x=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:$;return r!==R&&9===r.nodeType&&r.documentElement?(R=r,B=R.documentElement,P=!E(R),$!==R&&(n=R.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),x.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=i(function(e){return e.appendChild(R.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=me.test(R.getElementsByClassName),x.getById=i(function(e){return B.appendChild(e).id=V,!R.getElementsByName||!R.getElementsByName(V).length}),x.getById?(C.filter.ID=function(e){var t=e.replace(_e,be);return function(e){return e.getAttribute("id")===t}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var n=t.getElementById(e);return n?[n]:[]}}):(C.filter.ID=function(e){var t=e.replace(_e,be);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var n,r,i,o=t.getElementById(e);if(o){if(n=o.getAttributeNode("id"),n&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if(n=o.getAttributeNode("id"),n&&n.value===e)return[o]}return[]}}),C.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},C.find.CLASS=x.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&P)return t.getElementsByClassName(e)},I=[],F=[],(x.qsa=me.test(R.querySelectorAll))&&(i(function(e){B.appendChild(e).innerHTML="<a id='"+V+"'></a><select id='"+V+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+V+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+V+"+*").length||F.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=R.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&F.push(":enabled",":disabled"),B.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(x.matchesSelector=me.test(L=B.matches||B.webkitMatchesSelector||B.mozMatchesSelector||B.oMatchesSelector||B.msMatchesSelector))&&i(function(e){x.disconnectedMatch=L.call(e,"*"),L.call(e,"[s!='']:x"),I.push("!=",oe)}),F=F.length&&new RegExp(F.join("|")),I=I.length&&new RegExp(I.join("|")),t=me.test(B.compareDocumentPosition),M=t||me.test(B.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=t?function(e,t){if(e===t)return D=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===R||e.ownerDocument===$&&M($,e)?-1:t===R||t.ownerDocument===$&&M($,t)?1:j?ee(j,e)-ee(j,t):0:4&n?-1:1)}:function(e,t){if(e===t)return D=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],c=[t];if(!i||!o)return e===R?-1:t===R?1:i?-1:o?1:j?ee(j,e)-ee(j,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;s[r]===c[r];)r++;return r?a(s[r],c[r]):s[r]===$?-1:c[r]===$?1:0},R):R},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==R&&O(e),n=n.replace(ue,"='$1']"),x.matchesSelector&&P&&!W[n+" "]&&(!I||!I.test(n))&&(!F||!F.test(n)))try{var r=L.call(e,n);if(r||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,R,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==R&&O(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==R&&O(e);var n=C.attrHandle[t.toLowerCase()],r=n&&X.call(C.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==r?r:x.attributes||!P?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(we,xe)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(D=!x.detectDuplicates,j=!x.sortStable&&e.slice(0),e.sort(K),D){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return j=null,e},k=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=k(t);return n},C=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,be),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,f,h,p,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!c&&!s,_=!1;if(m){if(o){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(f=m,d=f[V]||(f[V]={}),u=d[f.uniqueID]||(d[f.uniqueID]={}),l=u[e]||[],h=l[0]===U&&l[1],_=h&&l[2],f=h&&m.childNodes[h];f=++h&&f&&f[g]||(_=h=0)||p.pop();)if(1===f.nodeType&&++_&&f===t){u[e]=[U,h,_];break}}else if(y&&(f=t,d=f[V]||(f[V]={}),u=d[f.uniqueID]||(d[f.uniqueID]={}),l=u[e]||[],h=l[0]===U&&l[1],_=h),_===!1)for(;(f=++h&&f&&f[g]||(_=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++_||(y&&(d=f[V]||(f[V]={}),u=d[f.uniqueID]||(d[f.uniqueID]={}),u[e]=[U,_]),f!==t)););return _-=i,_===r||_%r===0&&_/r>=0}}},PSEUDO:function(e,n){var i,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[V]?o(n):o.length>1?(i=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=ee(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=S(e.replace(se,"$1"));return i[V]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(_e,be),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:r(function(e){return fe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,be).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===B},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[n<0?n+t:n]}),even:u(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=c(w);return f.prototype=C.filters=C.pseudos,C.setFilters=new f,T=t.tokenize=function(e,n){var r,i,o,a,s,c,l,u=z[e+" "];if(u)return n?0:u.slice(0);for(s=e,c=[],l=C.preFilter;s;){r&&!(i=ce.exec(s))||(i&&(s=s.slice(i[0].length)||s),c.push(o=[])),r=!1,(i=le.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(se," ")}),s=s.slice(r.length));for(a in C.filter)!(i=he[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):z(e,c).slice(0)},S=t.compile=function(e,t){var n,r=[],i=[],o=W[e+" "];if(!o){for(t||(t=T(e)),n=t.length;n--;)o=_(t[n]),o[V]?r.push(o):i.push(o);o=W(e,b(i,r)),o.selector=e}return o},N=t.select=function(e,t,n,r){var i,o,a,s,c,l="function"==typeof e&&e,u=!r&&T(e=l.selector||e);if(n=n||[],1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&P&&C.relative[o[1].type]){if(t=(C.find.ID(a.matches[0].replace(_e,be),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(a=o[i],!C.relative[s=a.type]);)if((c=C.find[s])&&(r=c(a.matches[0].replace(_e,be),ye.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&h(o),!e)return Z.apply(n,r),n;break}}return(l||S(e,u))(r,t,!P,n,!t||ye.test(e)&&d(t.parentNode)||t),n},x.sortStable=V.split("").sort(K).join("")===V,x.detectDuplicates=!!D,O(),x.sortDetached=i(function(e){return 1&e.compareDocumentPosition(R.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(n);Te.find=Ne,Te.expr=Ne.selectors,Te.expr[":"]=Te.expr.pseudos,Te.uniqueSort=Te.unique=Ne.uniqueSort,Te.text=Ne.getText,Te.isXMLDoc=Ne.isXML,Te.contains=Ne.contains,Te.escapeSelector=Ne.escape;var Ae=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Te(e).is(n))break;r.push(e)}return r},je=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},De=Te.expr.match.needsContext,Oe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Te.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Te.find.matchesSelector(r,e)?[r]:[]:Te.find.matches(e,Te.grep(t,function(e){return 1===e.nodeType}))},Te.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(Te(e).filter(function(){for(t=0;t<r;t++)if(Te.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)Te.find(e,i[t],n);return r>1?Te.uniqueSort(n):n},filter:function(e){return this.pushStack(u(this,e||[],!1))},not:function(e){return this.pushStack(u(this,e||[],!0))},is:function(e){return!!u(this,"string"==typeof e&&De.test(e)?Te(e):e||[],!1).length}});var Re,Be=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Pe=Te.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||Re,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Be.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof Te?t[0]:t,Te.merge(this,Te.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:ue,!0)),Oe.test(r[1])&&Te.isPlainObject(t))for(r in t)xe(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=ue.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):xe(e)?void 0!==n.ready?n.ready(e):e(Te):Te.makeArray(e,this)};Pe.prototype=Te.fn,Re=Te(ue);var Fe=/^(?:parents|prev(?:Until|All))/,Ie={children:!0,contents:!0,next:!0,prev:!0};Te.fn.extend({has:function(e){var t=Te(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Te.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&Te(e);if(!De.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Te.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Te.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ge.call(Te(e),this[0]):ge.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Te.uniqueSort(Te.merge(this.get(),Te(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Te.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Ae(e,"parentNode")},parentsUntil:function(e,t,n){return Ae(e,"parentNode",n)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return Ae(e,"nextSibling")},prevAll:function(e){return Ae(e,"previousSibling")},nextUntil:function(e,t,n){return Ae(e,"nextSibling",n)},prevUntil:function(e,t,n){return Ae(e,"previousSibling",n)},siblings:function(e){return je((e.parentNode||{}).firstChild,e)},children:function(e){return je(e.firstChild)},contents:function(e){return l(e,"iframe")?e.contentDocument:(l(e,"template")&&(e=e.content||e),Te.merge([],e.childNodes))}},function(e,t){Te.fn[e]=function(n,r){var i=Te.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Te.filter(r,i)),this.length>1&&(Ie[e]||Te.uniqueSort(i),Fe.test(e)&&i.reverse()),this.pushStack(i)}});var Le=/[^\x20\t\r\n\f]+/g;Te.Callbacks=function(e){e="string"==typeof e?f(e):Te.extend({},e);var t,n,r,i,o=[],a=[],c=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;c=-1)for(n=a.shift();++c<o.length;)o[c].apply(n[0],n[1])===!1&&e.stopOnFalse&&(c=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(c=o.length-1,a.push(n)),function t(n){Te.each(n,function(n,r){xe(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==s(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return Te.each(arguments,function(e,t){for(var n;(n=Te.inArray(t,o,n))>-1;)o.splice(n,1),n<=c&&c--}),this},has:function(e){return e?Te.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},Te.extend({Deferred:function(e){var t=[["notify","progress",Te.Callbacks("memory"),Te.Callbacks("memory"),2],["resolve","done",Te.Callbacks("once memory"),Te.Callbacks("once memory"),0,"resolved"],["reject","fail",Te.Callbacks("once memory"),Te.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return Te.Deferred(function(n){Te.each(t,function(t,r){var i=xe(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&xe(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){function o(e,t,r,i){return function(){var s=this,c=arguments,l=function(){var n,l;if(!(e<a)){if(n=r.apply(s,c),n===t.promise())throw new TypeError("Thenable self-resolution");l=n&&("object"==typeof n||"function"==typeof n)&&n.then,xe(l)?i?l.call(n,o(a,t,h,i),o(a,t,p,i)):(a++,l.call(n,o(a,t,h,i),o(a,t,p,i),o(a,t,h,t.notifyWith))):(r!==h&&(s=void 0,c=[n]),(i||t.resolveWith)(s,c))}},u=i?l:function(){try{l()}catch(n){Te.Deferred.exceptionHook&&Te.Deferred.exceptionHook(n,u.stackTrace),e+1>=a&&(r!==p&&(s=void 0,c=[n]),t.rejectWith(s,c))}};e?u():(Te.Deferred.getStackHook&&(u.stackTrace=Te.Deferred.getStackHook()),n.setTimeout(u))}}var a=0;return Te.Deferred(function(n){t[0][3].add(o(0,n,xe(i)?i:h,n.notifyWith)),t[1][3].add(o(0,n,xe(e)?e:h)),t[2][3].add(o(0,n,xe(r)?r:p))}).promise()},promise:function(e){return null!=e?Te.extend(e,i):i}},o={};return Te.each(t,function(e,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=fe.call(arguments),o=Te.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?fe.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(g(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||xe(i[n]&&i[n].then)))return o.then();for(;n--;)g(i[n],a(n),o.reject);return o.promise()}});var Me=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Te.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&Me.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},Te.readyException=function(e){n.setTimeout(function(){throw e})};var Ve=Te.Deferred();Te.fn.ready=function(e){return Ve.then(e).catch(function(e){Te.readyException(e)}),this},Te.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--Te.readyWait:Te.isReady)||(Te.isReady=!0,e!==!0&&--Te.readyWait>0||Ve.resolveWith(ue,[Te]))}}),Te.ready.then=Ve.then,"complete"===ue.readyState||"loading"!==ue.readyState&&!ue.documentElement.doScroll?n.setTimeout(Te.ready):(ue.addEventListener("DOMContentLoaded",m),n.addEventListener("load",m));var $e=function(e,t,n,r,i,o,a){var c=0,l=e.length,u=null==n;if("object"===s(n)){i=!0;for(c in n)$e(e,t,c,n[c],!0,o,a)}else if(void 0!==r&&(i=!0,xe(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(Te(e),n)})),t))for(;c<l;c++)t(e[c],n,a?r:r.call(e[c],c,t(e[c],n)));return i?e:u?t.call(e):l?t(e[0],n):o},Ue=/^-ms-/,qe=/-([a-z])/g,He=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};_.uid=1,_.prototype={cache:function(e){var t=e[this.expando];return t||(t={},He(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[y(t)]=n;else for(r in t)i[y(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][y(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(y):(t=y(t),t=t in r?[t]:t.match(Le)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||Te.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!Te.isEmptyObject(t)}};var ze=new _,We=new _,Ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Xe=/[A-Z]/g;Te.extend({hasData:function(e){return We.hasData(e)||ze.hasData(e)},data:function(e,t,n){return We.access(e,t,n)},removeData:function(e,t){We.remove(e,t)},_data:function(e,t,n){return ze.access(e,t,n)},_removeData:function(e,t){ze.remove(e,t)}}),Te.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=We.get(o),1===o.nodeType&&!ze.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=y(r.slice(5)),w(o,r,i[r])));ze.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){We.set(this,e)}):$e(this,function(t){var n;if(o&&void 0===t){if(n=We.get(o,e),void 0!==n)return n;if(n=w(o,e),void 0!==n)return n}else this.each(function(){We.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){We.remove(this,e)})}}),Te.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ze.get(e,t),n&&(!r||Array.isArray(n)?r=ze.access(e,t,Te.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Te.queue(e,t),r=n.length,i=n.shift(),o=Te._queueHooks(e,t),a=function(){Te.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ze.get(e,n)||ze.access(e,n,{empty:Te.Callbacks("once memory").add(function(){ze.remove(e,[t+"queue",n])})})}}),Te.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Te.queue(this[0],e):void 0===t?this:this.each(function(){var n=Te.queue(this,e,t);Te._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Te.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Te.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Te.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=ze.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Ye=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Je=new RegExp("^(?:([+-])=|)("+Ye+")([a-z%]*)$","i"),Ge=["Top","Right","Bottom","Left"],Ze=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&Te.contains(e.ownerDocument,e)&&"none"===Te.css(e,"display")},Qe=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i},et={};Te.fn.extend({show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ze(this)?Te(this).show():Te(this).hide()})}});var tt=/^(?:checkbox|radio)$/i,nt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,rt=/^$|^module$|\/(?:java|ecma)script/i,it={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};it.optgroup=it.option,it.tbody=it.tfoot=it.colgroup=it.caption=it.thead,it.th=it.td;var ot=/<|&#?\w+;/;!function(){var e=ue.createDocumentFragment(),t=e.appendChild(ue.createElement("div")),n=ue.createElement("input");n.setAttribute("type","radio"),
n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),we.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",we.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var at=ue.documentElement,st=/^key/,ct=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,lt=/^([^.]*)(?:\.(.+)|)/;Te.event={global:{},add:function(e,t,n,r,i){var o,a,s,c,l,u,d,f,h,p,g,m=ze.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),i&&Te.find.matchesSelector(at,i),n.guid||(n.guid=Te.guid++),(c=m.events)||(c=m.events={}),(a=m.handle)||(a=m.handle=function(t){return"undefined"!=typeof Te&&Te.event.triggered!==t.type?Te.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Le)||[""],l=t.length;l--;)s=lt.exec(t[l])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h&&(d=Te.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,d=Te.event.special[h]||{},u=Te.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Te.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=c[h])||(f=c[h]=[],f.delegateCount=0,d.setup&&d.setup.call(e,r,p,a)!==!1||e.addEventListener&&e.addEventListener(h,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,u):f.push(u),Te.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,c,l,u,d,f,h,p,g,m=ze.hasData(e)&&ze.get(e);if(m&&(c=m.events)){for(t=(t||"").match(Le)||[""],l=t.length;l--;)if(s=lt.exec(t[l])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h){for(d=Te.event.special[h]||{},h=(r?d.delegateType:d.bindType)||h,f=c[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)u=f[o],!i&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(e,u));a&&!f.length&&(d.teardown&&d.teardown.call(e,p,m.handle)!==!1||Te.removeEvent(e,h,m.handle),delete c[h])}else for(h in c)Te.event.remove(e,h+t[l],n,r,!0);Te.isEmptyObject(c)&&ze.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=Te.event.fix(e),c=new Array(arguments.length),l=(ze.get(this,"events")||{})[s.type]||[],u=Te.event.special[s.type]||{};for(c[0]=s,t=1;t<arguments.length;t++)c[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,s)!==!1){for(a=Te.event.handlers.call(this,s,l),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,r=((Te.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,c),void 0!==r&&(s.result=r)===!1&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||l.disabled!==!0)){for(o=[],a={},n=0;n<c;n++)r=t[n],i=r.selector+" ",void 0===a[i]&&(a[i]=r.needsContext?Te(i,this).index(l)>-1:Te.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,c<t.length&&s.push({elem:l,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(Te.Event.prototype,e,{enumerable:!0,configurable:!0,get:xe(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Te.expando]?e:new Te.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==j()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===j()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&l(this,"input"))return this.click(),!1},_default:function(e){return l(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Te.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},Te.Event=function(e,t){return this instanceof Te.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?N:A,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Te.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),void(this[Te.expando]=!0)):new Te.Event(e,t)},Te.Event.prototype={constructor:Te.Event,isDefaultPrevented:A,isPropagationStopped:A,isImmediatePropagationStopped:A,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=N,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=N,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=N,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Te.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&st.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ct.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Te.event.addProp),Te.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Te.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||Te.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Te.fn.extend({on:function(e,t,n,r){return D(this,e,t,n,r)},one:function(e,t,n,r){return D(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Te(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=A),this.each(function(){Te.event.remove(this,e,n,t)})}});var ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,dt=/<script|<style|<link/i,ft=/checked\s*(?:[^=]|=\s*.checked.)/i,ht=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Te.extend({htmlPrefilter:function(e){return e.replace(ut,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),c=Te.contains(e.ownerDocument,e);if(!(we.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Te.isXMLDoc(e)))for(a=E(s),o=E(e),r=0,i=o.length;r<i;r++)F(o[r],a[r]);if(t)if(n)for(o=o||E(e),a=a||E(s),r=0,i=o.length;r<i;r++)P(o[r],a[r]);else P(e,s);return a=E(s,"script"),a.length>0&&T(a,!c&&E(e,"script")),s},cleanData:function(e){for(var t,n,r,i=Te.event.special,o=0;void 0!==(n=e[o]);o++)if(He(n)){if(t=n[ze.expando]){if(t.events)for(r in t.events)i[r]?Te.event.remove(n,r):Te.removeEvent(n,r,t.handle);n[ze.expando]=void 0}n[We.expando]&&(n[We.expando]=void 0)}}}),Te.fn.extend({detach:function(e){return L(this,e,!0)},remove:function(e){return L(this,e)},text:function(e){return $e(this,function(e){return void 0===e?Te.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return I(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=O(this,e);t.appendChild(e)}})},prepend:function(){return I(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=O(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return I(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return I(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Te.cleanData(E(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Te.clone(this,e,t)})},html:function(e){return $e(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!dt.test(e)&&!it[(nt.exec(e)||["",""])[1].toLowerCase()]){e=Te.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(Te.cleanData(E(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return I(this,arguments,function(t){var n=this.parentNode;Te.inArray(this,e)<0&&(Te.cleanData(E(this)),n&&n.replaceChild(t,this))},e)}}),Te.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Te.fn[e]=function(e){for(var n,r=[],i=Te(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),Te(i[a])[t](n),pe.apply(r,n.get());return this.pushStack(r)}});var pt=new RegExp("^("+Ye+")(?!px)[a-z%]+$","i"),gt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},mt=new RegExp(Ge.join("|"),"i");!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(c).appendChild(l);var e=n.getComputedStyle(l);r="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",a=36===t(e.right),i=36===t(e.width),l.style.position="absolute",o=36===l.offsetWidth||"absolute",at.removeChild(c),l=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,a,s,c=ue.createElement("div"),l=ue.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",we.clearCloneStyle="content-box"===l.style.backgroundClip,Te.extend(we,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),o}}))}();var vt=/^(none|table(?!-c[ea]).+)/,yt=/^--/,_t={position:"absolute",visibility:"hidden",display:"block"},bt={letterSpacing:"0",fontWeight:"400"},wt=["Webkit","Moz","ms"],xt=ue.createElement("div").style;Te.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=M(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=y(t),c=yt.test(t),l=e.style;return c||(t=U(s)),a=Te.cssHooks[t]||Te.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t]:(o=typeof n,"string"===o&&(i=Je.exec(n))&&i[1]&&(n=x(e,t,i),o="number"),void(null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(Te.cssNumber[s]?"":"px")),we.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(c?l.setProperty(t,n):l[t]=n))))}},css:function(e,t,n,r){var i,o,a,s=y(t),c=yt.test(t);return c||(t=U(s)),a=Te.cssHooks[t]||Te.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=M(e,t,r)),"normal"===i&&t in bt&&(i=bt[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),Te.each(["height","width"],function(e,t){Te.cssHooks[t]={get:function(e,n,r){if(n)return!vt.test(Te.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?z(e,t,r):Qe(e,_t,function(){return z(e,t,r)})},set:function(e,n,r){var i,o=gt(e),a="border-box"===Te.css(e,"boxSizing",!1,o),s=r&&H(e,t,r,a,o);return a&&we.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-H(e,t,"border",!1,o)-.5)),s&&(i=Je.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=Te.css(e,t)),q(e,n,s)}}}),Te.cssHooks.marginLeft=V(we.reliableMarginLeft,function(e,t){if(t)return(parseFloat(M(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),Te.each({margin:"",padding:"",border:"Width"},function(e,t){Te.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Ge[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(Te.cssHooks[e+t].set=q)}),Te.fn.extend({css:function(e,t){return $e(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=gt(e),i=t.length;a<i;a++)o[t[a]]=Te.css(e,t[a],!1,r);return o}return void 0!==n?Te.style(e,t,n):Te.css(e,t)},e,t,arguments.length>1)}}),Te.Tween=W,W.prototype={constructor:W,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||Te.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Te.cssNumber[n]?"":"px")},cur:function(){var e=W.propHooks[this.prop];return e&&e.get?e.get(this):W.propHooks._default.get(this)},run:function(e){var t,n=W.propHooks[this.prop];return this.options.duration?this.pos=t=Te.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Te.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){Te.fx.step[e.prop]?Te.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[Te.cssProps[e.prop]]&&!Te.cssHooks[e.prop]?e.elem[e.prop]=e.now:Te.style(e.elem,e.prop,e.now+e.unit)}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Te.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},Te.fx=W.prototype.init,Te.fx.step={};var Ct,kt,Et=/^(?:toggle|show|hide)$/,Tt=/queueHooks$/;Te.Animation=Te.extend(Q,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return x(n.elem,e,Je.exec(t),n),n}]},tweener:function(e,t){xe(e)?(t=e,e=["*"]):e=e.match(Le);for(var n,r=0,i=e.length;r<i;r++)n=e[r],Q.tweeners[n]=Q.tweeners[n]||[],Q.tweeners[n].unshift(t)},prefilters:[G],prefilter:function(e,t){t?Q.prefilters.unshift(e):Q.prefilters.push(e)}}),Te.speed=function(e,t,n){var r=e&&"object"==typeof e?Te.extend({},e):{complete:n||!n&&t||xe(e)&&e,duration:e,easing:n&&t||t&&!xe(t)&&t};return Te.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in Te.fx.speeds?r.duration=Te.fx.speeds[r.duration]:r.duration=Te.fx.speeds._default),null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){xe(r.old)&&r.old.call(this),r.queue&&Te.dequeue(this,r.queue)},r},Te.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ze).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Te.isEmptyObject(e),o=Te.speed(t,n,r),a=function(){var t=Q(this,Te.extend({},e),o);(i||ze.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Te.timers,a=ze.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&Tt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||Te.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ze.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Te.timers,a=r?r.length:0;for(n.finish=!0,Te.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Te.each(["toggle","show","hide"],function(e,t){var n=Te.fn[t];Te.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Y(t,!0),e,r,i)}}),Te.each({slideDown:Y("show"),slideUp:Y("hide"),slideToggle:Y("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Te.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Te.timers=[],Te.fx.tick=function(){var e,t=0,n=Te.timers;for(Ct=Date.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Te.fx.stop(),Ct=void 0},Te.fx.timer=function(e){Te.timers.push(e),Te.fx.start()},Te.fx.interval=13,Te.fx.start=function(){kt||(kt=!0,K())},Te.fx.stop=function(){kt=null},Te.fx.speeds={slow:600,fast:200,_default:400},Te.fn.delay=function(e,t){return e=Te.fx?Te.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}})},function(){var e=ue.createElement("input"),t=ue.createElement("select"),n=t.appendChild(ue.createElement("option"));e.type="checkbox",we.checkOn=""!==e.value,we.optSelected=n.selected,e=ue.createElement("input"),e.value="t",e.type="radio",we.radioValue="t"===e.value}();var St,Nt=Te.expr.attrHandle;Te.fn.extend({attr:function(e,t){return $e(this,Te.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Te.removeAttr(this,e)})}}),Te.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?Te.prop(e,t,n):(1===o&&Te.isXMLDoc(e)||(i=Te.attrHooks[t.toLowerCase()]||(Te.expr.match.bool.test(t)?St:void 0)),void 0!==n?null===n?void Te.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Te.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!we.radioValue&&"radio"===t&&l(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Le);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),St={set:function(e,t,n){return t===!1?Te.removeAttr(e,n):e.setAttribute(n,n),n}},Te.each(Te.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Nt[t]||Te.find.attr;Nt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=Nt[a],Nt[a]=i,i=null!=n(e,t,r)?a:null,Nt[a]=o),i}});var At=/^(?:input|select|textarea|button)$/i,jt=/^(?:a|area)$/i;Te.fn.extend({prop:function(e,t){return $e(this,Te.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Te.propFix[e]||e]})}}),Te.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&Te.isXMLDoc(e)||(t=Te.propFix[t]||t,i=Te.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=Te.find.attr(e,"tabindex");return t?parseInt(t,10):At.test(e.nodeName)||jt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),we.optSelected||(Te.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Te.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Te.propFix[this.toLowerCase()]=this}),Te.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,c=0;if(xe(e))return this.each(function(t){Te(this).addClass(e.call(this,t,te(this)))});if(t=ne(e),t.length)for(;n=this[c++];)if(i=te(n),r=1===n.nodeType&&" "+ee(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=ee(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,c=0;if(xe(e))return this.each(function(t){Te(this).removeClass(e.call(this,t,te(this)))});if(!arguments.length)return this.attr("class","");if(t=ne(e),t.length)for(;n=this[c++];)if(i=te(n),r=1===n.nodeType&&" "+ee(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=ee(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):xe(e)?this.each(function(n){Te(this).toggleClass(e.call(this,n,te(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=Te(this),a=ne(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=te(this),t&&ze.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":ze.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ee(te(n))+" ").indexOf(t)>-1)return!0;return!1}});var Dt=/\r/g;Te.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=xe(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Te(this).val()):e,null==i?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=Te.map(i,function(e){return null==e?"":e+""})),t=Te.valHooks[this.type]||Te.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=Te.valHooks[i.type]||Te.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(Dt,""):null==n?"":n)):void 0}}),Te.extend({valHooks:{option:{get:function(e){var t=Te.find.attr(e,"value");return null!=t?t:ee(Te.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],c=a?o+1:i.length;for(r=o<0?c:a?o:0;r<c;r++)if(n=i[r],(n.selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!l(n.parentNode,"optgroup"))){if(t=Te(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=Te.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=Te.inArray(Te.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Te.each(["radio","checkbox"],function(){Te.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=Te.inArray(Te(e).val(),t)>-1}},we.checkOn||(Te.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),we.focusin="onfocusin"in n;var Ot=/^(?:focusinfocus|focusoutblur)$/,Rt=function(e){e.stopPropagation()};Te.extend(Te.event,{trigger:function(e,t,r,i){var o,a,s,c,l,u,d,f,h=[r||ue],p=ye.call(e,"type")?e.type:e,g=ye.call(e,"namespace")?e.namespace.split("."):[];if(a=f=s=r=r||ue,3!==r.nodeType&&8!==r.nodeType&&!Ot.test(p+Te.event.triggered)&&(p.indexOf(".")>-1&&(g=p.split("."),p=g.shift(),g.sort()),l=p.indexOf(":")<0&&"on"+p,e=e[Te.expando]?e:new Te.Event(p,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:Te.makeArray(t,[e]),d=Te.event.special[p]||{},i||!d.trigger||d.trigger.apply(r,t)!==!1)){if(!i&&!d.noBubble&&!Ce(r)){for(c=d.delegateType||p,Ot.test(c+p)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(r.ownerDocument||ue)&&h.push(s.defaultView||s.parentWindow||n)}for(o=0;(a=h[o++])&&!e.isPropagationStopped();)f=a,e.type=o>1?c:d.bindType||p,u=(ze.get(a,"events")||{})[e.type]&&ze.get(a,"handle"),u&&u.apply(a,t),u=l&&a[l],u&&u.apply&&He(a)&&(e.result=u.apply(a,t),e.result===!1&&e.preventDefault());return e.type=p,i||e.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),t)!==!1||!He(r)||l&&xe(r[p])&&!Ce(r)&&(s=r[l],s&&(r[l]=null),Te.event.triggered=p,e.isPropagationStopped()&&f.addEventListener(p,Rt),r[p](),e.isPropagationStopped()&&f.removeEventListener(p,Rt),Te.event.triggered=void 0,s&&(r[l]=s)),e.result}},simulate:function(e,t,n){var r=Te.extend(new Te.Event,n,{type:e,isSimulated:!0});Te.event.trigger(r,null,t)}}),Te.fn.extend({trigger:function(e,t){return this.each(function(){Te.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Te.event.trigger(e,t,n,!0)}}),we.focusin||Te.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Te.event.simulate(t,e.target,Te.event.fix(e))};Te.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ze.access(r,t);i||r.addEventListener(e,n,!0),ze.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ze.access(r,t)-1;i?ze.access(r,t,i):(r.removeEventListener(e,n,!0),ze.remove(r,t))}}});var Bt=n.location,Pt=Date.now(),Ft=/\?/;Te.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||Te.error("Invalid XML: "+e),t};var It=/\[\]$/,Lt=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,Vt=/^(?:input|select|textarea|keygen)/i;Te.param=function(e,t){var n,r=[],i=function(e,t){var n=xe(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!Te.isPlainObject(e))Te.each(e,function(){i(this.name,this.value)});else for(n in e)re(n,e[n],t,i);return r.join("&")},Te.fn.extend({serialize:function(){return Te.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Te.prop(this,"elements");return e?Te.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Te(this).is(":disabled")&&Vt.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!tt.test(e))}).map(function(e,t){var n=Te(this).val();return null==n?null:Array.isArray(n)?Te.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}});var $t=/%20/g,Ut=/#.*$/,qt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wt=/^(?:GET|HEAD)$/,Kt=/^\/\//,Xt={},Yt={},Jt="*/".concat("*"),Gt=ue.createElement("a");Gt.href=Bt.href,Te.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Bt.href,type:"GET",isLocal:zt.test(Bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Te.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ae(ae(e,Te.ajaxSettings),t):ae(Te.ajaxSettings,e)},ajaxPrefilter:ie(Xt),ajaxTransport:ie(Yt),ajax:function(e,t){function r(e,t,r,s){var l,f,h,b,w,x=t;u||(u=!0,c&&n.clearTimeout(c),i=void 0,a=s||"",C.readyState=e>0?4:0,l=e>=200&&e<300||304===e,r&&(b=se(p,C,r)),b=ce(p,b,C,l),l?(p.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(Te.lastModified[o]=w),w=C.getResponseHeader("etag"),w&&(Te.etag[o]=w)),204===e||"HEAD"===p.type?x="nocontent":304===e?x="notmodified":(x=b.state,f=b.data,h=b.error,l=!h)):(h=x,!e&&x||(x="error",e<0&&(e=0))),C.status=e,C.statusText=(t||x)+"",l?v.resolveWith(g,[f,x,C]):v.rejectWith(g,[C,x,h]),C.statusCode(_),_=void 0,d&&m.trigger(l?"ajaxSuccess":"ajaxError",[C,p,l?f:h]),y.fireWith(g,[C,x]),d&&(m.trigger("ajaxComplete",[C,p]),--Te.active||Te.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o,a,s,c,l,u,d,f,h,p=Te.ajaxSetup({},t),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?Te(g):Te.event,v=Te.Deferred(),y=Te.Callbacks("once memory"),_=p.statusCode||{},b={},w={},x="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Ht.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)C.always(e[C.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||x;return i&&i.abort(t),r(0,t),this}};if(v.promise(C),p.url=((e||p.url||Bt.href)+"").replace(Kt,Bt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Le)||[""],null==p.crossDomain){l=ue.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Gt.protocol+"//"+Gt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=Te.param(p.data,p.traditional)),oe(Xt,p,t,C),u)return C;d=Te.event&&p.global,d&&0===Te.active++&&Te.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Wt.test(p.type),o=p.url.replace(Ut,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace($t,"+")):(h=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Ft.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(o=o.replace(qt,"$1"),h=(Ft.test(o)?"&":"?")+"_="+Pt++ +h),p.url=o+h),p.ifModified&&(Te.lastModified[o]&&C.setRequestHeader("If-Modified-Since",Te.lastModified[o]),Te.etag[o]&&C.setRequestHeader("If-None-Match",Te.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||t.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Jt+"; q=0.01":""):p.accepts["*"]);for(f in p.headers)C.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(p.beforeSend.call(g,C,p)===!1||u))return C.abort();if(x="abort",y.add(p.complete),C.done(p.success),C.fail(p.error),i=oe(Yt,p,t,C)){if(C.readyState=1,d&&m.trigger("ajaxSend",[C,p]),u)return C;p.async&&p.timeout>0&&(c=n.setTimeout(function(){C.abort("timeout")},p.timeout));try{u=!1,i.send(b,r)}catch(e){if(u)throw e;r(-1,e)}}else r(-1,"No Transport");return C},getJSON:function(e,t,n){return Te.get(e,t,n,"json")},getScript:function(e,t){return Te.get(e,void 0,t,"script")}}),Te.each(["get","post"],function(e,t){Te[t]=function(e,n,r,i){return xe(n)&&(i=i||r,r=n,n=void 0),Te.ajax(Te.extend({url:e,type:t,dataType:i,data:n,success:r},Te.isPlainObject(e)&&e))}}),Te._evalUrl=function(e){return Te.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},Te.fn.extend({wrapAll:function(e){var t;return this[0]&&(xe(e)&&(e=e.call(this[0])),t=Te(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return xe(e)?this.each(function(t){Te(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Te(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=xe(e);return this.each(function(n){Te(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){Te(this).replaceWith(this.childNodes)}),this}}),Te.expr.pseudos.hidden=function(e){return!Te.expr.pseudos.visible(e)},Te.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Te.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Zt={0:200,1223:204},Qt=Te.ajaxSettings.xhr();we.cors=!!Qt&&"withCredentials"in Qt,we.ajax=Qt=!!Qt,Te.ajaxTransport(function(e){var t,r;if(we.cors||Qt&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),
e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Zt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),Te.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Te.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Te.globalEval(e),e}}}),Te.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Te.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Te("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),ue.head.appendChild(t[0])},abort:function(){n&&n()}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;Te.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||Te.expando+"_"+Pt++;return this[e]=!0,e}}),Te.ajaxPrefilter("json jsonp",function(e,t,r){var i,o,a,s=e.jsonp!==!1&&(tn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=xe(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(tn,"$1"+i):e.jsonp!==!1&&(e.url+=(Ft.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||Te.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?Te(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,en.push(i)),a&&xe(o)&&o(a[0]),a=o=void 0}),"script"}),we.createHTMLDocument=function(){var e=ue.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),Te.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,o;return t||(we.createHTMLDocument?(t=ue.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=ue.location.href,t.head.appendChild(r)):t=ue),i=Oe.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=S([e],t,o),o&&o.length&&Te(o).remove(),Te.merge([],i.childNodes))},Te.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=ee(e.slice(s)),e=e.slice(0,s)),xe(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&Te.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?Te("<div>").append(Te.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},Te.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Te.fn[t]=function(e){return this.on(t,e)}}),Te.expr.pseudos.animated=function(e){return Te.grep(Te.timers,function(t){return e===t.elem}).length},Te.offset={setOffset:function(e,t,n){var r,i,o,a,s,c,l,u=Te.css(e,"position"),d=Te(e),f={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=Te.css(e,"top"),c=Te.css(e,"left"),l=("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1,l?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(c)||0),xe(t)&&(t=t.call(e,n,Te.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):d.css(f)}},Te.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Te.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===Te.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===Te.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&(i=Te(e).offset(),i.top+=Te.css(e,"borderTopWidth",!0),i.left+=Te.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-Te.css(r,"marginTop",!0),left:t.left-i.left-Te.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===Te.css(e,"position");)e=e.offsetParent;return e||at})}}),Te.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;Te.fn[e]=function(r){return $e(this,function(e,r,i){var o;return Ce(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),Te.each(["top","left"],function(e,t){Te.cssHooks[t]=V(we.pixelPosition,function(e,n){if(n)return n=M(e,t),pt.test(n)?Te(e).position()[t]+"px":n})}),Te.each({Height:"height",Width:"width"},function(e,t){Te.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Te.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return $e(this,function(t,n,i){var o;return Ce(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?Te.css(t,n,s):Te.style(t,n,i,s)},t,a?i:void 0,a)}})}),Te.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){Te.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Te.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Te.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),Te.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),xe(e))return r=fe.call(arguments,2),i=function(){return e.apply(t||this,r.concat(fe.call(arguments)))},i.guid=e.guid=e.guid||Te.guid++,i},Te.holdReady=function(e){e?Te.readyWait++:Te.ready(!0)},Te.isArray=Array.isArray,Te.parseJSON=JSON.parse,Te.nodeName=l,Te.isFunction=xe,Te.isWindow=Ce,Te.camelCase=y,Te.type=s,Te.now=Date.now,Te.isNumeric=function(e){var t=Te.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},r=[],i=function(){return Te}.apply(t,r),!(void 0!==i&&(e.exports=i));var nn=n.jQuery,rn=n.$;return Te.noConflict=function(e){return n.$===Te&&(n.$=rn),e&&n.jQuery===Te&&(n.jQuery=nn),Te},o||(n.jQuery=n.$=Te),Te})},8:function(e,t,n){var r,i;(function(o){!function(a){var s="object"==typeof self&&self.self===self&&self||"object"==typeof o&&o.global===o&&o;r=[n(3),n(5),t],i=function(e,t,n){s.Backbone=a(s,n,e,t)}.apply(t,r),!(void 0!==i&&(e.exports=i))}(function(e,t,n,r){var i=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],c(e,this),i)};case 4:return function(e,i,o){return n[t](this[r],c(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}},s=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=a(t,i,r))})},c=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?l(e):n.isString(e)?function(t){return t.get(e)}:e},l=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},u=t.Events={},d=/\s+/,f=function(e,t,r,i,o){var a,s=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(a=n.keys(r);s<a.length;s++)t=f(e,t,a[s],r[a[s]],o)}else if(r&&d.test(r))for(a=r.split(d);s<a.length;s++)t=e(t,a[s],i,o);else t=e(t,r,i,o);return t};u.on=function(e,t,n){return h(this,e,t,n)};var h=function(e,t,n,r,i){if(e._events=f(p,e._events||{},t,n,{context:r,ctx:e,listening:i}),i){var o=e._listeners||(e._listeners={});o[i.id]=i}return e};u.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[i];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[i]={obj:e,objId:i,id:s,listeningTo:o,count:0}}return h(e,t,r,this,a),this};var p=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),o=r.context,a=r.ctx,s=r.listening;s&&s.count++,i.push({callback:n,context:o,ctx:o||a,listening:s})}return e};u.off=function(e,t,n){return this._events?(this._events=f(g,this._events,e,t,{context:n,listeners:this._listeners}),this):this},u.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var o=e?[e._listenId]:n.keys(i),a=0;a<o.length;a++){var s=i[o[a]];if(!s)break;s.obj.off(t,r,this)}return this};var g=function(e,t,r,i){if(e){var o,a=0,s=i.context,c=i.listeners;if(t||r||s){for(var l=t?[t]:n.keys(e);a<l.length;a++){t=l[a];var u=e[t];if(!u)break;for(var d=[],f=0;f<u.length;f++){var h=u[f];r&&r!==h.callback&&r!==h.callback._callback||s&&s!==h.context?d.push(h):(o=h.listening,o&&0===--o.count&&(delete c[o.id],delete o.listeningTo[o.objId]))}d.length?e[t]=d:delete e[t]}return e}for(var p=n.keys(c);a<p.length;a++)o=c[p[a]],delete c[o.id],delete o.listeningTo[o.objId]}};u.once=function(e,t,r){var i=f(m,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)},u.listenToOnce=function(e,t,r){var i=f(m,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var m=function(e,t,r,i){if(r){var o=e[t]=n.once(function(){i(t,o),r.apply(this,arguments)});o._callback=r}return e};u.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return f(v,this._events,e,void 0,n),this};var v=function(e,t,n,r){if(e){var i=e[t],o=e.all;i&&o&&(o=o.slice()),i&&y(i,r),o&&y(o,[t].concat(r))}return e},y=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};u.bind=u.on,u.unbind=u.off,n.extend(t,u);var _=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(_.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,a=r.silent,s=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,u=this.changed,d=this._previousAttributes;for(var f in i)t=i[f],n.isEqual(l[f],t)||s.push(f),n.isEqual(d[f],t)?delete u[f]:u[f]=t,o?delete l[f]:l[f]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=r);for(var h=0;h<s.length;h++)this.trigger("change:"+s[h],this,l[s[h]],r)}if(c)return this;if(!a)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var o=e[i];n.isEqual(t[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;return!!t.set(i,e)&&(r&&r.call(e.context,t,n,e),void t.trigger("sync",t,n,e))},$(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0,parse:!0},r);var o=r.wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var a=this,s=r.success,c=this.attributes;r.success=function(e){a.attributes=c;var t=r.parse?a.parse(e,r):e;return o&&(t=n.extend({},i,t)),!(t&&!a.set(t,r))&&(s&&s.call(r.context,a,e,r),void a.trigger("sync",a,e,r))},$(this,r),i&&o&&(this.attributes=n.extend({},c,i));var l=this.isNew()?"create":r.patch?"patch":"update";"patch"!==l||r.attrs||(r.attrs=i);var u=this.sync(l,this,r);return this.attributes=c,u},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&o(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var a=!1;return this.isNew()?n.defer(e.success):($(this,e),a=this.sync("delete",this,e)),i||o(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||V();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s(_,b,"attributes");var w=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},x={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},k=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r,i=Array(e.length-n),o=t.length;for(r=0;r<i.length;r++)i[r]=e[r+n];for(r=0;r<o;r++)e[r+n]=t[r];for(r=0;r<i.length;r++)e[r+o+n]=i[r]};n.extend(w.prototype,u,{model:_,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,C))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(null!=e){t=n.extend({},x,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,a,s=[],c=[],l=[],u=[],d={},f=t.add,h=t.merge,p=t.remove,g=!1,m=this.comparator&&null==i&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null;for(a=0;a<e.length;a++){o=e[a];var y=this.get(o);if(y){if(h&&o!==y){var _=this._isModel(o)?o.attributes:o;t.parse&&(_=y.parse(_,t)),y.set(_,t),l.push(y),m&&!g&&(g=y.hasChanged(v))}d[y.cid]||(d[y.cid]=!0,s.push(y)),e[a]=y}else f&&(o=e[a]=this._prepareModel(o,t),o&&(c.push(o),this._addReference(o,t),d[o.cid]=!0,s.push(o)))}if(p){for(a=0;a<this.length;a++)o=this.models[a],d[o.cid]||u.push(o);u.length&&this._removeModels(u,t)}var b=!1,w=!m&&f&&p;if(s.length&&w?(b=this.length!==s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,k(this.models,s,0),this.length=this.models.length):c.length&&(m&&(g=!0),k(this.models,c,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!t.silent){for(a=0;a<c.length;a++)null!=i&&(t.index=i+a),o=c[a],o.trigger("add",o,this,t);(g||b)&&this.trigger("sort",this,t),(c.length||u.length||l.length)&&(t.changes={added:c,removed:u,merged:l},this.trigger("update",this,t))}return r?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===r||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},$(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var r=t.wait;if(e=this._prepareModel(e,t),!e)return!1;r||this.add(e,t);var i=this,o=t.success;return t.success=function(e,t,n){r&&i.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var a=this.modelId(i.attributes);null!=a&&delete this._byId[a],t.silent||(t.index=o,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return n},_isModel:function(e){return e instanceof _},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}});var E={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};s(w,E,"models");var T=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,N)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,N=["model","collection","el","id","attributes","className","tagName","events"];n.extend(T.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(S);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var o=A[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||V()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1);var c=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,c&&c.call(i.context,e,t,n)};var l=i.xhr=t.ajax(n.extend(a,i));return r.trigger("request",r,l,i),l};var A={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var j=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,R=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(j.prototype,u,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,function(n){var a=o._extractParameters(e,n);o.execute(i,a,r)!==!1&&(o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),t.history.trigger("route",o,r,a))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(B,"\\$&").replace(D,"(?:$1)?").replace(O,function(e,t){return t?e:"([^/?]+)"}).replace(R,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var P=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,L=/#.*$/;P.started=!1,n.extend(P.prototype,u,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(F,"")},start:function(e){if(P.started)throw new Error("Backbone.history has already been started");if(P.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(I,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!P.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(L,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new P;var M=function(e,t){var r,i=this;return r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t),r.prototype=n.create(i.prototype,e),r.prototype.constructor=r,r.__super__=i.prototype,r};_.extend=w.extend=j.extend=T.extend=P.extend=M;var V=function(){throw new Error('A "url" property or function must be specified')},$=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t})}).call(t,function(){return this}())},11:function(e,t,n){!function(t){e.exports=t(n(8),n(3))}(function(e,t){return e.Validation=function(e){"use strict";var t={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},n={formatLabel:function(e,n){return c[t.labelFormatter](e,n)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})}},r=function(t,n,i){return n=n||{},i=i||"",e.each(t,function(o,a){t.hasOwnProperty(a)&&(o&&e.isArray(o)?e.forEach(o,function(e,t){r(e,n,i+a+"."+t+"."),n[i+a+"."+t]=e}):o&&"object"==typeof o&&o.constructor===Object&&r(o,n,i+a+"."),n[i+a]=o)}),n},i=function(){var i=function(t,n){return n=n||e.keys(e.result(t,"validation")||{}),e.reduce(n,function(e,t){return e[t]=void 0,e},{})},a=function(t,n){var r=t.attributes;if(e.isFunction(r)?r=r(n):e.isString(r)&&e.isFunction(l[r])&&(r=l[r](n)),e.isArray(r))return r},s=function(t,n){var r=t.validation?e.result(t,"validation")[n]||{}:{};return(e.isFunction(r)||e.isString(r))&&(r={fn:r}),e.isArray(r)||(r=[r]),e.reduce(r,function(t,n){return e.each(e.without(e.keys(n),"msg"),function(e){t.push({fn:u[e],val:n[e],msg:n.msg})}),t},[])},c=function(t,r,i,o){return e.reduce(s(t,r),function(a,s){var c=e.extend({},n,u),l=s.fn.call(c,i,r,s.val,t,o);return l!==!1&&a!==!1&&(l&&!a?e.result(s,"msg")||l:a)},"")},d=function(t,n,r){var i,o={},a=!0,s=e.clone(n);return e.each(r,function(e,n){i=c(t,n,e,s),i&&(o[n]=i,a=!1)}),{invalidAttrs:o,isValid:a}},f=function(t,n){return{preValidate:function(t,n){var r,i=this,o={};return e.isObject(t)?(e.each(t,function(e,t){r=i.preValidate(t,e),r&&(o[t]=r)}),e.isEmpty(o)?void 0:o):c(this,t,n,e.extend({},this.attributes))},isValid:function(i){var o,s,l,u;return i=i||a(n,t),e.isString(i)?s=[i]:e.isArray(i)&&(s=i),s&&(o=r(this.attributes),e.each(this.associatedViews,function(t){e.each(s,function(r){l=c(this,r,o[r],e.extend({},this.attributes)),l?(n.invalid(t,r,l,n.selector),u=u||{},u[r]=l):n.valid(t,r,n.selector)},this)},this)),i===!0&&(u=this.validate()),u&&this.trigger("invalid",this,u,{validationError:u}),s?!u:!this.validation||this._isValid},validate:function(o,s){var c=this,l=!o,u=e.extend({},n,s),f=i(c,a(n,t)),h=e.extend({},f,c.attributes,o),p=r(h),g=o?r(o):p,m=d(c,h,e.pick(p,e.keys(f)));
if(c._isValid=m.isValid,e.each(c.associatedViews,function(t){e.each(f,function(e,n){var r=m.invalidAttrs.hasOwnProperty(n),i=g.hasOwnProperty(n);r||u.valid(t,n,u.selector),r&&(i||l)&&u.invalid(t,n,m.invalidAttrs[n],u.selector)})}),e.defer(function(){c.trigger("validated",c._isValid,c,m.invalidAttrs),c.trigger("validated:"+(c._isValid?"valid":"invalid"),c,m.invalidAttrs)}),!u.forceUpdate&&e.intersection(e.keys(m.invalidAttrs),e.keys(g)).length>0)return m.invalidAttrs}}},h=function(t,n,r){n.associatedViews?n.associatedViews.push(t):n.associatedViews=[t],e.extend(n,f(t,r))},p=function(t,n){n&&t.associatedViews&&t.associatedViews.length>1?t.associatedViews=e.without(t.associatedViews,n):(delete t.validate,delete t.preValidate,delete t.isValid,delete t.associatedViews)},g=function(e){h(this.view,e,this.options)},m=function(e){p(e)};return{version:"0.11.3",configure:function(n){e.extend(t,n)},bind:function(n,r){r=e.extend({},t,o,r);var i=r.model||n.model,a=r.collection||n.collection;if("undefined"==typeof i&&"undefined"==typeof a)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";i?h(n,i,r):a&&(a.each(function(e){h(n,e,r)}),a.bind("add",g,{view:n,options:r}),a.bind("remove",m))},unbind:function(t,n){n=e.extend({},n);var r=n.model||t.model,i=n.collection||t.collection;r?p(r,t):i&&(i.each(function(e){p(e,t)}),i.unbind("add",g),i.unbind("remove",m))},mixin:f(null,t)}}(),o=i.callbacks={valid:function(e,t,n){e.$("["+n+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,n,r){e.$("["+r+'~="'+t+'"]').addClass("invalid").attr("data-error",n)}},a=i.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},s=i.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},c=i.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace(/_/g," ")},label:function(e,t){return t.labels&&t.labels[e]||c.sentenceCase(e,t)}},l=i.attributeLoaders={inputNames:function(e){var t=[];return e&&e.$("form [name]").each(function(){/^(?:input|select|textarea)$/i.test(this.nodeName)&&this.name&&"submit"!==this.type&&t.indexOf(this.name)===-1&&t.push(this.name)}),t}},u=i.validators=function(){var t=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,n=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(n,"")},n=function(t){return e.isNumber(t)||e.isString(t)&&t.match(a.number)},r=function(n){return!(e.isNull(n)||e.isUndefined(n)||e.isString(n)&&""===t(n)||e.isArray(n)&&e.isEmpty(n))};return{fn:function(t,n,r,i,o){return e.isString(r)&&(r=i[r]),r.call(i,t,n,o)},required:function(t,n,i,o,a){var c=e.isFunction(i)?i.call(o,t,n,a):i;return!(!c&&!r(t))&&(c&&!r(t)?this.format(s.required,this.formatLabel(n,o)):void 0)},acceptance:function(t,n,r,i){if("true"!==t&&(!e.isBoolean(t)||t===!1))return this.format(s.acceptance,this.formatLabel(n,i))},min:function(e,t,r,i){if(!n(e)||e<r)return this.format(s.min,this.formatLabel(t,i),r)},max:function(e,t,r,i){if(!n(e)||e>r)return this.format(s.max,this.formatLabel(t,i),r)},range:function(e,t,r,i){if(!n(e)||e<r[0]||e>r[1])return this.format(s.range,this.formatLabel(t,i),r[0],r[1])},length:function(t,n,r,i){if(!e.isString(t)||t.length!==r)return this.format(s.length,this.formatLabel(n,i),r)},minLength:function(t,n,r,i){if(!e.isString(t)||t.length<r)return this.format(s.minLength,this.formatLabel(n,i),r)},maxLength:function(t,n,r,i){if(!e.isString(t)||t.length>r)return this.format(s.maxLength,this.formatLabel(n,i),r)},rangeLength:function(t,n,r,i){if(!e.isString(t)||t.length<r[0]||t.length>r[1])return this.format(s.rangeLength,this.formatLabel(n,i),r[0],r[1])},oneOf:function(t,n,r,i){if(!e.include(r,t))return this.format(s.oneOf,this.formatLabel(n,i),r.join(", "))},equalTo:function(e,t,n,r,i){if(e!==i[n])return this.format(s.equalTo,this.formatLabel(t,r),this.formatLabel(n,r))},pattern:function(e,t,n,i){if(!r(e)||!e.toString().match(a[n]||n))return this.format(s[n]||s.inlinePattern,this.formatLabel(t,i),n)}}}();return e.each(u,function(t,r){u[r]=e.bind(u[r],e.extend({},n,u))}),i}(t),e.Validation})},38:function(e,t,n){n(153),n(144),n(145),n(146),n(147),n(62),n(148),n(152),n(149),n(150),n(151),n(143)},46:function(e,t,n){var r,i,o;!function(a){"use strict";i=[n(5)],r=a,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}(function(e,t){"use strict";/*!
	 * jsTree 3.3.5
	 * http://jstree.com/
	 *
	 * Copyright (c) 2014 Ivan Bozhanov (http://vakata.com)
	 *
	 * Licensed same as jquery - under the terms of the MIT License
	 *   http://www.opensource.org/licenses/mit-license.php
	 */
/*!
	 * if using jslint please allow for the jQuery global and use following options:
	 * jslint: loopfunc: true, browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
	 */
if(!e.jstree){var n=0,r=!1,i=!1,o=!1,a=[],s=e("script:last").attr("src"),c=window.document;e.jstree={version:"3.3.5",defaults:{plugins:[]},plugins:{},path:s&&s.indexOf("/")!==-1?s.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,r){var i=new e.jstree.core(++n),o=r;return r=e.extend(!0,{},e.jstree.defaults,r),o&&o.plugins&&(r.plugins=o.plugins),e.each(r.plugins,function(e,t){"core"!==e&&(i=i.plugin(t,r[t]))}),e(t).data("jstree",i),i.init(t,r),i},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(c).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var n=null,r=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!r||!r.length)try{r=e(t)}catch(e){}if(!r||!r.length)try{r=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return r&&r.length&&(r=r.closest(".jstree")).length&&(r=r.data("jstree"))?n=r:e(".jstree").each(function(){var r=e(this).data("jstree");if(r&&r._model.data[t])return n=r,!1}),n},e.fn.jstree=function(n){var r="string"==typeof n,i=Array.prototype.slice.call(arguments,1),o=null;return!(n===!0&&!this.length)&&(this.each(function(){var a=e.jstree.reference(this),s=r&&a?a[n]:null;if(o=r&&s?s.apply(a,i):null,a||r||n!==t&&!e.isPlainObject(n)||e.jstree.create(this,n),(a&&!r||n===!0)&&(o=a||!1),null!==o&&o!==t)return!1}),null!==o&&o!==t?o:this)},e.expr.pseudos.jstree=e.expr.createPseudo(function(n){return function(n){return e(n).hasClass("jstree")&&e(n).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,keyboard:{"ctrl-space":function(t){t.type="click",e(t.currentTarget).trigger(t)},enter:function(t){t.type="click",e(t.currentTarget).trigger(t)},left:function(t){if(t.preventDefault(),this.is_open(t.currentTarget))this.close_node(t.currentTarget);else{var n=this.get_parent(t.currentTarget);n&&n.id!==e.jstree.root&&this.get_node(n,!0).children(".jstree-anchor").focus()}},up:function(e){e.preventDefault();var t=this.get_prev_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},right:function(t){if(t.preventDefault(),this.is_closed(t.currentTarget))this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()});else if(this.is_open(t.currentTarget)){var n=this.get_node(t.currentTarget,!0).children(".jstree-children")[0];n&&e(this._firstChild(n)).children(".jstree-anchor").focus()}},down:function(e){e.preventDefault();var t=this.get_next_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},"*":function(e){this.open_all()},home:function(t){t.preventDefault();var n=this._firstChild(this.get_container_ul()[0]);n&&e(n).children(".jstree-anchor").filter(":visible").focus()},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}}},e.jstree.core.prototype={plugin:function(t,n){var r=e.jstree.plugins[t];return r?(this._data[t]={},r.prototype=this,new r(n,this)):this},init:function(t,n){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=n,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,n=c.createElement("LI");return n.setAttribute("role","treeitem"),e=c.createElement("I"),e.className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),n.appendChild(e),e=c.createElement("A"),e.className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),t=c.createElement("I"),t.className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),n.appendChild(e),e=t=null,n},_kbevent_to_func:function(e){var t={8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"},n=[];e.ctrlKey&&n.push("ctrl"),e.altKey&&n.push("alt"),e.shiftKey&&n.push("shift"),n.push(t[e.which]||e.which),n=n.sort().join("-").toLowerCase();var r,i,o=this.settings.core.keyboard;for(r in o)if(o.hasOwnProperty(r)&&(i=r,"-"!==i&&"+"!==i&&(i=i.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS"),i=i.split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase()),i===n))return o[r];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",n=null,r=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(c.selection&&c.selection.empty)c.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),r=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){return!(!e.target.tagName||"input"!==e.target.tagName.toLowerCase())||void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==c.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var t=this._kbevent_to_func(e);if(t){var n=t.call(this,e);if(n===!1||n===!0)return n}},this)).on("load_node.jstree",e.proxy(function(t,n){n.status&&(n.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,n,r=[];for(t=0,n=this._data.core.selected.length;t<n;t++)r=r.concat(this._model.data[this._data.core.selected[t]].parents);for(r=e.vakata.array_unique(r),t=0,n=r.length;t<n;t++)this.open_node(r[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(r){if(r.target.tagName&&"input"===r.target.tagName.toLowerCase())return!0;n&&clearTimeout(n),n=setTimeout(function(){t=""},500);var i=String.fromCharCode(r.which).toLowerCase(),o=this.element.find(".jstree-anchor").filter(":visible"),a=o.index(c.activeElement)||0,s=!1;if(t+=i,t.length>1){if(o.slice(a).each(e.proxy(function(n,r){if(0===e(r).text().toLowerCase().indexOf(t))return e(r).focus(),s=!0,!1},this)),s)return;if(o.slice(0,a).each(e.proxy(function(n,r){if(0===e(r).text().toLowerCase().indexOf(t))return e(r).focus(),s=!0,!1},this)),s)return}if(new RegExp("^"+i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(o.slice(a+1).each(e.proxy(function(t,n){if(e(n).text().toLowerCase().charAt(0)===i)return e(n).focus(),s=!0,!1},this)),s)return;if(o.slice(0,a+1).each(e.proxy(function(t,n){if(e(n).text().toLowerCase().charAt(0)===i)return e(n).focus(),s=!0,!1},this)),s)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var n=this.get_node(t.currentTarget);n&&n.id&&(this._data.core.focused=n.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-r>500&&!this._data.core.focused&&this.settings.core.restore_focus){r=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(c).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,n){t&&t.id&&(t=t.id);var r;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(r=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[r.closest(".jstree-node").attr("id")])t=this._model.data[r.closest(".jstree-node").attr("id")];else if((r=e(t,this.element)).length&&this._model.data[r.closest(".jstree-node").attr("id")])t=this._model.data[r.closest(".jstree-node").attr("id")];else{if(!(r=e(t,this.element)).length||!r.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return n&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(t,n,r){if(t=t.parents?t:this.get_node(t),!t||t.id===e.jstree.root||!t.parents)return!1;var i,o,a=[];for(a.push(r?t.id:t.text),i=0,o=t.parents.length;i<o;i++)a.push(r?t.parents[i]:this.get_text(t.parents[i]));return a=a.reverse().slice(1),n?a.join(n):a},get_next_dom:function(t,n){var r;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(r=this._firstChild(this.get_container_ul()[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do r=this._nextSibling(r);while(r&&0===r.offsetHeight);return!!r&&e(r)}if(t.hasClass("jstree-open")){for(r=this._firstChild(t.children(".jstree-children")[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);if(null!==r)return e(r)}r=t[0];do r=this._nextSibling(r);while(r&&0===r.offsetHeight);return null!==r?e(r):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,n){var r;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(r=this.get_container_ul()[0].lastChild;r&&0===r.offsetHeight;)r=this._previousSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do r=this._previousSibling(r);while(r&&0===r.offsetHeight);return!!r&&e(r)}r=t[0];do r=this._previousSibling(r);while(r&&0===r.offsetHeight);if(null!==r){for(t=e(r);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return r=t[0].parentNode.parentNode,!(!r||!r.className||r.className.indexOf("jstree-node")===-1)&&e(r)},get_parent:function(t){return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&t.parent},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return e=this.get_node(e),e&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return e=this.get_node(e),e&&e.state.loaded},is_loading:function(e){return e=this.get_node(e),e&&e.state&&e.state.loading},is_open:function(e){return e=this.get_node(e),e&&e.state.opened},is_closed:function(e){return e=this.get_node(e),e&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,n){var r,i,o,a,s;if(e.isArray(t))return this._load_nodes(t.slice(),n),!0;if(t=this.get_node(t),!t)return n&&n.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,o=0,a=t.parents.length;o<a;o++)this._model.data[t.parents[o]].children_d=e.vakata.array_filter(this._model.data[t.parents[o]].children_d,function(n){return e.inArray(n,t.children_d)===-1});for(r=0,i=t.children_d.length;r<i;r++)this._model.data[t.children_d[r]].state.selected&&(s=!0),delete this._model.data[t.children_d[r]];s&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(n){return e.inArray(n,t.children_d)===-1})),t.children=[],t.children_d=[],s&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var r=this.get_node(t,!0),i=0,o=0,a=this._model.data,s=!1;for(i=0,o=t.children.length;i<o;i++)if(a[t.children[i]]&&!a[t.children[i]].state.hidden){s=!0;break}t.state.loaded&&r&&r.length&&(r.removeClass("jstree-closed jstree-open jstree-leaf"),s?"#"!==t.id&&r.addClass(t.state.opened?"jstree-open":"jstree-closed"):r.addClass("jstree-leaf")),r.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),n&&n.call(this,t,e)},this)),!0},_load_nodes:function(e,t,n,r){var i,o,a=!0,s=function(){this._load_nodes(e,t,!0)},c=this._model.data,l=[];for(i=0,o=e.length;i<o;i++)c[e[i]]&&(!c[e[i]].state.loaded&&!c[e[i]].state.failed||!n&&r)&&(this.is_loading(e[i])||this.load_node(e[i],s),a=!1);if(a){for(i=0,o=e.length;i<o;i++)c[e[i]]&&c[e[i]].state.loaded&&l.push(e[i]);t&&!t.done&&(t.call(this,l),t.done=!0)}},load_all:function(t,n){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var r,i,o=[],a=this._model.data,s=a[t.id].children_d;for(t.state&&!t.state.loaded&&o.push(t.id),r=0,i=s.length;r<i;r++)a[s[r]]&&a[s[r]].state&&!a[s[r]].state.loaded&&o.push(s[r]);o.length?this._load_nodes(o,function(){this.load_all(t,n)}):(n&&n.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,n){var r,i=this.settings.core.data,o=function(){return 3!==this.nodeType&&8!==this.nodeType};return i?e.isFunction(i)?i.call(this,t,e.proxy(function(r){r===!1?n.call(this,!1):this["string"==typeof r?"_append_html_data":"_append_json_data"](t,"string"==typeof r?e(e.parseHTML(r)).filter(o):r,function(e){n.call(this,e)})},this)):"object"==typeof i?i.url?(i=e.extend(!0,{},i),e.isFunction(i.url)&&(i.url=i.url.call(this,t)),e.isFunction(i.data)&&(i.data=i.data.call(this,t)),e.ajax(i).done(e.proxy(function(r,i,a){var s=a.getResponseHeader("Content-Type");return s&&s.indexOf("json")!==-1||"object"==typeof r?this._append_json_data(t,r,function(e){n.call(this,e)}):s&&s.indexOf("html")!==-1||"string"==typeof r?this._append_html_data(t,e(e.parseHTML(r)).filter(o),function(e){n.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:a})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))},this)).fail(e.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},n.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(r=e.isArray(i)?e.extend(!0,[],i):e.isPlainObject(i)?e.extend(!0,{},i):i,t.id===e.jstree.root?this._append_json_data(t,r,function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):"string"==typeof i?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(i)).filter(o),function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){n.call(this,e)}):n.call(this,!1)},_node_changed:function(t){t=this.get_node(t),t&&e.inArray(t.id,this._model.changed)===-1&&this._model.changed.push(t.id)},_append_html_data:function(t,n,r){t=this.get_node(t),t.children=[],t.children_d=[];var i,o,a,s=n.is("ul")?n.children():n,c=t.id,l=[],u=[],d=this._model.data,f=d[c],h=this._data.core.selected.length;for(s.each(e.proxy(function(t,n){i=this._parse_model_from_html(e(n),c,f.parents.concat()),i&&(l.push(i),u.push(i),d[i].children_d.length&&(u=u.concat(d[i].children_d)))},this)),f.children=l,f.children_d=u,o=0,a=f.parents.length;o<a;o++)d[f.parents[o]].children_d=d[f.parents[o]].children_d.concat(u);this.trigger("model",{nodes:u,parent:c}),c!==e.jstree.root?(this._node_changed(c),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==h&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)},_append_json_data:function(t,n,r,i){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],n.d&&(n=n.d,"string"==typeof n&&(n=JSON.parse(n))),e.isArray(n)||(n=[n]);var o=null,a={df:this._model.default_state,dat:n,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},s=function(e,t){e.data&&(e=e.data);var n,r,i,o,a=e.dat,s=e.par,c=[],l=[],u=[],d=e.df,f=e.t_id,h=e.t_cnt,p=e.m,g=p[s],m=e.sel,v=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var i,o,a,s,c=e.id.toString(),l={id:c,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in d)d.hasOwnProperty(i)&&(l.state[i]=d[i]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==t&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(i in e.data.jstree)e.data.jstree.hasOwnProperty(i)&&(l.state[i]=e.data.jstree[i]);if(e&&"object"==typeof e.state)for(i in e.state)e.state.hasOwnProperty(i)&&(l.state[i]=e.state[i]);if(e&&"object"==typeof e.li_attr)for(i in e.li_attr)e.li_attr.hasOwnProperty(i)&&(l.li_attr[i]=e.li_attr[i]);if(l.li_attr.id||(l.li_attr.id=c),e&&"object"==typeof e.a_attr)for(i in e.a_attr)e.a_attr.hasOwnProperty(i)&&(l.a_attr[i]=e.a_attr[i]);for(e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),p[l.id]=l,i=0,o=l.children.length;i<o;i++)a=v(p[l.children[i]],l.id,r),s=p[a],l.children_d.push(a),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));return delete e.data,delete e.children,p[l.id].original=e,l.state.selected&&u.push(l.id),l.id},y=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var i,o,a,s,c,l=!1;do l="j"+f+"_"+ ++h;while(p[l]);c={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in d)d.hasOwnProperty(i)&&(c.state[i]=d[i]);if(e&&e.id&&(c.id=e.id.toString()),e&&e.text&&(c.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),c.icon!==t&&null!==c.icon&&""!==c.icon||(c.icon=!0),e&&e.data&&(c.data=e.data,e.data.jstree))for(i in e.data.jstree)e.data.jstree.hasOwnProperty(i)&&(c.state[i]=e.data.jstree[i]);if(e&&"object"==typeof e.state)for(i in e.state)e.state.hasOwnProperty(i)&&(c.state[i]=e.state[i]);if(e&&"object"==typeof e.li_attr)for(i in e.li_attr)e.li_attr.hasOwnProperty(i)&&(c.li_attr[i]=e.li_attr[i]);if(c.li_attr.id&&!c.id&&(c.id=c.li_attr.id.toString()),c.id||(c.id=l),c.li_attr.id||(c.li_attr.id=c.id),e&&"object"==typeof e.a_attr)for(i in e.a_attr)e.a_attr.hasOwnProperty(i)&&(c.a_attr[i]=e.a_attr[i]);if(e&&e.children&&e.children.length){for(i=0,o=e.children.length;i<o;i++)a=y(e.children[i],c.id,r),s=p[a],c.children.push(a),s.children_d.length&&(c.children_d=c.children_d.concat(s.children_d));c.children_d=c.children_d.concat(c.children)}return e&&e.children&&e.children===!0&&(c.state.loaded=!1,c.children=[],c.children_d=[]),delete e.data,delete e.children,c.original=e,p[c.id]=c,c.state.selected&&u.push(c.id),c.id};if(a.length&&a[0].id!==t&&a[0].parent!==t){for(r=0,i=a.length;r<i;r++)a[r].children||(a[r].children=[]),a[r].state||(a[r].state={}),p[a[r].id.toString()]=a[r];for(r=0,i=a.length;r<i;r++)p[a[r].parent.toString()]?(p[a[r].parent.toString()].children.push(a[r].id.toString()),g.children_d.push(a[r].id.toString())):(this._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:a[r].id.toString(),parent:a[r].parent.toString()})},this.settings.core.error.call(this,this._data.core.last_error));for(r=0,i=g.children.length;r<i;r++)n=v(p[g.children[r]],s,g.parents.concat()),l.push(n),p[n].children_d.length&&(l=l.concat(p[n].children_d));for(r=0,i=g.parents.length;r<i;r++)p[g.parents[r]].children_d=p[g.parents[r]].children_d.concat(l);o={cnt:h,mod:p,sel:m,par:s,dpc:l,add:u}}else{for(r=0,i=a.length;r<i;r++)n=y(a[r],s,g.parents.concat()),n&&(c.push(n),l.push(n),p[n].children_d.length&&(l=l.concat(p[n].children_d)));for(g.children=c,g.children_d=l,r=0,i=g.parents.length;r<i;r++)p[g.parents[r]].children_d=p[g.parents[r]].children_d.concat(l);o={cnt:h,mod:p,sel:m,par:s,dpc:l,add:u}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?o:void postMessage(o)},c=function(t,n){if(null!==this.element){this._cnt=t.cnt;var i,o=this._model.data;for(i in o)o.hasOwnProperty(i)&&o[i].state&&o[i].state.loading&&t.mod[i]&&(t.mod[i].state.loading=!0);if(this._model.data=t.mod,n){var a,s=t.add,c=t.sel,l=this._data.core.selected.slice();if(o=this._model.data,c.length!==l.length||e.vakata.array_unique(c.concat(l)).length!==c.length){for(i=0,a=c.length;i<a;i++)e.inArray(c[i],s)===-1&&e.inArray(c[i],l)===-1&&(o[c[i]].state.selected=!1);for(i=0,a=l.length;i<a;i++)e.inArray(l[i],c)===-1&&(o[l[i]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+s.toString()],{type:"text/javascript"}))),!this._data.core.working||i?(this._data.core.working=!0,o=new window.Worker(this._wrk),o.onmessage=e.proxy(function(e){c.call(this,e.data,!0);try{o.terminate(),o=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),a.par?o.postMessage(a):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,n,r,!0])}catch(e){c.call(this,s(a),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else c.call(this,s(a),!1)}},_parse_model_from_html:function(n,r,i){i=i?[].concat(i):[],r&&i.unshift(r);var o,a,s,c,l,u=this._model.data,d={id:!1,text:!1,icon:!0,parent:r,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in this._model.default_state)this._model.default_state.hasOwnProperty(s)&&(d.state[s]=this._model.default_state[s]);if(c=e.vakata.attributes(n,!0),e.each(c,function(t,n){return n=e.trim(n),!n.length||(d.li_attr[t]=n,void("id"===t&&(d.id=n.toString())))}),c=n.children("a").first(),c.length&&(c=e.vakata.attributes(c,!0),e.each(c,function(t,n){n=e.trim(n),n.length&&(d.a_attr[t]=n)})),c=n.children("a").first().length?n.children("a").first().clone():n.clone(),c.children("ins, i, ul").remove(),c=c.html(),c=e("<div />").html(c),d.text=this.settings.core.force_text?c.text():c.html(),c=n.data(),d.data=c?e.extend(!0,{},c):null,d.state.opened=n.hasClass("jstree-open"),d.state.selected=n.children("a").hasClass("jstree-clicked"),d.state.disabled=n.children("a").hasClass("jstree-disabled"),d.data&&d.data.jstree)for(s in d.data.jstree)d.data.jstree.hasOwnProperty(s)&&(d.state[s]=d.data.jstree[s]);c=n.children("a").children(".jstree-themeicon"),c.length&&(d.icon=!c.hasClass("jstree-themeicon-hidden")&&c.attr("rel")),d.state.icon!==t&&(d.icon=d.state.icon),d.icon!==t&&null!==d.icon&&""!==d.icon||(d.icon=!0),c=n.children("ul").children("li");do l="j"+this._id+"_"+ ++this._cnt;while(u[l]);return d.id=d.li_attr.id?d.li_attr.id.toString():l,c.length?(c.each(e.proxy(function(t,n){o=this._parse_model_from_html(e(n),d.id,i),a=this._model.data[o],d.children.push(o),a.children_d.length&&(d.children_d=d.children_d.concat(a.children_d))},this)),d.children_d=d.children_d.concat(d.children)):n.hasClass("jstree-closed")&&(d.state.loaded=!1),d.li_attr.class&&(d.li_attr.class=d.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),d.a_attr.class&&(d.a_attr.class=d.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),u[d.id]=d,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_flat_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var i,o,a,s,c=e.id.toString(),l=this._model.data,u=this._model.default_state,d={id:c,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in u)u.hasOwnProperty(i)&&(d.state[i]=u[i]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==t&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(i in e.data.jstree)e.data.jstree.hasOwnProperty(i)&&(d.state[i]=e.data.jstree[i]);if(e&&"object"==typeof e.state)for(i in e.state)e.state.hasOwnProperty(i)&&(d.state[i]=e.state[i]);if(e&&"object"==typeof e.li_attr)for(i in e.li_attr)e.li_attr.hasOwnProperty(i)&&(d.li_attr[i]=e.li_attr[i]);if(d.li_attr.id||(d.li_attr.id=c),e&&"object"==typeof e.a_attr)for(i in e.a_attr)e.a_attr.hasOwnProperty(i)&&(d.a_attr[i]=e.a_attr[i]);for(e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),l[d.id]=d,i=0,o=d.children.length;i<o;i++)a=this._parse_model_from_flat_json(l[d.children[i]],d.id,r),s=l[a],d.children_d.push(a),s.children_d.length&&(d.children_d=d.children_d.concat(s.children_d));return delete e.data,delete e.children,l[d.id].original=e,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var i,o,a,s,c,l=!1,u=this._model.data,d=this._model.default_state;do l="j"+this._id+"_"+ ++this._cnt;while(u[l]);c={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in d)d.hasOwnProperty(i)&&(c.state[i]=d[i]);if(e&&e.id&&(c.id=e.id.toString()),e&&e.text&&(c.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),c.icon!==t&&null!==c.icon&&""!==c.icon||(c.icon=!0),e&&e.data&&(c.data=e.data,e.data.jstree))for(i in e.data.jstree)e.data.jstree.hasOwnProperty(i)&&(c.state[i]=e.data.jstree[i]);if(e&&"object"==typeof e.state)for(i in e.state)e.state.hasOwnProperty(i)&&(c.state[i]=e.state[i]);if(e&&"object"==typeof e.li_attr)for(i in e.li_attr)e.li_attr.hasOwnProperty(i)&&(c.li_attr[i]=e.li_attr[i]);if(c.li_attr.id&&!c.id&&(c.id=c.li_attr.id.toString()),c.id||(c.id=l),c.li_attr.id||(c.li_attr.id=c.id),e&&"object"==typeof e.a_attr)for(i in e.a_attr)e.a_attr.hasOwnProperty(i)&&(c.a_attr[i]=e.a_attr[i]);if(e&&e.children&&e.children.length){for(i=0,o=e.children.length;i<o;i++)a=this._parse_model_from_json(e.children[i],c.id,r),s=u[a],c.children.push(a),s.children_d.length&&(c.children_d=c.children_d.concat(s.children_d));
c.children_d=c.children_d.concat(c.children)}return e&&e.children&&e.children===!0&&(c.state.loaded=!1,c.children=[],c.children_d=[]),delete e.data,delete e.children,c.original=e,u[c.id]=c,c.state.selected&&this._data.core.selected.push(c.id),c.id},_redraw:function(){var t,n,r,i=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),o=c.createElement("UL"),a=this._data.core.focused;for(n=0,r=i.length;n<r;n++)t=this.redraw_node(i[n],!0,this._model.force_full_redraw),t&&this._model.force_full_redraw&&o.appendChild(t);this._model.force_full_redraw&&(o.className=this.get_container_ul()[0].className,o.setAttribute("role","group"),this.element.empty().append(o)),null!==a&&(t=this.get_node(a,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==c.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:i})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var n=this.get_node(t),r=!1,i=!1,o=!1,a=c;if(!n)return!1;if(n.id===e.jstree.root)return this.redraw(!0);if(t=this.get_node(t,!0),!t||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],n.children.length&&n.state.loaded){for(o=a.createElement("UL"),o.setAttribute("role","group"),o.className="jstree-children",r=0,i=n.children.length;r<i;r++)o.appendChild(this.redraw_node(n.children[r],!0,!0));t.appendChild(o)}},redraw_node:function(t,n,r,i){var o=this.get_node(t),a=!1,s=!1,l=!1,u=!1,d=!1,f=!1,h="",p=c,g=this._model.data,m=!1,v=null,y=0,_=0,b=!1,w=!1;if(!o)return!1;if(o.id===e.jstree.root)return this.redraw(!0);if(n=n||0===o.children.length,t=c.querySelector?this.element[0].querySelector("#"+("0123456789".indexOf(o.id[0])!==-1?"\\3"+o.id[0]+" "+o.id.substr(1).replace(e.jstree.idregex,"\\$&"):o.id.replace(e.jstree.idregex,"\\$&"))):c.getElementById(o.id))t=e(t),r||(a=t.parent().parent()[0],a===this.element[0]&&(a=null),s=t.index()),n||!o.children.length||t.children(".jstree-children").length||(n=!0),n||(l=t.children(".jstree-children")[0]),m=t.children(".jstree-anchor")[0]===c.activeElement,t.remove();else if(n=!0,!r){if(a=o.parent!==e.jstree.root?e("#"+o.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===a||a&&g[o.parent].state.opened))return!1;s=e.inArray(o.id,null===a?g[e.jstree.root].children:g[o.parent].children)}t=this._data.core.node.cloneNode(!0),h="jstree-node ";for(u in o.li_attr)if(o.li_attr.hasOwnProperty(u)){if("id"===u)continue;"class"!==u?t.setAttribute(u,o.li_attr[u]):h+=o.li_attr[u]}for(o.a_attr.id||(o.a_attr.id=o.id+"_anchor"),t.setAttribute("aria-selected",!!o.state.selected),t.setAttribute("aria-level",o.parents.length),t.setAttribute("aria-labelledby",o.a_attr.id),o.state.disabled&&t.setAttribute("aria-disabled",!0),u=0,d=o.children.length;u<d;u++)if(!g[o.children[u]].state.hidden){b=!0;break}if(null!==o.parent&&g[o.parent]&&!o.state.hidden&&(u=e.inArray(o.id,g[o.parent].children),w=o.id,u!==-1))for(u++,d=g[o.parent].children.length;u<d&&(g[g[o.parent].children[u]].state.hidden||(w=g[o.parent].children[u]),w===o.id);u++);o.state.hidden&&(h+=" jstree-hidden"),o.state.loading&&(h+=" jstree-loading"),o.state.loaded&&!b?h+=" jstree-leaf":(h+=o.state.opened&&o.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",o.state.opened&&o.state.loaded)),w===o.id&&(h+=" jstree-last"),t.id=o.id,t.className=h,h=(o.state.selected?" jstree-clicked":"")+(o.state.disabled?" jstree-disabled":"");for(d in o.a_attr)if(o.a_attr.hasOwnProperty(d)){if("href"===d&&"#"===o.a_attr[d])continue;"class"!==d?t.childNodes[1].setAttribute(d,o.a_attr[d]):h+=" "+o.a_attr[d]}if(h.length&&(t.childNodes[1].className="jstree-anchor "+h),(o.icon&&o.icon!==!0||o.icon===!1)&&(o.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":o.icon.indexOf("/")===-1&&o.icon.indexOf(".")===-1?t.childNodes[1].childNodes[0].className+=" "+o.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+o.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(p.createTextNode(o.text)):t.childNodes[1].innerHTML+=o.text,n&&o.children.length&&(o.state.opened||i)&&o.state.loaded){for(f=p.createElement("UL"),f.setAttribute("role","group"),f.className="jstree-children",u=0,d=o.children.length;u<d;u++)f.appendChild(this.redraw_node(o.children[u],n,!0));t.appendChild(f)}if(l&&t.appendChild(l),!r){for(a||(a=this.element[0]),u=0,d=a.childNodes.length;u<d;u++)if(a.childNodes[u]&&a.childNodes[u].className&&a.childNodes[u].className.indexOf("jstree-children")!==-1){v=a.childNodes[u];break}v||(v=p.createElement("UL"),v.setAttribute("role","group"),v.className="jstree-children",a.appendChild(v)),a=v,s<a.childNodes.length?a.insertBefore(t,a.childNodes[s]):a.appendChild(t),m&&(y=this.element[0].scrollTop,_=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=y,this.element[0].scrollLeft=_)}return o.state.opened&&!o.state.loaded&&(o.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(o.id,!1,0)},this),0)),t},open_node:function(n,r,i){var o,a,s,c;if(e.isArray(n)){for(n=n.slice(),o=0,a=n.length;o<a;o++)this.open_node(n[o],r,i);return!0}return n=this.get_node(n),!(!n||n.id===e.jstree.root)&&(i=i===t?this.settings.core.animation:i,this.is_closed(n)?this.is_loaded(n)?(s=this.get_node(n,!0),c=this,s.length&&(i&&s.children(".jstree-children").length&&s.children(".jstree-children").stop(!0,!0),n.children.length&&!this._firstChild(s.children(".jstree-children")[0])&&this.draw_children(n),i?(this.trigger("before_open",{node:n}),s.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(i,function(){this.style.display="",c.element&&c.trigger("after_open",{node:n})})):(this.trigger("before_open",{node:n}),s[0].className=s[0].className.replace("jstree-closed","jstree-open"),s[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,r&&r.call(this,n,!0),s.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),i&&s.length||this.trigger("after_open",{node:n}),!0):this.is_loading(n)?setTimeout(e.proxy(function(){this.open_node(n,r,i)},this),500):void this.load_node(n,function(e,t){return t?this.open_node(e,r,i):!!r&&r.call(this,e,!1)}):(r&&r.call(this,n,!1),!1))},_open_to:function(t){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var n,r,i=t.parents;for(n=0,r=i.length;n<r;n+=1)n!==e.jstree.root&&this.open_node(i[n],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(n,r){var i,o,a,s;if(e.isArray(n)){for(n=n.slice(),i=0,o=n.length;i<o;i++)this.close_node(n[i],r);return!0}return n=this.get_node(n),!(!n||n.id===e.jstree.root)&&!this.is_closed(n)&&(r=r===t?this.settings.core.animation:r,a=this,s=this.get_node(n,!0),n.state.opened=!1,this.trigger("close_node",{node:n}),void(s.length?r?s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(r,function(){this.style.display="",s.children(".jstree-children").remove(),a.element&&a.trigger("after_close",{node:n})}):(s[0].className=s[0].className.replace("jstree-open","jstree-closed"),s.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:n})):this.trigger("after_close",{node:n})))},toggle_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.toggle_node(t[n]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,n,r){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var i,o,a,s=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!s.length){for(i=0,o=t.children_d.length;i<o;i++)this.is_closed(this._model.data[t.children_d[i]])&&(this._model.data[t.children_d[i]].state.opened=!0);return this.trigger("open_all",{node:t})}r=r||s,a=this,s=this.is_closed(t)?s.find(".jstree-closed").addBack():s.find(".jstree-closed"),s.each(function(){a.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,n,r)},n||0)}),0===r.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(r)})},close_all:function(t,n){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var r,i,o=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),a=this;for(o.length&&(o=this.is_open(t)?o.find(".jstree-open").addBack():o.find(".jstree-open"),e(o.get().reverse()).each(function(){a.close_node(this,n||0)})),r=0,i=t.children_d.length;r<i;r++)this._model.data[t.children_d[r]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return e=this.get_node(e),e&&e.state&&e.state.disabled},enable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.enable_node(t[n]);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t}))},disable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.disable_node(t[n]);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t}))},is_hidden:function(e){return e=this.get_node(e),e.state.hidden===!0},hide_node:function(t,n){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.hide_node(t[r],!0);return n||this.redraw(),!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&void(t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),n||this.redraw(),this.trigger("hide_node",{node:t})))},show_node:function(t,n){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.show_node(t[r],!0);return n||this.redraw(),!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&void(t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),n||this.redraw(),this.trigger("show_node",{node:t})))},hide_all:function(t){var n,r=this._model.data,i=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&!r[n].state.hidden&&(r[n].state.hidden=!0,i.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:i}),i},show_all:function(t){var n,r=this._model.data,i=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&r[n].state.hidden&&(r[n].state.hidden=!1,i.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:i}),i},activate_node:function(e,n){if(this.is_disabled(e))return!1;if(n&&"object"==typeof n||(n={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&(!n.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(n.shiftKey){var r,i,o=this.get_node(e).id,a=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,c=!1;for(r=0,i=s.length;r<i;r+=1)s[r]===o&&(c=!c),s[r]===a&&(c=!c),this.is_disabled(s[r])||!c&&s[r]!==o&&s[r]!==a?this.deselect_node(s[r],!0,n):this.is_hidden(s[r])||this.select_node(s[r],!0,!1,n);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:n})}else this.is_selected(e)?this.deselect_node(e,!1,n):this.select_node(e,!1,!1,n);else!this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,n):(this.deselect_all(!0),this.select_node(e,!1,!1,n),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:n})},hover_node:function(e){if(e=this.get_node(e,!0),!e||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){n.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return e=this.get_node(e,!0),!!(e&&e.length&&e.children(".jstree-hovered").length)&&(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)}))},select_node:function(t,n,r,i){var o,a,s;if(e.isArray(t)){for(t=t.slice(),a=0,s=t.length;a<s;a++)this.select_node(t[a],n,r,i);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(o=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),r||(o=this._open_to(t)),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:i}),n||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:i}))))},deselect_node:function(t,n,r){var i,o,a;if(e.isArray(t)){for(t=t.slice(),i=0,o=t.length;i<o;i++)this.deselect_node(t[i],n,r);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(a=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:r}),n||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:r}))))},select_all:function(t){var n,r,i=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),n=0,r=this._data.core.selected.length;n<r;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:i})},deselect_all:function(e){var t,n,r=this._data.core.selected.concat([]);for(t=0,n=this._data.core.selected.length;t<n;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:r}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:r})},is_selected:function(t){return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&t.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var n,r,i,o,a=this.get_selected(!0),s={};for(n=0,r=a.length;n<r;n++)s[a[n].id]=a[n];for(n=0,r=a.length;n<r;n++)for(i=0,o=a[n].children_d.length;i<o;i++)s[a[n].children_d[i]]&&delete s[a[n].children_d[i]];a=[];for(n in s)s.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_bottom_selected:function(t){var n,r,i=this.get_selected(!0),o=[];for(n=0,r=i.length;n<r;n++)i[n].children.length||o.push(i[n].id);return t?e.map(o,e.proxy(function(e){return this.get_node(e)},this)):o},get_state:function(){var t,n={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},/*!
						'themes' : {
							'name' : this.get_theme(),
							'icons' : this._data.core.themes.icons,
							'dots' : this._data.core.themes.dots
						},
						*/
selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.loaded&&this.settings.core.loaded_state&&n.core.loaded.push(t),this._model.data[t].state.opened&&n.core.open.push(t),this._model.data[t].state.selected&&n.core.selected.push(t));return n},set_state:function(n,r){if(n){if(n.core&&n.core.selected&&n.core.initial_selection===t&&(n.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),n.core){var i,o;if(n.core.loaded)return this.settings.core.loaded_state&&e.isArray(n.core.loaded)&&n.core.loaded.length?this._load_nodes(n.core.loaded,function(e){delete n.core.loaded,this.set_state(n,r)}):(delete n.core.loaded,this.set_state(n,r)),!1;if(n.core.open)return e.isArray(n.core.open)&&n.core.open.length?this._load_nodes(n.core.open,function(e){this.open_node(e,!1,0),delete n.core.open,this.set_state(n,r)}):(delete n.core.open,this.set_state(n,r)),!1;if(n.core.scroll)return n.core.scroll&&n.core.scroll.left!==t&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==t&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,r),!1;if(n.core.selected)return i=this,n.core.initial_selection!==t&&n.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),e.each(n.core.selected,function(e,t){i.select_node(t,!1,!0)})),delete n.core.initial_selection,delete n.core.selected,this.set_state(n,r),!1;for(o in n)n.hasOwnProperty(o)&&"core"!==o&&e.inArray(o,this.settings.plugins)===-1&&delete n[o];if(e.isEmptyObject(n.core))return delete n.core,this.set_state(n,r),!1}return!e.isEmptyObject(n)||(n=null,r&&r.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,n){this._data.core.state=n===!0?{}:this.get_state(),n&&e.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var r=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+r+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,n){n&&(this.get_container_ul()[0].className=r,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var n=[],r=[],i=this._data.core.selected.concat([]);r.push(t.id),t.state.opened===!0&&n.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){r.push(this.id),n.push(this.id)}),this._load_nodes(r,e.proxy(function(e){this.open_node(n,!1,0),this.select_node(i),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,n){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var r,i,o=this._model.data,a=t.id;for(n=n.toString(),o[t.parent].children[e.inArray(t.id,o[t.parent].children)]=n,r=0,i=t.parents.length;r<i;r++)o[t.parents[r]].children_d[e.inArray(t.id,o[t.parents[r]].children_d)]=n;for(r=0,i=t.children.length;r<i;r++)o[t.children[r]].parent=n;for(r=0,i=t.children_d.length;r<i;r++)o[t.children_d[r]].parents[e.inArray(t.id,o[t.children_d[r]].parents)]=n;return r=e.inArray(t.id,this._data.core.selected),r!==-1&&(this._data.core.selected[r]=n),r=this.get_node(t.id,!0),r&&(r.attr("id",n),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",n)),delete o[t.id],t.id=n,t.li_attr.id=n,o[n]=t,this.trigger("set_id",{node:t,new:t.id,old:a}),!0},get_text:function(t){return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&t.text},set_text:function(t,n){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.set_text(t[r],n);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root||(t.text=n,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:n}),0))},get_json:function(t,n,r){if(t=this.get_node(t||e.jstree.root),!t)return!1;n&&n.flat&&!r&&(r=[]);var i,o,a={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!n||!n.no_data)&&e.extend(!0,e.isArray(t.data)?[]:{},t.data)};if(n&&n.flat?a.parent=t.parent:a.children=[],n&&n.no_state)delete a.state;else for(i in t.state)t.state.hasOwnProperty(i)&&(a.state[i]=t.state[i]);if(n&&n.no_li_attr&&delete a.li_attr,n&&n.no_a_attr&&delete a.a_attr,n&&n.no_id&&(delete a.id,a.li_attr&&a.li_attr.id&&delete a.li_attr.id,a.a_attr&&a.a_attr.id&&delete a.a_attr.id),n&&n.flat&&t.id!==e.jstree.root&&r.push(a),!n||!n.no_children)for(i=0,o=t.children.length;i<o;i++)n&&n.flat?this.get_json(t.children[i],n,r):a.children.push(this.get_json(t.children[i],n));return n&&n.flat?r:t.id===e.jstree.root?a.children:a},create_node:function(n,r,i,o,a){if(null===n&&(n=e.jstree.root),n=this.get_node(n),!n)return!1;if(i=i===t?"last":i,!i.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(n))return this.load_node(n,function(){this.create_node(n,r,i,o,!0)});r||(r={text:this.get_string("New node")}),r="string"==typeof r?{text:r}:e.extend(!0,{},r),r.text===t&&(r.text=this.get_string("New node"));var s,c,l,u;switch(n.id===e.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":s=this.get_node(n.parent),i=e.inArray(n.id,s.children),n=s;break;case"after":s=this.get_node(n.parent),i=e.inArray(n.id,s.children)+1,n=s;break;case"inside":case"first":i=0;break;case"last":i=n.children.length;break;default:i||(i=0)}if(i>n.children.length&&(i=n.children.length),r.id||(r.id=!0),!this.check("create_node",r,n,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(r.id===!0&&delete r.id,r=this._parse_model_from_json(r,n.id,n.parents.concat()),!r)return!1;for(s=this.get_node(r),c=[],c.push(r),c=c.concat(s.children_d),this.trigger("model",{nodes:c,parent:n.id}),n.children_d=n.children_d.concat(c),l=0,u=n.parents.length;l<u;l++)this._model.data[n.parents[l]].children_d=this._model.data[n.parents[l]].children_d.concat(c);for(r=s,s=[],l=0,u=n.children.length;l<u;l++)s[l>=i?l+1:l]=n.children[l];return s[i]=r.id,n.children=s,this.redraw_node(n,!0),this.trigger("create_node",{node:this.get_node(r),parent:n.id,position:i}),o&&o.call(this,this.get_node(r)),r.id},rename_node:function(t,n){var r,i,o;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.rename_node(t[r],n);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root||(o=t.text,this.check("rename_node",t,this.get_parent(t),n)?(this.set_text(t,n),this.trigger("rename_node",{node:t,text:n,old:o}),0):(this.settings.core.error.call(this,this._data.core.last_error),1)))},delete_node:function(t){var n,r,i,o,a,s,c,l,u,d,f,h;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.delete_node(t[n]);return!0}if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;if(i=this.get_node(t.parent),o=e.inArray(t.id,i.children),d=!1,!this.check("delete_node",t,i,o))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(o!==-1&&(i.children=e.vakata.array_remove(i.children,o)),a=t.children_d.concat([]),a.push(t.id),s=0,c=t.parents.length;s<c;s++)this._model.data[t.parents[s]].children_d=e.vakata.array_filter(this._model.data[t.parents[s]].children_d,function(t){return e.inArray(t,a)===-1});for(l=0,u=a.length;l<u;l++)if(this._model.data[a[l]].state.selected){d=!0;break}for(d&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return e.inArray(t,a)===-1})),this.trigger("delete_node",{node:t,parent:i.id}),d&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:i.id}),l=0,u=a.length;l<u;l++)delete this._model.data[a[l]];return e.inArray(this._data.core.focused,a)!==-1&&(this._data.core.focused=null,f=this.element[0].scrollTop,h=this.element[0].scrollLeft,i.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(i,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=f,this.element[0].scrollLeft=h),this.redraw_node(i,!0),!0},check:function(t,n,r,i,o){n=n&&n.id?n:this.get_node(n),r=r&&r.id?r:this.get_node(r);var a=t.match(/^move_node|copy_node|create_node$/i)?r:n,s=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||o&&o.is_multi||n.id!==r.id&&("move_node"!==t||e.inArray(n.id,r.children)!==i)&&e.inArray(r.id,n.children_d)===-1?(a&&a.data&&(a=a.data),a&&a.functions&&(a.functions[t]===!1||a.functions[t]===!0)?(a.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})}),a.functions[t]):!(s===!1||e.isFunction(s)&&s.call(this,t,n,r,i,o)===!1||s&&s[t]===!1)||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(n,r,i,o,a,s,c){var l,u,d,f,h,p,g,m,v,y,_,b,w,x;if(r=this.get_node(r),i=i===t?0:i,!r)return!1;if(!i.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(r))return this.load_node(r,function(){this.move_node(n,r,i,o,!0,!1,c)});if(e.isArray(n)){if(1!==n.length){for(l=0,u=n.length;l<u;l++)(v=this.move_node(n[l],r,i,o,a,!1,c))&&(r=v,i="after");return this.redraw(),!0}n=n[0]}if(n=n&&n.id?n:this.get_node(n),!n||n.id===e.jstree.root)return!1;if(d=(n.parent||e.jstree.root).toString(),h=i.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,p=c?c:this._model.data[n.id]?this:e.jstree.reference(n.id),g=!p||!p._id||this._id!==p._id,f=p&&p._id&&d&&p._model.data[d]&&p._model.data[d].children?e.inArray(n.id,p._model.data[d].children):-1,p&&p._id&&(n=p._model.data[n.id]),g)return!!(v=this.copy_node(n,r,i,o,a,!1,c))&&(p&&p.delete_node(n),v);switch(r.id===e.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":i=e.inArray(r.id,h.children);break;case"after":i=e.inArray(r.id,h.children)+1;break;case"inside":case"first":i=0;break;case"last":i=h.children.length;break;default:i||(i=0)}if(i>h.children.length&&(i=h.children.length),!this.check("move_node",n,h,i,{core:!0,origin:c,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.parent===h.id){for(m=h.children.concat(),v=e.inArray(n.id,m),v!==-1&&(m=e.vakata.array_remove(m,v),i>v&&i--),v=[],y=0,_=m.length;y<_;y++)v[y>=i?y+1:y]=m[y];v[i]=n.id,h.children=v,this._node_changed(h.id),this.redraw(h.id===e.jstree.root)}else{for(v=n.children_d.concat(),v.push(n.id),y=0,_=n.parents.length;y<_;y++){for(m=[],x=p._model.data[n.parents[y]].children_d,b=0,w=x.length;b<w;b++)e.inArray(x[b],v)===-1&&m.push(x[b]);p._model.data[n.parents[y]].children_d=m}for(p._model.data[d].children=e.vakata.array_remove_item(p._model.data[d].children,n.id),y=0,_=h.parents.length;y<_;y++)this._model.data[h.parents[y]].children_d=this._model.data[h.parents[y]].children_d.concat(v);for(m=[],y=0,_=h.children.length;y<_;y++)m[y>=i?y+1:y]=h.children[y];for(m[i]=n.id,h.children=m,h.children_d.push(n.id),h.children_d=h.children_d.concat(n.children_d),n.parent=h.id,v=h.parents.concat(),v.unshift(h.id),x=n.parents.length,n.parents=v,v=v.concat(),y=0,_=n.children_d.length;y<_;y++)this._model.data[n.children_d[y]].parents=this._model.data[n.children_d[y]].parents.slice(0,x*-1),Array.prototype.push.apply(this._model.data[n.children_d[y]].parents,v);d!==e.jstree.root&&h.id!==e.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(d),this._node_changed(h.id)),s||this.redraw()}return o&&o.call(this,n,h,i),this.trigger("move_node",{node:n,parent:h.id,position:i,old_parent:d,old_position:f,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id,old_instance:p,new_instance:this}),n.id},copy_node:function(n,r,i,o,a,s,c){var l,u,d,f,h,p,g,m,v,y,_;if(r=this.get_node(r),i=i===t?0:i,!r)return!1;if(!i.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(r))return this.load_node(r,function(){this.copy_node(n,r,i,o,!0,!1,c)});if(e.isArray(n)){if(1!==n.length){for(l=0,u=n.length;l<u;l++)(f=this.copy_node(n[l],r,i,o,a,!0,c))&&(r=f,i="after");return this.redraw(),!0}n=n[0]}if(n=n&&n.id?n:this.get_node(n),!n||n.id===e.jstree.root)return!1;switch(m=(n.parent||e.jstree.root).toString(),v=i.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,y=c?c:this._model.data[n.id]?this:e.jstree.reference(n.id),_=!y||!y._id||this._id!==y._id,y&&y._id&&(n=y._model.data[n.id]),r.id===e.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":i=e.inArray(r.id,v.children);break;case"after":i=e.inArray(r.id,v.children)+1;break;case"inside":case"first":i=0;break;case"last":i=v.children.length;break;default:i||(i=0)}if(i>v.children.length&&(i=v.children.length),!this.check("copy_node",n,v,i,{core:!0,origin:c,is_multi:y&&y._id&&y._id!==this._id,is_foreign:!y||!y._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(g=y?y.get_json(n,{no_id:!0,no_data:!0,no_state:!0}):n,!g)return!1;if(g.id===!0&&delete g.id,g=this._parse_model_from_json(g,v.id,v.parents.concat()),!g)return!1;for(f=this.get_node(g),n&&n.state&&n.state.loaded===!1&&(f.state.loaded=!1),d=[],d.push(g),d=d.concat(f.children_d),this.trigger("model",{nodes:d,parent:v.id}),h=0,p=v.parents.length;h<p;h++)this._model.data[v.parents[h]].children_d=this._model.data[v.parents[h]].children_d.concat(d);for(d=[],h=0,p=v.children.length;h<p;h++)d[h>=i?h+1:h]=v.children[h];return d[i]=f.id,v.children=d,v.children_d.push(f.id),v.children_d=v.children_d.concat(f.children_d),v.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(v.id),s||this.redraw(v.id===e.jstree.root),o&&o.call(this,f,v,i),this.trigger("copy_node",{node:f,original:n,parent:v.id,position:i,old_parent:m,old_position:y&&y._id&&m&&y._model.data[m]&&y._model.data[m].children?e.inArray(n.id,y._model.data[m].children):-1,is_multi:y&&y._id&&y._id!==this._id,is_foreign:!y||!y._id,old_instance:y,new_instance:this}),f.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,a,s,c=[];for(a=0,s=t.length;a<s;a++)n=this.get_node(t[a]),n&&n.id&&n.id!==e.jstree.root&&c.push(n);return!!c.length&&(r=c,o=this,i="move_node",void this.trigger("cut",{node:t}))},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,a,s,c=[];for(a=0,s=t.length;a<s;a++)n=this.get_node(t[a]),n&&n.id&&n.id!==e.jstree.root&&c.push(n);return!!c.length&&(r=c,o=this,i="copy_node",void this.trigger("copy",{node:t}))},get_buffer:function(){return{mode:i,node:r,inst:o}},can_paste:function(){return i!==!1&&r!==!1},paste:function(e,t){return e=this.get_node(e),!!(e&&i&&i.match(/^(copy_node|move_node)$/)&&r)&&(this[i](r,e,t,!1,!1,!1,o)&&this.trigger("paste",{parent:e.id,node:r,mode:i}),r=!1,i=!1,void(o=!1))},clear_buffer:function(){r=!1,i=!1,o=!1,this.trigger("clear_buffer")},edit:function(t,n,r){var i,o,a,s,l,u,d,f,h,p=!1;/*!
				oi = obj.children("i:visible"),
				ai = a.children("i:visible"),
				w1 = oi.width() * oi.length,
				w2 = ai.width() * ai.length,
				*/
return!!(t=this.get_node(t))&&(this.check("edit",t,this.get_parent(t))?(h=t,n="string"==typeof n?n:t.text,this.set_text(t,""),t=this._open_to(t),h.text=n,i=this._data.core.rtl,o=this.element.width(),this._data.core.focused=h.id,a=t.children(".jstree-anchor").focus(),s=e("<span>"),l=n,u=e("<div />",{css:{position:"absolute",top:"-200px",left:i?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),d=e("<input />",{value:l,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(n){n.stopImmediatePropagation(),n.preventDefault();var i,o=s.children(".jstree-rename-input"),c=o.val(),f=this.settings.core.force_text;""===c&&(c=l),u.remove(),s.replaceWith(a),s.remove(),l=f?l:e("<div></div>").append(e.parseHTML(l)).html(),this.set_text(t,l),i=!!this.rename_node(t,f?e("<div></div>").text(c).text():e("<div></div>").append(e.parseHTML(c)).html()),i||this.set_text(t,l),this._data.core.focused=h.id,setTimeout(e.proxy(function(){var e=this.get_node(h.id,!0);e.length&&(this._data.core.focused=h.id,e.children(".jstree-anchor").focus())},this),0),r&&r.call(this,h,i,p),d=null},this),keydown:function(e){var t=e.which;27===t&&(p=!0,this.value=l),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){d.width(Math.min(u.text("pW"+this.value).width(),o))},keypress:function(e){if(13===e.which)return!1}}),f={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},s.attr("class",a.attr("class")).append(a.contents().clone()).append(d),a.replaceWith(s),u.css(f),d.css(f).width(Math.min(u.text("pW"+d[0].value).width(),o))[0].select(),void e(c).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){d&&t.target!==d&&e(d).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(t,n){if(!t)return!1;if(n===!0){var r=this.settings.core.themes.dir;r||(r=e.jstree.path+"/themes"),n=r+"/"+t+"/style.css"}n&&e.inArray(n,a)===-1&&(e("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),a.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(n,r){var i,o,a,s;if(e.isArray(n)){for(n=n.slice(),i=0,o=n.length;i<o;i++)this.set_icon(n[i],r);return!0}return n=this.get_node(n),!(!n||n.id===e.jstree.root||(s=n.icon,n.icon=r===!0||null===r||r===t||""===r||r,a=this.get_node(n,!0).children(".jstree-anchor").children(".jstree-themeicon"),r===!1?(a.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),this.hide_icon(n)):r===!0||null===r||r===t||""===r?(a.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),s===!1&&this.show_icon(n)):r.indexOf("/")===-1&&r.indexOf(".")===-1?(a.removeClass(s).css("background",""),a.addClass(r+" jstree-themeicon-custom").attr("rel",r),s===!1&&this.show_icon(n)):(a.removeClass(s).css("background",""),a.addClass("jstree-themeicon-custom").css("background","url('"+r+"') center center no-repeat").attr("rel",r),s===!1&&this.show_icon(n)),0))},get_icon:function(t){return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&t.icon},hide_icon:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.hide_icon(t[n]);return!0}return t=this.get_node(t),!(!t||t===e.jstree.root||(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),0))},show_icon:function(t){var n,r,i;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.show_icon(t[n]);return!0}return t=this.get_node(t),!(!t||t===e.jstree.root||(i=this.get_node(t,!0),t.icon=!i.length||i.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),i.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),0))}},e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var r=n?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,i){e.inArray(i.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])===-1&&null!==i.value&&""!==e.trim(i.value)&&(n?r[i.name]=i.value:r.push(i.name))}),r},e.vakata.array_unique=function(e){var n,r,i=[],o={};for(n=0,r=e.length;n<r;n++)o[e[n]]===t&&(i.push(e[n]),o[e[n]]=!0);return i},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,n){var r=e.inArray(n,t);return r!==-1?e.vakata.array_remove(t,r):t},e.vakata.array_filter=function(e,t,n,r,i){if(e.filter)return e.filter(t,n);r=[];for(i in e)~~i+""==i+""&&i>=0&&t.call(n,e[i],+i,e)&&r.push(e[i]);return r},e.jstree.plugins.changed=function(e,t){var n=[];this.trigger=function(e,r){var i,o;if(r||(r={}),"changed"===e.replace(".jstree","")){r.changed={selected:[],deselected:[]};var a={};for(i=0,o=n.length;i<o;i++)a[n[i]]=1;for(i=0,o=r.selected.length;i<o;i++)a[r.selected[i]]?a[r.selected[i]]=2:r.changed.selected.push(r.selected[i]);for(i=0,o=n.length;i<o;i++)1===a[n[i]]&&r.changed.deselected.push(n[i]);n=r.selected.slice()}t.trigger.call(this,e,r)},this.refresh=function(e,r){return n=[],t.refresh.apply(this,arguments)}};var l=c.createElement("I");l.className="jstree-icon jstree-checkbox",l.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},e.jstree.plugins.checkbox=function(n,r){this.bind=function(){r.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),this.settings.checkbox.cascade.indexOf("undetermined")!==-1&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var n,r,i=this._model.data,o=(i[t.parent],t.nodes);for(n=0,r=o.length;n<r;n++)i[o[n]].state.checked=i[o[n]].state.checked||i[o[n]].original&&i[o[n]].original.state&&i[o[n]].original.state.checked,i[o[n]].state.checked&&this._data.checkbox.selected.push(o[n])},this)),this.settings.checkbox.cascade.indexOf("up")===-1&&this.settings.checkbox.cascade.indexOf("down")===-1||this.element.on("model.jstree",e.proxy(function(t,n){var r,i,o,a,s,c,l=this._model.data,u=l[n.parent],d=n.nodes,f=[],h=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(h.indexOf("down")!==-1)if(u.state[p?"selected":"checked"]){for(i=0,o=d.length;i<o;i++)l[d[i]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(d)}else for(i=0,o=d.length;i<o;i++)if(l[d[i]].state[p?"selected":"checked"]){for(a=0,s=l[d[i]].children_d.length;a<s;a++)l[l[d[i]].children_d[a]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(l[d[i]].children_d)}if(h.indexOf("up")!==-1){for(i=0,o=u.children_d.length;i<o;i++)l[u.children_d[i]].children.length||f.push(l[u.children_d[i]].parent);for(f=e.vakata.array_unique(f),a=0,s=f.length;a<s;a++)for(u=l[f[a]];u&&u.id!==e.jstree.root;){for(r=0,i=0,o=u.children.length;i<o;i++)r+=l[u.children[i]].state[p?"selected":"checked"];if(r!==o)break;u.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(u.id),c=this.get_node(u,!0),c&&c.length&&c.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),u=this.get_node(u.parent)}}this._data[p?"core":"checkbox"].selected=e.vakata.array_unique(this._data[p?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,n){var r,i,o,a,s=n.node,c=this._model.data,l=this.get_node(s.parent),u=this.settings.checkbox.cascade,d=this.settings.checkbox.tie_selection,f={},h=this._data[d?"core":"checkbox"].selected;for(r=0,i=h.length;r<i;r++)f[h[r]]=!0;if(u.indexOf("down")!==-1){var p=this._cascade_new_checked_state(s.id,!0),g=s.children_d.concat(s.id);for(r=0,i=g.length;r<i;r++)p.indexOf(g[r])>-1?f[g[r]]=!0:delete f[g[r]]}if(u.indexOf("up")!==-1)for(;l&&l.id!==e.jstree.root;){for(o=0,r=0,i=l.children.length;r<i;r++)o+=c[l.children[r]].state[d?"selected":"checked"];if(o!==i)break;l.state[d?"selected":"checked"]=!0,f[l.id]=!0,a=this.get_node(l,!0),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),l=this.get_node(l.parent)}h=[];for(r in f)f.hasOwnProperty(r)&&h.push(r);this._data[d?"core":"checkbox"].selected=h},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,n){var r,i,o,a=this.get_node(e.jstree.root),s=this._model.data;for(r=0,i=a.children_d.length;r<i;r++)o=s[a.children_d[r]],o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(e,t){var n,r,i,o=t.node,a=(this.get_node(o,!0),this.settings.checkbox.cascade),s=this.settings.checkbox.tie_selection,c=this._data[s?"core":"checkbox"].selected,l=o.children_d.concat(o.id);if(a.indexOf("down")!==-1){var u=this._cascade_new_checked_state(o.id,!1);c=c.filter(function(e){return l.indexOf(e)===-1||u.indexOf(e)>-1})}if(a.indexOf("up")!==-1&&c.indexOf(o.id)===-1){for(n=0,r=o.parents.length;n<r;n++)i=this._model.data[o.parents[n]],i.state[s?"selected":"checked"]=!1,i&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1),i=this.get_node(o.parents[n],!0),i&&i.length&&i.attr("aria-selected",!1).children(".jstree-anchor").removeClass(s?"jstree-clicked":"jstree-checked");c=c.filter(function(e){return o.parents.indexOf(e)===-1})}this._data[s?"core":"checkbox"].selected=c},this)),this.settings.checkbox.cascade.indexOf("up")!==-1&&this.element.on("delete_node.jstree",e.proxy(function(t,n){for(var r,i,o,a,s=this.get_node(n.parent),c=this._model.data,l=this.settings.checkbox.tie_selection;s&&s.id!==e.jstree.root&&!s.state[l?"selected":"checked"];){for(o=0,r=0,i=s.children.length;r<i;r++)o+=c[s.children[r]].state[l?"selected":"checked"];if(!(i>0&&o===i))break;s.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(s.id),a=this.get_node(s,!0),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"),s=this.get_node(s.parent)}},this)).on("move_node.jstree",e.proxy(function(t,n){var r,i,o,a,s,c=n.is_multi,l=n.old_parent,u=this.get_node(n.parent),d=this._model.data,f=this.settings.checkbox.tie_selection;if(!c)for(r=this.get_node(l);r&&r.id!==e.jstree.root&&!r.state[f?"selected":"checked"];){for(i=0,o=0,a=r.children.length;o<a;o++)i+=d[r.children[o]].state[f?"selected":"checked"];if(!(a>0&&i===a))break;r.state[f?"selected":"checked"]=!0,this._data[f?"core":"checkbox"].selected.push(r.id),s=this.get_node(r,!0),s&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(f?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}for(r=u;r&&r.id!==e.jstree.root;){for(i=0,o=0,a=r.children.length;o<a;o++)i+=d[r.children[o]].state[f?"selected":"checked"];if(i===a)r.state[f?"selected":"checked"]||(r.state[f?"selected":"checked"]=!0,this._data[f?"core":"checkbox"].selected.push(r.id),s=this.get_node(r,!0),s&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(f?"jstree-clicked":"jstree-checked"));else{if(!r.state[f?"selected":"checked"])break;r.state[f?"selected":"checked"]=!1,this._data[f?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[f?"core":"checkbox"].selected,r.id),s=this.get_node(r,!0),s&&s.length&&s.attr("aria-selected",!1).children(".jstree-anchor").removeClass(f?"jstree-clicked":"jstree-checked")}r=this.get_node(r.parent)}},this))},this.get_undetermined=function(n){if(this.settings.checkbox.cascade.indexOf("undetermined")===-1)return[];var r,i,o,a,s={},c=this._model.data,l=this.settings.checkbox.tie_selection,u=this._data[l?"core":"checkbox"].selected,d=[],f=this,h=[];for(r=0,i=u.length;r<i;r++)if(c[u[r]]&&c[u[r]].parents)for(o=0,a=c[u[r]].parents.length;o<a&&s[c[u[r]].parents[o]]===t;o++)c[u[r]].parents[o]!==e.jstree.root&&(s[c[u[r]].parents[o]]=!0,d.push(c[u[r]].parents[o]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var n,l=f.get_node(this);if(l)if(l.state.loaded){for(r=0,i=l.children_d.length;r<i;r++)if(n=c[l.children_d[r]],!n.state.loaded&&n.original&&n.original.state&&n.original.state.undetermined&&n.original.state.undetermined===!0)for(s[n.id]===t&&n.id!==e.jstree.root&&(s[n.id]=!0,d.push(n.id)),o=0,a=n.parents.length;o<a;o++)s[n.parents[o]]===t&&n.parents[o]!==e.jstree.root&&(s[n.parents[o]]=!0,d.push(n.parents[o]))}else if(l.original&&l.original.state&&l.original.state.undetermined&&l.original.state.undetermined===!0)for(s[l.id]===t&&l.id!==e.jstree.root&&(s[l.id]=!0,d.push(l.id)),o=0,a=l.parents.length;o<a;o++)s[l.parents[o]]===t&&l.parents[o]!==e.jstree.root&&(s[l.parents[o]]=!0,d.push(l.parents[o]))}),r=0,i=d.length;r<i;r++)c[d[r]].state[l?"selected":"checked"]||h.push(n?c[d[r]]:d[r]);return h},this._undetermined=function(){if(null!==this.element){var e,t,n,r=this.get_undetermined(!1);for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,t=r.length;e<t;e++)n=this.get_node(r[e],!0),n&&n.length&&n.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,n,i,o){if(t=r.redraw_node.apply(this,arguments)){var a,s,c=null,u=null;for(a=0,s=t.childNodes.length;a<s;a++)if(t.childNodes[a]&&t.childNodes[a].className&&t.childNodes[a].className.indexOf("jstree-anchor")!==-1){c=t.childNodes[a];break}c&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(c.className+=" jstree-checked"),u=l.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(u.className+=" jstree-checkbox-disabled"),c.insertBefore(u,c.childNodes[0]))}return i||this.settings.checkbox.cascade.indexOf("undetermined")===-1||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var n,r,i=this.settings.checkbox.cascade,o=this.settings.checkbox.tie_selection,a=this._data[o?"core":"checkbox"].selected,s=this._model.data;if(!t||t.state[o?"selected":"checked"]===!0||i.indexOf("undetermined")===-1||i.indexOf("down")===-1&&i.indexOf("up")===-1)return!1;if(!t.state.loaded&&t.original.state.undetermined===!0)return!0;for(n=0,r=t.children_d.length;n<r;n++)if(e.inArray(t.children_d[n],a)!==-1||!s[t.children_d[n]].state.loaded&&s[t.children_d[n]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var n,r,i;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.disable_checkbox(t[n]);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(i=this.get_node(t,!0),void(t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,i&&i.length&&i.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))))},this.enable_checkbox=function(t){var n,r,i;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.enable_checkbox(t[n]);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(i=this.get_node(t,!0),void(t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,i&&i.length&&i.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))))},this.activate_node=function(t,n){return!e(n.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(n.target).hasClass("jstree-checkbox"))&&(n.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(n.target).hasClass("jstree-checkbox")?r.activate_node.call(this,t,n):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,n):this.check_node(t,n),void this.trigger("activate_node",{node:this.get_node(t)})))},this._cascade_new_checked_state=function(e,t){var n,r,i,o=this,a=this.settings.checkbox.tie_selection,s=this._model.data[e],c=[],l=[];if(!this.settings.checkbox.cascade_to_disabled&&s.state.disabled||!this.settings.checkbox.cascade_to_hidden&&s.state.hidden)i=this.get_checked_descendants(e),s.state[a?"selected":"checked"]&&i.push(s.id),c=c.concat(i);else{if(s.children)for(n=0,r=s.children.length;n<r;n++){var u=s.children[n];i=o._cascade_new_checked_state(u,t),c=c.concat(i),i.indexOf(u)>-1&&l.push(u)}var d=o.get_node(s,!0),f=l.length>0&&l.length<s.children.length;s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=f),f?(s.state[a?"selected":"checked"]=!1,d.attr("aria-selected",!1).children(".jstree-anchor").removeClass(a?"jstree-clicked":"jstree-checked")):t&&l.length===s.children.length?(s.state[a?"selected":"checked"]=t,c.push(s.id),d.attr("aria-selected",!0).children(".jstree-anchor").addClass(a?"jstree-clicked":"jstree-checked")):(s.state[a?"selected":"checked"]=!1,d.attr("aria-selected",!1).children(".jstree-anchor").removeClass(a?"jstree-clicked":"jstree-checked"))}return c},this.get_checked_descendants=function(e){var t=this,n=t.settings.checkbox.tie_selection,r=t._model.data[e];return r.children_d.filter(function(e){return t._model.data[e].state[n?"selected":"checked"]})},this.check_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,n);var r,i,o;if(e.isArray(t)){for(t=t.slice(),i=0,o=t.length;i<o;i++)this.check_node(t[i],n);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(r=this.get_node(t,!0),void(t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),r&&r.length&&r.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:n}))))},this.uncheck_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,n);var r,i,o;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.uncheck_node(t[r],n);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(o=this.get_node(t,!0),void(t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),o.length&&o.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:n}))))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,n;for(this._data.checkbox.selected.concat([]),this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,n=this._data.checkbox.selected.length;t<n;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,n=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:n})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):(t=this.get_node(t),!(!t||t.id===e.jstree.root)&&t.state.checked)},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var n,r,i,o,a=this.get_checked(!0),s={};for(n=0,r=a.length;n<r;n++)s[a[n].id]=a[n];for(n=0,r=a.length;n<r;n++)for(i=0,o=a[n].children_d.length;i<o;i++)s[a[n].children_d[i]]&&delete s[a[n].children_d[i]];a=[];for(n in s)s.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var n,r,i=this.get_checked(!0),o=[];for(n=0,r=i.length;n<r;n++)i[n].children.length||o.push(i[n].id);return t?e.map(o,e.proxy(function(e){return this.get_node(e)},this)):o},this.load_node=function(t,n){var i,o,a,s;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(s=this.get_node(t),s&&s.state.loaded))for(i=0,o=s.children_d.length;i<o;i++)this._model.data[s.children_d[i]].state.checked&&(a=!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,s.children_d[i]));return r.load_node.apply(this,arguments)},this.get_state=function(){var e=r.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,n){var i=r.set_state.apply(this,arguments);if(i&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var o=this;e.each(t.checkbox,function(e,t){o.check_node(t)})}return delete t.checkbox,this.set_state(t,n),!1}return i},this.refresh=function(e,t){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),r.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,n){if(this.settings.conditionalselect.call(this,this.get_node(e),n))return t.activate_node.call(this,e,n)}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,n){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.create_node(r,{},"last",function(e){try{n.edit(e)}catch(t){setTimeout(function(){n.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",/*!
						"shortcut"			: 113,
						"shortcut_label"	: 'F2',
						"icon"				: "glyphicon glyphicon-leaf",
						*/
action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.edit(r)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.delete_node(n.get_selected()):n.delete_node(r)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.cut(n.get_top_selected()):n.cut(r)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.copy(n.get_top_selected()):n.copy(r)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.paste(r)}}}}}}},e.jstree.plugins.contextmenu=function(n,r){this.bind=function(){r.bind.call(this);var t,n,i=0,o=null;this.element.on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),i=e.ctrlKey?+new Date:0,(t||o)&&(i=+new Date+1e4),o&&clearTimeout(o),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!i||+new Date-i>250)&&e.vakata.context.hide(),i=0},this)).on("touchstart.jstree",".jstree-anchor",function(r){r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(t=r.originalEvent.changedTouches[0].clientX,n=r.originalEvent.changedTouches[0].clientY,o=setTimeout(function(){e(r.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(r){o&&r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(Math.abs(t-r.originalEvent.changedTouches[0].clientX)>10||Math.abs(n-r.originalEvent.changedTouches[0].clientY)>10)&&(clearTimeout(o),e.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){o&&clearTimeout(o)}),/*!
				if(!('oncontextmenu' in document.body) && ('ontouchstart' in document.body)) {
					var el = null, tm = null;
					this.element
						.on("touchstart", ".jstree-anchor", function (e) {
							el = e.currentTarget;
							tm = +new Date();
							$(document).one("touchend", function (e) {
								e.target = document.elementFromPoint(e.originalEvent.targetTouches[0].pageX - window.pageXOffset, e.originalEvent.targetTouches[0].pageY - window.pageYOffset);
								e.currentTarget = e.target;
								tm = ((+(new Date())) - tm);
								if(e.target === el && tm > 600 && tm < 1000) {
									e.preventDefault();
									$(el).trigger('contextmenu', e);
								}
								el = null;
								tm = null;
							});
						});
				}
				*/
e(c).on("context_hide.vakata.jstree",e.proxy(function(t,n){this._data.contextmenu.visible=!1,e(n.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),r.teardown.call(this)},this.show_contextmenu=function(n,r,i,o){if(n=this.get_node(n),!n||n.id===e.jstree.root)return!1;var a=this.settings.contextmenu,s=this.get_node(n,!0),c=s.children(".jstree-anchor"),l=!1,u=!1;(a.show_at_node||r===t||i===t)&&(l=c.offset(),r=l.left,i=l.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(n)&&this.activate_node(n,o),u=a.items,e.isFunction(u)&&(u=u.call(this,n,e.proxy(function(e){this._show_contextmenu(n,r,i,e)},this))),e.isPlainObject(u)&&this._show_contextmenu(n,r,i,u)},this._show_contextmenu=function(t,n,r,i){var o=this.get_node(t,!0),a=o.children(".jstree-anchor");e(c).one("context_show.vakata.jstree",e.proxy(function(t,n){var r="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(n.element).addClass(r),a.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(a,{x:n,y:r},i),this.trigger("show_contextmenu",{node:t,x:n,y:r})}},function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(c).triggerHandler("context_"+t+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(t){return t=n.items[t],!(!t||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:n.reference,element:n.element}))||!t.action)&&t.action.call(null,{item:t,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_parse:function(t,r){if(!t)return!1;r||(n.html="",n.items=[]);var i,o="",a=!1;return r&&(o+="<ul>"),e.each(t,function(t,r){return!r||(n.items.push(r),!a&&r.separator_before&&(o+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),a=!1,o+="<li class='"+(r._class||"")+(r._disabled===!0||e.isFunction(r._disabled)&&r._disabled({item:r,reference:n.reference,element:n.element})?" vakata-contextmenu-disabled ":"")+"' "+(r.shortcut?" data-shortcut='"+r.shortcut+"' ":"")+">",o+="<a href='#' rel='"+(n.items.length-1)+"' "+(r.title?"title='"+r.title+"'":"")+">",e.vakata.context.settings.icons&&(o+="<i ",r.icon&&(o+=r.icon.indexOf("/")!==-1||r.icon.indexOf(".")!==-1?" style='background:url(\""+r.icon+"\") center center no-repeat' ":" class='"+r.icon+"' "),o+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),o+=(e.isFunction(r.label)?r.label({item:t,reference:n.reference,element:n.element}):r.label)+(r.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+r.shortcut+'">'+(r.shortcut_label||"")+"</span>":"")+"</a>",r.submenu&&(i=e.vakata.context._parse(r.submenu,!0),i&&(o+=i)),o+="</li>",void(r.separator_after&&(o+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",a=!0)))}),o=o.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),r&&(o+="</ul>"),r||(n.html=o,e.vakata.context._trigger("parse")),o.length>10&&o},_show_submenu:function(n){if(n=e(n),n.length&&n.children("ul").length){var r=n.children("ul"),i=n.offset().left,o=i+n.outerWidth(),a=n.offset().top,s=r.width(),c=r.height(),l=e(window).width()+e(window).scrollLeft(),u=e(window).height()+e(window).scrollTop();t?n[o-(s+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[o+s>l&&i>l-o?"addClass":"removeClass"]("vakata-context-right"),a+c+10>u&&r.css("bottom","-1px"),n.hasClass("vakata-context-right")?i<s&&r.css("margin-right",i-s):l-o<s&&r.css("margin-left",l-o-s),r.show()}},show:function(r,i,o){var a,s,c,l,u,d,f,h,p=!0;switch(n.element&&n.element.length&&n.element.width(""),p){case!i&&!r:return!1;case!!i&&!!r:n.reference=r,n.position_x=i.x,n.position_y=i.y;break;case!i&&!!r:n.reference=r,a=r.offset(),n.position_x=a.left+r.outerHeight(),n.position_y=a.top;break;case!!i&&!r:n.position_x=i.x,n.position_y=i.y}r&&!o&&e(r).data("vakata_contextmenu")&&(o=e(r).data("vakata_contextmenu")),e.vakata.context._parse(o)&&n.element.html(n.html),n.items.length&&(n.element.appendTo("body"),s=n.element,c=n.position_x,l=n.position_y,u=s.width(),d=s.height(),f=e(window).width()+e(window).scrollLeft(),h=e(window).height()+e(window).scrollTop(),t&&(c-=s.outerWidth()-e(r).outerWidth(),c<e(window).scrollLeft()+20&&(c=e(window).scrollLeft()+20)),c+u+20>f&&(c=f-(u+20)),l+d+20>h&&(l=h-(d+20)),n.element.css({left:c,top:l}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),n.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),n.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e("body").css("direction");var r=!1;n.element=e("<ul class='vakata-context'></ul>"),n.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(r&&clearTimeout(r),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(r=setTimeout(function(t){return function(){e.vakata.context.hide()}}(this),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||e.vakata.context._execute(e(this).attr("rel"))===!1||e.vakata.context.hide()}).on("keydown","a",function(t){var r=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:n.is_visible&&(n.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:n.is_visible&&(r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),r.length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:n.is_visible&&(r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),r.length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=n.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(c).on("mousedown.vakata.jstree",function(t){n.is_visible&&n.element[0]!==t.target&&!e.contains(n.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,r){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var u,d;e.jstree.plugins.dnd=function(t,n){this.init=function(e,t){n.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in c.createElement("span")},this.bind=function(){n.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var n=this.get_node(t.target),r=this.is_selected(n)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,i=r>1?r+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(i=e.vakata.html.escape(i)),n&&n.id&&n.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(this.settings.dnd.is_draggable===!0||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,r>1?this.get_top_selected(!0):[n],t))){if(u={jstree:!0,origin:this,obj:this.get_node(n,!0),nodes:r>1?this.get_top_selected():[n.id]},d=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,u,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+i+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:d,data:u})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:d,data:u}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:d,data:u}),!1},this))},this.redraw_node=function(e,t,r,i){if(e=n.redraw_node.apply(this,arguments),e&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var o,a,s=null;for(o=0,a=e.childNodes.length;o<a;o++)if(e.childNodes[o]&&e.childNodes[o].className&&e.childNodes[o].className.indexOf("jstree-anchor")!==-1){s=e.childNodes[o];break}s&&s.setAttribute("draggable",!0)}return e}},e(function(){var n=!1,r=!1,i=!1,o=!1,a=e('<div id="jstree-marker">&#160;</div>').hide();e(c).on("dnd_start.vakata.jstree",function(e,t){n=!1,i=!1,t&&t.data&&t.data.jstree&&a.appendTo("body")}).on("dnd_move.vakata.jstree",function(s,c){var l=c.event.target!==i.target;if(o&&(c.event&&"dragover"===c.event.type&&!l||clearTimeout(o)),c&&c.data&&c.data.jstree&&(!c.event.target.id||"jstree-marker"!==c.event.target.id)){i=c.event;var u,d,f,h,p,g,m,v,y,_,b,w,x,C,k,E,T=e.jstree.reference(c.event.target),S=!1,N=!1,A=!1;if(T&&T._data&&T._data.dnd)if(a.attr("class","jstree-"+T.get_theme()+(T.settings.core.themes.responsive?" jstree-dnd-responsive":"")),k=c.data.origin&&(c.data.origin.settings.dnd.always_copy||c.data.origin.settings.dnd.copy&&(c.event.metaKey||c.event.ctrlKey)),c.helper.children().attr("class","jstree-"+T.get_theme()+" jstree-"+T.get_theme()+"-"+T.get_theme_variant()+" "+(T.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[k?"show":"hide"](),c.event.target!==T.element[0]&&c.event.target!==T.get_container_ul()[0]||0!==T.get_container_ul().children().length){if(S=T.settings.dnd.large_drop_target?e(c.event.target).closest(".jstree-node").children(".jstree-anchor"):e(c.event.target).closest(".jstree-anchor"),S&&S.length&&S.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(N=S.offset(),A=(c.event.pageY!==t?c.event.pageY:c.event.originalEvent.pageY)-N.top,f=S.outerHeight(),g=A<f/3?["b","i","a"]:A>f-f/3?["a","i","b"]:A>f/2?["i","a","b"]:["i","b","a"],e.each(g,function(t,i){switch(i){case"b":u=N.left-6,d=N.top,h=T.get_parent(S),p=S.parent().index();break;case"i":x=T.settings.dnd.inside_pos,C=T.get_node(S.parent()),u=N.left-2,d=N.top+f/2+1,h=C.id,p="first"===x?0:"last"===x?C.children.length:Math.min(x,C.children.length);break;case"a":u=N.left-6,d=N.top+f,h=T.get_parent(S),p=S.parent().index()+1}for(m=!0,v=0,y=c.data.nodes.length;v<y;v++)if(_=c.data.origin&&(c.data.origin.settings.dnd.always_copy||c.data.origin.settings.dnd.copy&&(c.event.metaKey||c.event.ctrlKey))?"copy_node":"move_node",b=p,"move_node"===_&&"a"===i&&c.data.origin&&c.data.origin===T&&h===T.get_parent(c.data.nodes[v])&&(w=T.get_node(h),b>e.inArray(c.data.nodes[v],w.children)&&(b-=1)),m=m&&(T&&T.settings&&T.settings.dnd&&T.settings.dnd.check_while_dragging===!1||T.check(_,c.data.origin&&c.data.origin!==T?c.data.origin.get_node(c.data.nodes[v]):c.data.nodes[v],h,b,{dnd:!0,ref:T.get_node(S.parent()),pos:i,origin:c.data.origin,is_multi:c.data.origin&&c.data.origin!==T,is_foreign:!c.data.origin})),!m){T&&T.last_error&&(r=T.last_error());break}if("i"===i&&S.parent().is(".jstree-closed")&&T.settings.dnd.open_timeout&&(c.event&&"dragover"===c.event.type&&!l||(o&&clearTimeout(o),o=setTimeout(function(e,t){return function(){e.open_node(t)}}(T,S),T.settings.dnd.open_timeout))),m)return E=T.get_node(h,!0),E.hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),E.addClass("jstree-dnd-parent")),n={ins:T,par:h,pos:"i"!==i||"last"!==x||0!==p||T.is_loaded(C)?p:"last"},a.css({left:u+"px",top:d+"px"}).show(),c.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),c.event.originalEvent&&c.event.originalEvent.dataTransfer&&(c.event.originalEvent.dataTransfer.dropEffect=k?"copy":"move"),r={},g=!0,!1}),g===!0))return}else{for(m=!0,v=0,y=c.data.nodes.length;v<y&&(m=m&&T.check(c.data.origin&&(c.data.origin.settings.dnd.always_copy||c.data.origin.settings.dnd.copy&&(c.event.metaKey||c.event.ctrlKey))?"copy_node":"move_node",c.data.origin&&c.data.origin!==T?c.data.origin.get_node(c.data.nodes[v]):c.data.nodes[v],e.jstree.root,"last",{dnd:!0,ref:T.get_node(e.jstree.root),pos:"i",origin:c.data.origin,is_multi:c.data.origin&&c.data.origin!==T,is_foreign:!c.data.origin}));v++);if(m)return n={ins:T,par:e.jstree.root,pos:"last"},a.hide(),c.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(c.event.originalEvent&&c.event.originalEvent.dataTransfer&&(c.event.originalEvent.dataTransfer.dropEffect=k?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),n=!1,c.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),c.event.originalEvent&&c.event.originalEvent.dataTransfer&&(c.event.originalEvent.dataTransfer.dropEffect="none"),a.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(a.hide(),n=!1,i=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,s){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),o&&clearTimeout(o),s&&s.data&&s.data.jstree){a.hide().detach();var c,l,u=[];if(n){for(c=0,l=s.data.nodes.length;c<l;c++)u[c]=s.data.origin?s.data.origin.get_node(s.data.nodes[c]):s.data.nodes[c];n.ins[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node"](u,n.par,n.pos,!1,!1,!1,s.data.origin)}else c=e(s.event.target).closest(".jstree"),c.length&&r&&r.error&&"check"===r.error&&(c=c.jstree(!0),c&&c.settings.core.error.call(this,r));i=!1,n=!1}}).on("keyup.jstree keydown.jstree",function(t,s){s=e.vakata.dnd._get(),s&&s.data&&s.data.jstree&&("keyup"===t.type&&27===t.which?(o&&clearTimeout(o),n=!1,r=!1,i=!1,o=!1,a.hide().detach(),e.vakata.dnd._clean()):(s.helper.find(".jstree-copy").first()[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),i&&(i.metaKey=t.metaKey,i.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",i))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(n,r,i){i===t&&(i=e.vakata.dnd._get()),i.event=r,e(c).triggerHandler("dnd_"+n+".vakata",i)},_get:function(){return{data:n.data,element:n.element,helper:n.helper}},_clean:function(){n.helper&&n.helper.remove(),n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(c).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(c).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!n.scroll_e||!n.scroll_l&&!n.scroll_t)return n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),!1;if(!n.scroll_i)return n.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(t===!0)return!1;var r=n.scroll_e.scrollTop(),i=n.scroll_e.scrollLeft();n.scroll_e.scrollTop(r+n.scroll_t*e.vakata.dnd.settings.scroll_speed),n.scroll_e.scrollLeft(i+n.scroll_l*e.vakata.dnd.settings.scroll_speed),r===n.scroll_e.scrollTop()&&i===n.scroll_e.scrollLeft()||e.vakata.dnd._trigger("scroll",n.scroll_e)},start:function(t,r,i){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=c.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(e){}return n.init_x=t.pageX,n.init_y=t.pageY,n.data=r,n.is_down=!0,n.element=t.currentTarget,n.target=t.target,n.is_touch="touchstart"===t.type,i!==!1&&(n.helper=e("<div id='vakata-dnd'></div>").html(i).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(c).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(c).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=c.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_down){if(!n.is_drag){if(!(Math.abs(t.pageX-n.init_x)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-n.init_y)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;n.helper&&(n.helper.appendTo("body"),n.helper_w=n.helper.outerWidth()),n.is_drag=!0,e(n.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var r=!1,i=!1,o=!1,a=!1,s=!1,l=!1,u=!1,d=!1,f=!1,h=!1;return n.scroll_t=0,n.scroll_l=0,n.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var r=e(this),i=r.offset();if(this.scrollHeight>this.offsetHeight&&(i.top+r.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),t.pageY-i.top<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(i.left+r.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),t.pageX-i.left<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1)),n.scroll_t||n.scroll_l)return n.scroll_e=e(this),!1}),n.scroll_e||(r=e(c),i=e(window),o=r.height(),a=i.height(),s=r.width(),l=i.width(),u=r.scrollTop(),d=r.scrollLeft(),o>a&&t.pageY-u<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1),o>a&&a-(t.pageY-u)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),s>l&&t.pageX-d<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1),s>l&&l-(t.pageX-d)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),(n.scroll_t||n.scroll_l)&&(n.scroll_e=r)),n.scroll_e&&e.vakata.dnd._scroll(!0),n.helper&&(f=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),h=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),o&&f+25>o&&(f=o-50),s&&h+n.helper_w>s&&(h=s-(n.helper_w+2)),n.helper.css({left:h+"px",top:f+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=c.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag)t.target!==n.target&&e(n.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===n.target){var r=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){r&&clearTimeout(r)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,n){this.init=function(e,t){this._data.massload={},n.init.call(this,e,t)},this._load_nodes=function(t,r,i,o){var a,s,c,l=this.settings.massload,u=(JSON.stringify(t),[]),d=this._model.data;if(!i){for(a=0,s=t.length;a<s;a++)d[t[a]]&&(d[t[a]].state.loaded||d[t[a]].state.failed)&&!o||(u.push(t[a]),c=this.get_node(t[a],!0),c&&c.length&&c.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},u.length){if(e.isFunction(l))return l.call(this,u,e.proxy(function(e){var a,s;if(e)for(a in e)e.hasOwnProperty(a)&&(this._data.massload[a]=e[a]);for(a=0,s=t.length;a<s;a++)c=this.get_node(t[a],!0),c&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,i,o)},this));if("object"==typeof l&&l&&l.url)return l=e.extend(!0,{},l),e.isFunction(l.url)&&(l.url=l.url.call(this,u)),e.isFunction(l.data)&&(l.data=l.data.call(this,u)),e.ajax(l).done(e.proxy(function(e,a,s){var l,u;if(e)for(l in e)e.hasOwnProperty(l)&&(this._data.massload[l]=e[l]);for(l=0,u=t.length;l<u;l++)c=this.get_node(t[l],!0),c&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,i,o)},this)).fail(e.proxy(function(e){n._load_nodes.call(this,t,r,i,o)},this))}}return n._load_nodes.call(this,t,r,i,o)},this._load_node=function(t,r){var i,o=this._data.massload[t.id],a=null;return o?(a=this["string"==typeof o?"_append_html_data":"_append_json_data"](t,"string"==typeof o?e(e.parseHTML(o)).filter(function(){return 3!==this.nodeType}):o,function(e){r.call(this,e)}),i=this.get_node(t.id,!0),i&&i.length&&i.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],a):n._load_node.call(this,t,r)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(n,r){this.bind=function(){r.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,n){if(this._data.search.som&&n.res.length){var r,i,o,a,s=this._model.data,c=[];for(r=0,i=n.res.length;r<i;r++)if(s[n.res[r]]&&!s[n.res[r]].state.hidden&&(c.push(n.res[r]),c=c.concat(s[n.res[r]].parents),this._data.search.smc))for(o=0,a=s[n.res[r]].children_d.length;o<a;o++)s[s[n.res[r]].children_d[o]]&&!s[s[n.res[r]].children_d[o]].state.hidden&&c.push(s[n.res[r]].children_d[o]);c=e.vakata.array_remove_item(e.vakata.array_unique(c),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(c,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(n,r,i,o,a,s){if(n===!1||""===e.trim(n.toString()))return this.clear_search();o=this.get_node(o),o=o&&o.id?o.id:null,n=n.toString();var c,l,u=this.settings.search,d=!!u.ajax&&u.ajax,f=this._model.data,h=null,p=[],g=[];if(this._data.search.res.length&&!a&&this.clear_search(),i===t&&(i=u.show_only_matches),s===t&&(s=u.show_only_matches_children),!r&&d!==!1)return e.isFunction(d)?d.call(this,n,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,i,o,a,s)})},this),o):(d=e.extend({},d),d.data||(d.data={}),d.data.str=n,o&&(d.data.inside=o),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(d).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(d)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,i,o,a,s)})},this)),this._data.search.lastRequest);if(a||(this._data.search.str=n,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=i,this._data.search.smc=s),h=new e.vakata.search(n,!0,{caseSensitive:u.case_sensitive,fuzzy:u.fuzzy}),e.each(f[o?o:e.jstree.root].children_d,function(e,t){var r=f[t];r.text&&!r.state.hidden&&(!u.search_leaves_only||r.state.loaded&&0===r.children.length)&&(u.search_callback&&u.search_callback.call(this,n,r)||!u.search_callback&&h.search(r.text).isMatch)&&(p.push(t),g=g.concat(r.parents))}),p.length){for(g=e.vakata.array_unique(g),c=0,l=g.length;c<l;c++)g[c]!==e.jstree.root&&f[g[c]]&&this.open_node(g[c],null,0)===!0&&this._data.search.opn.push(g[c]);a?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(p,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(p))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(p,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=p),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:n,res:this._data.search.res,show_only_matches:i})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,n,i,o){if(t=r.redraw_node.apply(this,arguments),t&&e.inArray(t.id,this._data.search.res)!==-1){var a,s,c=null;for(a=0,s=t.childNodes.length;a<s;a++)if(t.childNodes[a]&&t.childNodes[a].className&&t.childNodes[a].className.indexOf("jstree-anchor")!==-1){c=t.childNodes[a];break}c&&(c.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,n,r){r=r||{},r=e.extend({},e.vakata.search.defaults,r),r.fuzzy!==!1&&(r.fuzzy=!0),t=r.caseSensitive?t:t.toLowerCase();var i,o,a,s,c=r.location,l=r.distance,u=r.threshold,d=t.length;return d>32&&(r.fuzzy=!1),r.fuzzy&&(i=1<<d-1,o=function(){var e={},n=0;for(n=0;n<d;n++)e[t.charAt(n)]=0;for(n=0;n<d;n++)e[t.charAt(n)]|=1<<d-n-1;return e}(),a=function(e,t){var n=e/d,r=Math.abs(c-t);return l?n+r/l:r?1:n}),s=function(e){if(e=r.caseSensitive?e:e.toLowerCase(),t===e||e.indexOf(t)!==-1)return{isMatch:!0,score:0};if(!r.fuzzy)return{isMatch:!1,score:1};var n,s,l,f,h,p,g,m,v,y=e.length,_=u,b=e.indexOf(t,c),w=d+y,x=1,C=[];for(b!==-1&&(_=Math.min(a(0,b),_),b=e.lastIndexOf(t,c+d),b!==-1&&(_=Math.min(a(0,b),_))),b=-1,n=0;n<d;n++){for(l=0,f=w;l<f;)a(n,c+f)<=_?l=f:w=f,f=Math.floor((w-l)/2+l);for(w=f,p=Math.max(1,c-f+1),g=Math.min(c+f,y)+d,m=new Array(g+2),m[g+1]=(1<<n)-1,s=g;s>=p;s--)if(v=o[e.charAt(s-1)],0===n?m[s]=(m[s+1]<<1|1)&v:m[s]=(m[s+1]<<1|1)&v|((h[s+1]|h[s])<<1|1)|h[s+1],m[s]&i&&(x=a(n,s-1),x<=_)){if(_=x,b=s-1,C.push(b),!(b>c))break;p=Math.max(1,2*c-b)}if(a(n+1,c)>_)break;h=m}return{isMatch:b>=0,score:x}},n===!0?{search:s}:s(n)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,n){var r,i;if(t=this.get_node(t),t&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),n))for(r=0,i=t.children_d.length;r<i;r++)this.sort(t.children_d[r],!1)}};var f=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},e.jstree.plugins.state=function(t,n){this.bind=function(){n.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){f&&clearTimeout(f),f=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,n){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t=this.get_state();this.settings.state.preserve_loaded||delete t.core.loaded;var n={state:t,ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(n))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl||(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!t||(this.settings.state.preserve_loaded||delete t.core.loaded,this.element.one("set_state.jstree",function(n,r){r.instance.trigger("restore_state",{
state:e.extend(!0,{},t)})}),this.set_state(t),0)))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={default:{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(n,r){this.init=function(n,i){var o,a;if(i&&i.types&&i.types.default)for(o in i.types)if("default"!==o&&o!==e.jstree.root&&i.types.hasOwnProperty(o))for(a in i.types.default)i.types.default.hasOwnProperty(a)&&i.types[o][a]===t&&(i.types[o][a]=i.types.default[a]);r.init.call(this,n,i),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,n){r.refresh.call(this,t,n),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(n,r){var i,o,a,s=this._model.data,c=r.nodes,l=this.settings.types,u="default";for(i=0,o=c.length;i<o;i++){if(u="default",s[c[i]].original&&s[c[i]].original.type&&l[s[c[i]].original.type]&&(u=s[c[i]].original.type),s[c[i]].data&&s[c[i]].data.jstree&&s[c[i]].data.jstree.type&&l[s[c[i]].data.jstree.type]&&(u=s[c[i]].data.jstree.type),s[c[i]].type=u,s[c[i]].icon===!0&&l[u].icon!==t&&(s[c[i]].icon=l[u].icon),l[u].li_attr!==t&&"object"==typeof l[u].li_attr)for(a in l[u].li_attr)if(l[u].li_attr.hasOwnProperty(a)){if("id"===a)continue;s[c[i]].li_attr[a]===t?s[c[i]].li_attr[a]=l[u].li_attr[a]:"class"===a&&(s[c[i]].li_attr.class=l[u].li_attr.class+" "+s[c[i]].li_attr.class)}if(l[u].a_attr!==t&&"object"==typeof l[u].a_attr)for(a in l[u].a_attr)if(l[u].a_attr.hasOwnProperty(a)){if("id"===a)continue;s[c[i]].a_attr[a]===t?s[c[i]].a_attr[a]=l[u].a_attr[a]:"href"===a&&"#"===s[c[i]].a_attr[a]?s[c[i]].a_attr.href=l[u].a_attr.href:"class"===a&&(s[c[i]].a_attr.class=l[u].a_attr.class+" "+s[c[i]].a_attr.class)}}s[e.jstree.root].type=e.jstree.root},this)),r.bind.call(this)},this.get_json=function(t,n,i){var o,a,s=this._model.data,c=n?e.extend(!0,{},n,{no_id:!1}):{},l=r.get_json.call(this,t,c,i);if(l===!1)return!1;if(e.isArray(l))for(o=0,a=l.length;o<a;o++)l[o].type=l[o].id&&s[l[o].id]&&s[l[o].id].type?s[l[o].id].type:"default",n&&n.no_id&&(delete l[o].id,l[o].li_attr&&l[o].li_attr.id&&delete l[o].li_attr.id,l[o].a_attr&&l[o].a_attr.id&&delete l[o].a_attr.id);else l.type=l.id&&s[l.id]&&s[l.id].type?s[l.id].type:"default",n&&n.no_id&&(l=this._delete_ids(l));return l},this._delete_ids=function(t){if(e.isArray(t)){for(var n=0,r=t.length;n<r;n++)t[n]=this._delete_ids(t[n]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(n,i,o,a,s){if(r.check.call(this,n,i,o,a,s)===!1)return!1;i=i&&i.id?i:this.get_node(i),o=o&&o.id?o:this.get_node(o);var c,l,u,d,f=i&&i.id?s&&s.origin?s.origin:e.jstree.reference(i.id):null;switch(f=f&&f._model&&f._model.data?f._model.data:null,n){case"create_node":case"move_node":case"copy_node":if("move_node"!==n||e.inArray(i.id,o.children)===-1){if(c=this.get_rules(o),c.max_children!==t&&c.max_children!==-1&&c.max_children===o.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!i||!i.id)&&i.id,par:!(!o||!o.id)&&o.id})},!1;if(c.valid_children!==t&&c.valid_children!==-1&&e.inArray(i.type||"default",c.valid_children)===-1)return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!i||!i.id)&&i.id,par:!(!o||!o.id)&&o.id})},!1;if(f&&i.children_d&&i.parents){for(l=0,u=0,d=i.children_d.length;u<d;u++)l=Math.max(l,f[i.children_d[u]].parents.length);l=l-i.parents.length+1}(l<=0||l===t)&&(l=1);do{if(c.max_depth!==t&&c.max_depth!==-1&&c.max_depth<l)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!i||!i.id)&&i.id,par:!(!o||!o.id)&&o.id})},!1;o=this.get_node(o.parent),c=this.get_rules(o),l++}while(o)}}return!0},this.get_rules=function(e){if(e=this.get_node(e),!e)return!1;var n=this.get_type(e,!0);return n.max_depth===t&&(n.max_depth=-1),n.max_children===t&&(n.max_children=-1),n.valid_children===t&&(n.valid_children=-1),n},this.get_type=function(t,n){return t=this.get_node(t),!!t&&(n?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(n,r){var i,o,a,s,c,l,u,d,f=this._model.data;if(e.isArray(n)){for(n=n.slice(),o=0,a=n.length;o<a;o++)this.set_type(n[o],r);return!0}if(i=this.settings.types,n=this.get_node(n),!i[r]||!n)return!1;if(u=this.get_node(n,!0),u&&u.length&&(d=u.children(".jstree-anchor")),s=n.type,c=this.get_icon(n),n.type=r,(c===!0||!i[s]||i[s].icon!==t&&c===i[s].icon)&&this.set_icon(n,i[r].icon===t||i[r].icon),i[s]&&i[s].li_attr!==t&&"object"==typeof i[s].li_attr)for(l in i[s].li_attr)if(i[s].li_attr.hasOwnProperty(l)){if("id"===l)continue;"class"===l?(f[n.id].li_attr.class=(f[n.id].li_attr.class||"").replace(i[s].li_attr[l],""),u&&u.removeClass(i[s].li_attr[l])):f[n.id].li_attr[l]===i[s].li_attr[l]&&(f[n.id].li_attr[l]=null,u&&u.removeAttr(l))}if(i[s]&&i[s].a_attr!==t&&"object"==typeof i[s].a_attr)for(l in i[s].a_attr)if(i[s].a_attr.hasOwnProperty(l)){if("id"===l)continue;"class"===l?(f[n.id].a_attr.class=(f[n.id].a_attr.class||"").replace(i[s].a_attr[l],""),d&&d.removeClass(i[s].a_attr[l])):f[n.id].a_attr[l]===i[s].a_attr[l]&&("href"===l?(f[n.id].a_attr[l]="#",d&&d.attr("href","#")):(delete f[n.id].a_attr[l],d&&d.removeAttr(l)))}if(i[r].li_attr!==t&&"object"==typeof i[r].li_attr)for(l in i[r].li_attr)if(i[r].li_attr.hasOwnProperty(l)){if("id"===l)continue;f[n.id].li_attr[l]===t?(f[n.id].li_attr[l]=i[r].li_attr[l],u&&("class"===l?u.addClass(i[r].li_attr[l]):u.attr(l,i[r].li_attr[l]))):"class"===l&&(f[n.id].li_attr.class=i[r].li_attr[l]+" "+f[n.id].li_attr.class,u&&u.addClass(i[r].li_attr[l]))}if(i[r].a_attr!==t&&"object"==typeof i[r].a_attr)for(l in i[r].a_attr)if(i[r].a_attr.hasOwnProperty(l)){if("id"===l)continue;f[n.id].a_attr[l]===t?(f[n.id].a_attr[l]=i[r].a_attr[l],d&&("class"===l?d.addClass(i[r].a_attr[l]):d.attr(l,i[r].a_attr[l]))):"href"===l&&"#"===f[n.id].a_attr[l]?(f[n.id].a_attr.href=i[r].a_attr.href,d&&d.attr("href",i[r].a_attr.href)):"class"===l&&(f[n.id].a_attr.class=i[r].a_attr.class+" "+f[n.id].a_attr.class,d&&d.addClass(i[r].a_attr[l]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(n,r){this.check=function(t,n,i,o,a){if(r.check.call(this,t,n,i,o,a)===!1)return!1;if(n=n&&n.id?n:this.get_node(n),i=i&&i.id?i:this.get_node(i),!i||!i.children)return!0;var s,c,l,u="rename_node"===t?o:n.text,d=[],f=this.settings.unique.case_sensitive,h=this.settings.unique.trim_whitespace,p=this._model.data;for(s=0,c=i.children.length;s<c;s++)l=p[i.children[s]].text,f||(l=l.toLowerCase()),h&&(l=l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),d.push(l);switch(f||(u=u.toLowerCase()),h&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),t){case"delete_node":return!0;case"rename_node":return l=n.text||"",f||(l=l.toLowerCase()),h&&(l=l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),s=e.inArray(u,d)===-1||n.text&&l===u,s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),s;case"create_node":return s=e.inArray(u,d)===-1,s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),s;case"copy_node":return s=e.inArray(u,d)===-1,s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),s;case"move_node":return s=n.parent===i.id&&(!a||!a.is_multi)||e.inArray(u,d)===-1,s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),s}return!0},this.create_node=function(n,i,o,a,s){if(!i||i.text===t){if(null===n&&(n=e.jstree.root),n=this.get_node(n),!n)return r.create_node.call(this,n,i,o,a,s);if(o=o===t?"last":o,!o.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return r.create_node.call(this,n,i,o,a,s);i||(i={});var c,l,u,d,f,h,p=this._model.data,g=this.settings.unique.case_sensitive,m=this.settings.unique.trim_whitespace,v=this.settings.unique.duplicate;for(l=c=this.get_string("New node"),u=[],d=0,f=n.children.length;d<f;d++)h=p[n.children[d]].text,g||(h=h.toLowerCase()),m&&(h=h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),u.push(h);for(d=1,h=l,g||(h=h.toLowerCase()),m&&(h=h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));e.inArray(h,u)!==-1;)l=v.call(this,c,++d).toString(),h=l,g||(h=h.toLowerCase()),m&&(h=h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));i.text=l}return r.create_node.call(this,n,i,o,a,s)}};var h=c.createElement("DIV");if(h.setAttribute("unselectable","on"),h.setAttribute("role","presentation"),h.className="jstree-wholerow",h.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n,r,i=!1;for(n=0,r=t.selected.length;n<r;n++)i=this.get_node(t.selected[n],!0),i&&i.length&&i.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var n=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(t,r,i,o){if(t=n.redraw_node.apply(this,arguments)){var a=h.cloneNode(!0);e.inArray(t.id,this._data.core.selected)!==-1&&(a.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(a.className+=" jstree-wholerow-hovered"),t.insertBefore(a,t.childNodes[0])}return t}},c.registerElement&&Object&&Object.create){var p=Object.create(HTMLElement.prototype);p.createdCallback=function(){var t,n={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(n.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(n[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(n.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(n)};try{c.registerElement("vakata-jstree",{prototype:p})}catch(e){}}}})},58:function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(215),i=function(t){tinyMCE.remove(t.selector);var n={body_class:"form-control",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",content_css:"/fanstatic/fanstatic/css/richtext.css",language:"fr_FR",plugins:["lists","searchreplace visualblocks fullscreen","paste"],theme_advanced_resizing:!0,height:"100px",width:0,theme:"modern",strict_loading_mode:!0,mode:"none",skin:"lightgray",menubar:!1,convert_fonts_to_spans:!0,paste_as_text:!0};e.extend(n,t),r.init(n)};t.default=i}).call(t,n(3))},62:function(e,t,n){(function(e){+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(i).remove(),e(o).each(function(){var r=e(this),i=t(r),o={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target)||(i.trigger(n=e.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))}))}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new a(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var o=t(i),a=o.hasClass("open");if(n(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(o.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},a.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var i=t(r),a=i.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&i.find(o).trigger("focus"),r.trigger("click");var s=" li:not(.disabled):visible a",c=i.find(".dropdown-menu"+s);if(c.length){var l=c.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<c.length-1&&l++,~l||(l=0),c.eq(l).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(e)}).call(t,n(5))},143:function(e,t,n){(function(e){+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),o="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,o)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.7",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(i+a<=e-r)&&"bottom";var s=null==this.affixed,c=s?i:o.top,l=s?a:t;return null!=n&&i<=n?"top":null!=r&&c+l>=e-r&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,t,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var c="affix"+(s?"-"+s:""),l=e.Event(c+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(c).trigger(c.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-o})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(e)}).call(t,n(5))},144:function(e,t,n){(function(e){+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.7",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var i=e(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=e("#"===o?[]:o);t&&t.preventDefault(),a.length||(a=i.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(e)}).call(t,n(5))},145:function(e,t,n){(function(e){+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),o="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,o)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.7",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();t+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target).closest(".btn");t.call(r,"toggle"),e(n.target).is('input[type="radio"], input[type="checkbox"]')||(n.preventDefault(),r.is("input,button")?r.trigger("focus"):r.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(e)}).call(t,n(5))},146:function(e,t,n){(function(e){+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),o=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),a="string"==typeof t?t:o.slide;i||r.data("bs.carousel",i=new n(this,o)),"number"==typeof t?i.to(t):a?i[a]():o.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i="prev"==e?-1:1,o=(n+i)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(t,i),a=this.interval,s="next"==t?"left":"right",c=this;if(o.hasClass("active"))return this.sliding=!1;var l=o[0],u=e.Event("slide.bs.carousel",{relatedTarget:l,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var f=e.Event("slid.bs.carousel",{relatedTarget:l,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(f)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(f)),a&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),o=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(a.interval=!1),t.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(e)}).call(t,n(5))},147:function(e,t,n){(function(e){+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),o=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.7",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var c=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[a](this.$element[0][c])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var o=t(i),a=o.data("bs.collapse"),s=a?"toggle":i.data();n.call(o,s)})}(e)}).call(t,n(5))},148:function(e,t,n){(function(e){+function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),o=i.data("bs.modal"),a=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);o||i.data("bs.modal",o=new n(this,a)),"string"==typeof t?o[t](r):a.show&&o.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){
this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),o=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(o,a,this)})}(e)}).call(t,n(5))},149:function(e,t,n){(function(e){+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.popover",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(e)}).call(t,n(5))},150:function(e,t,n){(function(e){+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),o=/^#./.test(i)&&e(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)a!=o[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(e)}).call(t,n(5))},151:function(e,t,n){(function(e){+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var a=r.find("> .active"),s=i&&e.support.transition&&(a.length&&a.hasClass("fade")||!!r.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(e)}).call(t,n(5))},152:function(e,t,n){(function(e){+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",c="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),!n.isInStateTrue())return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,l=c.test(s);l&&(s=s.replace(c,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=o[0].offsetWidth,f=o[0].offsetHeight;if(l){var h=s,p=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+f>p.bottom?"top":"top"==s&&u.top-f<p.top?"bottom":"right"==s&&u.right+d>p.width?"left":"left"==s&&u.left-d<p.left?"right":s,o.removeClass(h).addClass(s)}var g=this.getCalculatedOffset(s,u,d,f);this.applyPlacement(g,s);var m=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var c=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=o&&(t.top=t.top+o-l);var u=this.getViewportAdjustedDelta(n,t,c,l);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(n),f=d?2*u.left-i+c:2*u.top-o+l,h=d?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(f,r[0][h],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&o.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,o=e(this.$tip),a=e.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&n instanceof window.SVGElement,a=r?{top:0,left:0}:o?null:t.offset(),s={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},c=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,s,c,a)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,c=t.top+o-a.scroll+r;s<a.top?i.top=a.top-s:c>a.top+a.height&&(i.top=a.top+a.height-c)}else{var l=t.left-o,u=t.left+o+n;l<a.left?i.left=a.left-l:u>a.right&&(i.left=a.left+a.width-u)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(e)}).call(t,n(5))},153:function(e,t,n){(function(e){+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(e)}).call(t,n(5))},212:function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){g&&h&&(g=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!g){var e=i(a);g=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,g=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,d,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,p=[],g=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||g||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},213:function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return g[p]=r,h(p),p++}function i(e){delete g[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(m)setTimeout(a,0,e);else{var t=g[e];if(t){m=!0;try{o(t)}finally{i(e),m=!1}}}}function s(){h=function(e){t.nextTick(function(){a(e)})}}function c(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function l(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),h=function(n){e.postMessage(t+n,"*")}}function u(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},h=function(t){e.port2.postMessage(t)}}function d(){var e=v.documentElement;h=function(t){var n=v.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function f(){h=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var h,p=1,g={},m=!1,v=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?s():c()?l():e.MessageChannel?u():v&&"onreadystatechange"in v.createElement("script")?d():f(),y.setImmediate=r,y.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(212))},214:function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i="undefined"!=typeof e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(213),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},215:function(e,t,n){(function(t){!function(){!function(){"use strict";function n(){function e(n,r){return t.push(n+" ")>Gt.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[gn]=!0,e}function i(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||kn)-(~e.sourceIndex||kn);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function o(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function a(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function s(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&typeof e.getElementsByTagName!==Cn&&e}function l(){}function u(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=yn++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,c,l=[vn,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(c=t[gn]||(t[gn]={}),(s=c[r])&&s[0]===vn&&s[1]===o)return l[2]=s[2];if(c[r]=l,l[2]=e(t,n,a))return!0}}}function f(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function h(e,t,n){for(var r=0,i=t.length;r<i;r++)Zn(e,t[r],n);return n}function p(e,t,n,r,i){for(var o,a=[],s=0,c=e.length,l=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function g(e,t,n,i,o,a){return i&&!i[gn]&&(i=g(i)),o&&!o[gn]&&(o=g(o,a)),r(function(r,a,s,c){var l,u,d,f=[],g=[],m=a.length,v=r||h(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:p(v,f,e,s,c),_=n?o||(r?e:m||i)?[]:a:y;if(n&&n(y,_,s,c),i)for(l=p(_,g),i(l,[],s,c),u=l.length;u--;)(d=l[u])&&(_[g[u]]=!(y[g[u]]=d));if(r){if(o||e){if(o){for(l=[],u=_.length;u--;)(d=_[u])&&l.push(y[u]=d);o(null,_=[],l,c)}for(u=_.length;u--;)(d=_[u])&&(l=o?Dn.call(r,d):f[u])>-1&&(r[l]=!(a[l]=d))}}else _=p(_===a?_.splice(m,_.length):_),o?o(null,a,_,c):An.apply(a,_)})}function m(e){for(var t,n,r,i=e.length,o=Gt.relative[e[0].type],a=o||Gt.relative[" "],s=o?1:0,c=d(function(e){return e===t},a,!0),l=d(function(e){return Dn.call(t,e)>-1},a,!0),h=[function(e,n,r){return!o&&(r||n!==rn)||((t=n).nodeType?c(e,n,r):l(e,n,r))}];s<i;s++)if(n=Gt.relative[e[s].type])h=[d(f(h),n)];else{if(n=Gt.filter[e[s].type].apply(null,e[s].matches),n[gn]){for(r=++s;r<i&&!Gt.relative[e[r].type];r++);return g(s>1&&f(h),s>1&&u(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(In,"$1"),n,s<r&&m(e.slice(s,r)),r<i&&m(e=e.slice(r)),r<i&&u(e))}h.push(n)}return f(h)}function v(e,t){var n=t.length>0,i=e.length>0,o=function(r,o,a,s,c){var l,u,d,f=0,h="0",g=r&&[],m=[],v=rn,y=r||i&&Gt.find.TAG("*",c),_=vn+=null==v?1:Math.random()||.1,b=y.length;for(c&&(rn=o!==cn&&o);h!==b&&null!=(l=y[h]);h++){if(i&&l){for(u=0;d=e[u++];)if(d(l,o,a)){s.push(l);break}c&&(vn=_)}n&&((l=!d&&l)&&f--,r&&g.push(l))}if(f+=h,n&&h!==f){for(u=0;d=t[u++];)d(g,m,o,a);if(r){if(f>0)for(;h--;)g[h]||m[h]||(m[h]=Sn.call(s));m=p(m)}An.apply(s,m),c&&!r&&m.length>0&&f+t.length>1&&Zn.uniqueSort(s)}return c&&(vn=_,rn=v),g};return n?r(o):o}function y(e,t,n){var r=e.isiOS()&&/ipad/i.test(n)===!0,i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&/mobile/i.test(n)===!0,c=e.isiOS()||e.isAndroid(),l=c&&!s,u=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1;return{isiPad:ye(r),isiPhone:ye(i),isTablet:ye(s),isPhone:ye(l),isTouch:ye(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ye(u)}}function _(e,t){var n,r=0,i={};t=t||{},n=t.maxLoadTime||5e3;var o=function(t){e.getElementsByTagName("head")[0].appendChild(t)},a=function(t,a,s){var c,l,u,d,f=function(){for(var e=d.passed,t=e.length;t--;)e[t]();d.status=2,d.passed=[],d.failed=[]},h=function(){for(var e=d.failed,t=e.length;t--;)e[t]();d.status=3,d.passed=[],d.failed=[]},p=function(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)},g=function(e,t){e()||((new Date).getTime()-u<n?Ft.setTimeout(t):h())},m=function(){g(function(){for(var t,n,r=e.styleSheets,i=r.length;i--;)if(t=r[i],n=t.ownerNode?t.ownerNode:t.owningElement,n&&n.id===c.id)return f(),!0},m)},v=function(){g(function(){try{var e=l.sheet.cssRules;return f(),!!e}catch(e){}},v)};if(t=xr._addCacheSuffix(t),i[t]?d=i[t]:(d={passed:[],failed:[]},i[t]=d),a&&d.passed.push(a),s&&d.failed.push(s),1!==d.status){if(2===d.status)return void f();if(3===d.status)return void h();if(d.status=1,c=e.createElement("link"),c.rel="stylesheet",c.type="text/css",c.id="u"+r++,c.async=!1,c.defer=!1,u=(new Date).getTime(),"onload"in c&&!p())c.onload=m,c.onerror=h;else{if(navigator.userAgent.indexOf("Firefox")>0)return l=e.createElement("style"),l.textContent='@import "'+t+'"',v(),void o(l);m()}o(c),c.href=t}},s=function(e){return Xa.nu(function(t){a(e,ve(t,ye(Qa.value(e))),ve(t,ye(Qa.error(e))))})},c=function(e){return e.fold(_e,_e)},l=function(e,t,n){Ja(He(e,s)).get(function(e){var r=Ke(e,function(e){return e.isValue()});r.fail.length>0?n(r.fail.map(c)):t(r.pass.map(c))})};return{load:a,loadAll:l}}function b(e,t){var n=e,r=function(e,n,r,i){var o,a;if(e){if(!i&&e[n])return e[n];if(e!==t){if(o=e[r])return o;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(o=a[r])return o}}},i=function(e,n,r,i){var o,a,s;if(e){if(o=e[r],t&&o===t)return;if(o){if(!i)for(s=o[n];s;s=s[n])if(!s[n])return s;return o}if(a=e.parentNode,a&&a!==t)return a}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=i(n,"lastChild","previousSibling",e)}}function w(e){var t,n,r,i,o,a,s,c,l,u,d,f,h,p={},g={},m=[],v={},y={},_=function(t,n,r){var i=e[t];return i?i=ac(i,/[, ]/,ac(i.toUpperCase(),/[, ]/)):(i=ic[t],i||(i=ac(n," ",ac(n.toUpperCase()," ")),i=cc(i,r),ic[t]=i)),i};e=e||{},r=fc(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),t=hc(e.valid_styles),n=hc(e.invalid_styles,"map"),c=hc(e.valid_classes,"map"),i=_("whitespace_elements","pre script noscript style textarea video audio iframe object code"),o=_("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=_("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=_("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),u=_("non_empty_elements","td th iframe video audio object script pre code",a),d=_("move_caret_before_on_enter_elements","table",u),f=_("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),l=_("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",f),h=_("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),sc((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){y[e]=new RegExp("</"+e+"[^>]*>","gi")});var b=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},w=function(e){var t,n,r,i,o,a,s,c,l,u,d,f,h,g,v,y,_,w,x,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,k=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,E=/[*?+]/;if(e)for(e=dc(e,","),p["@"]&&(y=p["@"].attributes,_=p["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(o=C.exec(e[t])){if(g=o[1],l=o[2],v=o[3],c=o[5],f={},h=[],a={attributes:f,attributesOrder:h},"#"===g&&(a.paddEmpty=!0),"-"===g&&(a.removeEmpty=!0),"!"===o[4]&&(a.removeEmptyAttrs=!0),y){for(w in y)f[w]=y[w];h.push.apply(h,_)}if(c)for(c=dc(c,"|"),r=0,i=c.length;r<i;r++)if(o=k.exec(c[r])){if(s={},d=o[1],u=o[2].replace(/[\\:]:/g,":"),g=o[3],x=o[4],"!"===d&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(u),s.required=!0),"-"===d){delete f[u],h.splice(uc(h,u),1);continue}g&&("="===g&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:u,value:x}),s.defaultValue=x),":"===g&&(a.attributesForced=a.attributesForced||[],
a.attributesForced.push({name:u,value:x}),s.forcedValue=x),"<"===g&&(s.validValues=ac(x,"?"))),E.test(u)?(a.attributePatterns=a.attributePatterns||[],s.pattern=b(u),a.attributePatterns.push(s)):(f[u]||h.push(u),f[u]=s)}y||"@"!==l||(y=f,_=h),v&&(a.outputName=l,p[v]=a),E.test(l)?(a.pattern=b(l),m.push(a)):p[l]=a}},x=function(e){p={},m=[],w(e),sc(r,function(e,t){g[t]=e.children})},C=function(e){var t=/^(~)?(.+)$/;e&&(ic.text_block_elements=ic.block_elements=null,sc(dc(e,","),function(e){var n=t.exec(e),r="~"===n[1],i=r?"span":"div",o=n[2];if(g[o]=g[i],v[o]=i,r||(l[o.toUpperCase()]={},l[o]={}),!p[o]){var a=p[i];a=cc({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,p[o]=a}sc(g,function(e,t){e[i]&&(g[t]=e=cc({},g[t]),e[o]=e[i])})}))},k=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;ic[e.schema]=null,t&&sc(dc(t,","),function(e){var t,r,i=n.exec(e);i&&(r=i[1],t=r?g[i[2]]:g[i[2]]={"#comment":{}},t=g[i[2]],sc(dc(i[3],"|"),function(e){"-"===r?delete t[e]:t[e]={}}))})},E=function(e){var t,n=p[e];if(n)return n;for(t=m.length;t--;)if(n=m[t],n.pattern.test(e))return n};e.valid_elements?x(e.valid_elements):(sc(r,function(e,t){p[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},g[t]=e.children}),"html5"!==e.schema&&sc(dc("strong/b em/i"),function(e){e=dc(e,"/"),p[e[1]].outputName=e[0]}),sc(dc("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){p[e]&&(p[e].removeEmpty=!0)}),sc(dc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){p[e].paddEmpty=!0}),sc(dc("span"),function(e){p[e].removeEmptyAttrs=!0})),C(e.custom_elements),k(e.valid_children),w(e.extended_valid_elements),k("+ol[ul|ol],+ul[ul|ol]"),sc({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){p[t]&&(p[t].parentsRequired=dc(e))}),e.invalid_elements&&sc(lc(e.invalid_elements),function(e){p[e]&&delete p[e]}),E("span")||w("span[!data-mce-type|*]");var T=function(){return t},S=function(){return n},N=function(){return c},A=function(){return s},j=function(){return l},D=function(){return f},O=function(){return h},R=function(){return a},B=function(){return o},P=function(){return u},F=function(){return d},I=function(){return i},L=function(){return y},M=function(e,t){var n=g[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},V=function(e,t){var n,r,i=E(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},$=function(){return v};return{children:g,elements:p,getValidStyles:T,getValidClasses:N,getBlockElements:j,getInvalidStyles:S,getShortEndedElements:R,getTextBlockElements:D,getTextInlineElements:O,getBoolAttrs:A,getElementRule:E,getSelfClosingElements:B,getNonEmptyElements:P,getMoveCaretBeforeOnEnterElements:F,getWhiteSpaceElements:I,getSpecialElements:L,isValidChild:M,isValid:V,getCustomElements:$,addValidElements:w,setValidElements:x,addCustomElements:C,addValidChildren:k}}function x(e,t){var n,r,i,o,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,u={},d="\ufeff";for(e=e||{},t&&(i=t.getValidStyles(),o=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+d).split(" "),n=0;n<r.length;n++)u[r[n]]=d+n,u[d+n]=r[n];return{toHex:function(e){return e.replace(a,pc)},parse:function(t){var r,i,o,f,h={},p=e.url_converter,g=e.url_converter_scope||this,m=function(e,t,r){var i,o,a,s;if(i=h[e+"-top"+t],i&&(o=h[e+"-right"+t],o&&(a=h[e+"-bottom"+t],a&&(s=h[e+"-left"+t])))){var c=[i,o,a,s];for(n=c.length-1;n--&&c[n]===c[n+1];);n>-1&&r||(h[e+t]=n===-1?c[0]:c.join(" "),delete h[e+"-top"+t],delete h[e+"-right"+t],delete h[e+"-bottom"+t],delete h[e+"-left"+t])}},v=function(e){var t,n=h[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return h[e]=n[0],!0}},y=function(e,t,n,r){v(t)&&v(n)&&v(r)&&(h[e]=h[t]+" "+h[n]+" "+h[r],delete h[t],delete h[n],delete h[r])},_=function(e){return f=!0,u[e]},b=function(e,t){return f&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return u[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},w=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},x=function(e){return e.replace(/\\[0-9a-f]+/gi,w)},C=function(t,n,r,i,o,a){if(o=o||a)return o=b(o),"'"+o.replace(/\'/g,"\\'")+"'";if(n=b(n||r||i),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return p&&(n=p.call(g,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,_).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,_)});r=c.exec(t);)if(c.lastIndex=r.index+r[0].length,i=r[1].replace(l,"").toLowerCase(),o=r[2].replace(l,""),i&&o){if(i=x(i),o=x(o),i.indexOf(d)!==-1||i.indexOf('"')!==-1)continue;if(!e.allow_script_urls&&("behavior"===i||/expression\s*\(|\/\*|\*\//.test(o)))continue;"font-weight"===i&&"700"===o?o="bold":"color"!==i&&"background-color"!==i||(o=o.toLowerCase()),o=o.replace(a,pc),o=o.replace(s,C),h[i]=f?b(o,!0):o}m("border","",!0),m("border","-width"),m("border","-color"),m("border","-style"),m("padding",""),m("margin",""),y("border","border-width","border-style","border-color"),"medium none"===h.border&&delete h.border,"none"===h["border-image"]&&delete h["border-image"]}return h},serialize:function(e,t){var n,r,a="",s=function(t){var n,r,o,s;if(n=i[t])for(r=0,o=n.length;r<o;r++)t=n[r],s=e[t],s&&(a+=(a.length>0?" ":"")+t+": "+s+";")},c=function(e,t){var n;return n=o["*"],!(n&&n[e]||(n=o[t],n&&n[e]))};if(t&&i)s("*"),s(t);else for(n in e)r=e[n],!r||o&&!c(n,t)||(a+=(a.length>0?" ":"")+n+": "+r+";");return a}}}function C(e,t){var n=this;void 0===t&&(t={});var r,i={},o=window,a={},s=0,c=!0,l=!0,u=_(e),d=[],f=t.schema?t.schema:w({}),h=x({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),p=t.ownEvents?new Xt(t.proxy):Xt.Event,g=f.getBlockElements(),m=Ur.overrideDefaults(function(){return{context:e,element:De.getRoot()}}),v=function(e){if("string"==typeof e)return!!g[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!g[e.nodeName])}return!1},y=function(t){if(t&&e&&"string"==typeof t){var n=e.getElementById(t);return n&&n.id!==t?e.getElementsByName(t)[1]:n}return t},k=function(e){return"string"==typeof e&&(e=y(e)),m(e)},E=function(e,t,n){var i,o,a=k(e);return a.length&&(i=r[t],o=i&&i.get?i.get(a,t):a.attr(t)),"undefined"==typeof o&&(o=n||""),o},T=function(e){var t=y(e);return t?t.attributes:[]},S=function(e,n,i){var o,a;""===i&&(i=null);var s=k(e);o=s.attr(n),s.length&&(a=r[n],a&&a.set?a.set(s,i,n):s.attr(n,i),o!==i&&t.onSetAttrib&&t.onSetAttrib({attrElm:s,attrName:n,attrValue:i}))},N=function(t,n){if(!vc||1!==t.nodeType||n)return t.cloneNode(n);if(!n){var r=e.createElement(t.nodeName);return gc(T(t),function(e){S(r,e.nodeName,E(t,e.nodeName))}),r}return null},A=function(){return t.root_element||e.body},j=function(e){var t=e?e:o,n=t.document,r=l?n.documentElement:n.body;return{x:t.pageXOffset||r.scrollLeft,y:t.pageYOffset||r.scrollTop,w:t.innerWidth||r.clientWidth,h:t.innerHeight||r.clientHeight}},D=function(t,n){return $a.getPos(e.body,y(t),n)},O=function(e,n,r){var i=k(e).css(n,r);t.update_styles&&wc(h,i)},R=function(e,n){var r=k(e).css(n);t.update_styles&&wc(h,r)},B=function(e,t,n){var r=k(e);return n?r.css(t):(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"===t&&(t=St.ie&&St.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},P=function(e){var t,n;return e=y(e),t=B(e,"width"),n=B(e,"height"),t.indexOf("px")===-1&&(t=0),n.indexOf("px")===-1&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},F=function(e){var t,n;return e=y(e),t=D(e),n=P(e),{x:t.x,y:t.y,w:n.w,h:n.h}},I=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(yc.test(t)){var r=t.toLowerCase().split(/,/),i=e.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--)if(r[n]===i)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return Zn(t,o[0].ownerDocument||o[0],null,o).length>0},L=function(e,t,n,r){var i,o=[],a=y(e);for(r=void 0===r,n=n||("BODY"!==A().nodeName?A().parentNode:null),xr.is(t,"string")&&(i=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return I(e,i)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];o.push(a)}a=a.parentNode}return r?o:null},M=function(e,t,n){var r=L(e,t,n,!1);return r&&r.length>0?r[0]:null},V=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return I(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},$=function(e,t){return V(e,t,"nextSibling")},U=function(e,t){return V(e,t,"previousSibling")},q=function(n,r){return Zn(n,y(r)||t.root_element||e,[])},H=function(e,t,r){var i,o="string"==typeof e?y(e):e;if(!o)return!1;if(xr.isArray(o)&&(o.length||0===o.length))return i=[],gc(o,function(e,n){e&&("string"==typeof e&&(e=y(e)),i.push(t.call(r,e,n)))}),i;var a=r?r:n;return t.call(a,o)},z=function(e,t){k(e).each(function(e,n){gc(t,function(e,t){S(n,t,e)})})},W=function(e,t){var n=k(e);vc?n.each(function(e,n){if(n.canHaveHTML!==!1){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(e){Ur("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):n.html(t)},K=function(t,n,r,i,o){return H(t,function(t){var a="string"==typeof n?e.createElement(n):n;return z(a,r),i&&("string"!=typeof i&&i.nodeType?a.appendChild(i):"string"==typeof i&&W(a,i)),o?a:t.appendChild(a)})},X=function(t,n,r){return K(e.createElement(t),t,n,r,!0)},Y=rc.decode,J=rc.encodeAllRaw,G=function(e,t,n){var r,i="";i+="<"+e;for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(i+=" "+r+'="'+J(t[r])+'"');return"undefined"!=typeof n?i+">"+n+"</"+e+">":i+" />"},Z=function(t){var n,r=e.createElement("div"),i=e.createDocumentFragment();for(t&&(r.innerHTML=t);n=r.firstChild;)i.appendChild(n);return i},Q=function(e,t){var n=k(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),n.length>1?n.toArray():n[0]},ee=function(e){return H(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},te=function(e){return h.parse(e)},ne=function(e,t){return h.serialize(e,t)},re=function(t){var n,r;if(De!==C.DOM&&e===document){if(i[t])return;i[t]=!0}r=e.getElementById("mceDefaultStyles"),r||(r=e.createElement("style"),r.id="mceDefaultStyles",r.type="text/css",n=e.getElementsByTagName("head")[0],n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(e.createTextNode(t))},ie=function(t){var n;return De!==C.DOM&&e===document?void C.DOM.loadCSS(t):(t||(t=""),n=e.getElementsByTagName("head")[0],void gc(t.split(","),function(e){var t;e=xr._addCacheSuffix(e),a[e]||(a[e]=!0,t=X("link",{rel:"stylesheet",href:e}),n.appendChild(t))}))},oe=function(e,t,n){k(e).toggleClass(t,n).each(function(){""===this.className&&Ur(this).attr("class",null)})},ae=function(e,t){k(e).addClass(t)},se=function(e,t){oe(e,t,!1)},ce=function(e,t){return k(e).hasClass(t)},le=function(e){k(e).show()},ue=function(e){k(e).hide()},de=function(e){return"none"===k(e).css("display")},fe=function(e){return(e?e:"mce_")+s++},he=function(e){var t="string"==typeof e?y(e):e;return Ls.isElement(t)?t.outerHTML:Ur("<div></div>").append(Ur(t).clone()).html()},pe=function(e,t){k(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}Q(Ur(this).html(t),!0)})},ge=function(e,t){var n=y(t);return H(e,function(e){var t,r;return t=n.parentNode,r=n.nextSibling,r?t.insertBefore(e,r):t.appendChild(e),e})},me=function(e,t,n){return H(t,function(t){return xr.is(t,"array")&&(e=e.cloneNode(!0)),n&&gc(mc(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},ve=function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=X(t),gc(T(e),function(t){S(n,t.nodeName,E(e,t.nodeName))}),me(n,e,!0)),n||e},ye=function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},_e=function(e){return h.toHex(xr.trim(e))},be=function(e,t){var n,r,i,o,a,s,c=0;if(e=e.firstChild){a=new b(e,e.parentNode),t=t||(f?f.getNonEmptyElements():null),o=f?f.getWhiteSpaceElements():{};do{if(i=e.nodeType,Ls.isElement(e)){var l=e.getAttribute("data-mce-bogus");if(l){e=a.next("all"===l);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){c++,e=a.next();continue}return!1}for(r=T(e),n=r.length;n--;)if(s=r[n].nodeName,"name"===s||"data-mce-bookmark"===s)return!1}if(8===i)return!1;if(3===i&&!_c.test(e.nodeValue))return!1;if(3===i&&e.parentNode&&o[e.parentNode.nodeName]&&_c.test(e.nodeValue))return!1;e=a.next()}while(e)}return c<=1},we=function(){return e.createRange()},xe=function(e,t,n){var r,i,o,a=we();if(e&&t)return a.setStart(e.parentNode,xc(e)),a.setEnd(t.parentNode,xc(t)),r=a.extractContents(),a=we(),a.setStart(t.parentNode,xc(t)+1),a.setEnd(e.parentNode,xc(e)+1),i=a.extractContents(),o=e.parentNode,o.insertBefore(Us.trimNode(De,r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(Us.trimNode(De,i),e),Q(e),n||t},Ce=function(n,r,i,a){if(xr.isArray(n)){for(var s=n.length;s--;)n[s]=Ce(n[s],r,i,a);return n}return!t.collect||n!==e&&n!==o||d.push([n,r,i,a]),p.bind(n,r,i,a||De)},ke=function(t,n,r){var i;if(xr.isArray(t)){for(i=t.length;i--;)t[i]=ke(t[i],n,r);return t}if(d&&(t===e||t===o))for(i=d.length;i--;){var a=d[i];t!==a[0]||n&&n!==a[1]||r&&r!==a[2]||p.unbind(a[0],a[1],a[2])}return p.unbind(t,n,r)},Ee=function(e,t,n){return p.fire(e,t,n)},Te=function(e){if(e&&Ls.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},Se=function(e){for(var t=A(),n=null;e&&e!==t&&(n=Te(e),null===n);e=e.parentNode);return n},Ne=function(){if(d)for(var e=d.length;e--;){var t=d[e];p.unbind(t[0],t[1],t[2])}Zn.setDocument&&Zn.setDocument()},Ae=function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},je=function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},De={doc:e,settings:t,win:o,files:a,stdMode:c,boxModel:l,styleSheetLoader:u,boundEvents:d,styles:h,schema:f,events:p,isBlock:v,$:m,$$:k,root:null,clone:N,getRoot:A,getViewPort:j,getRect:F,getSize:P,getParent:M,getParents:L,get:y,getNext:$,getPrev:U,select:q,is:I,add:K,create:X,createHTML:G,createFragment:Z,remove:Q,setStyle:O,getStyle:B,setStyles:R,removeAllAttribs:ee,setAttrib:S,setAttribs:z,getAttrib:E,getPos:D,parseStyle:te,serializeStyle:ne,addStyle:re,loadCSS:ie,addClass:ae,removeClass:se,hasClass:ce,toggleClass:oe,show:le,hide:ue,isHidden:de,uniqueId:fe,setHTML:W,getOuterHTML:he,setOuterHTML:pe,decode:Y,encode:J,insertAfter:ge,replace:me,rename:ve,findCommonAncestor:ye,toHex:_e,run:H,getAttribs:T,isEmpty:be,createRng:we,nodeIndex:xc,split:xe,bind:Ce,unbind:ke,fire:Ee,getContentEditable:Te,getContentEditableParent:Se,destroy:Ne,isChildOf:Ae,dumpRng:je};return r=bc(h,t,function(){return De}),De}function k(){var e=this,t=[],n={},r={},i=[],o=function(e){if(r[e])return r[e].instance},a=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},s=function(e,t){var r=k.language;if(r&&k.languageLoad!==!1){if(t)if(t=","+t+",",t.indexOf(","+r.substr(0,2)+",")!==-1)r=r.substr(0,2);else if(t.indexOf(","+r+",")===-1)return;Nc.ScriptLoader.add(n[e]+"/langs/"+r+".js")}},c=function(e,n,o){t.push(n),r[e]={instance:n,dependencies:o};var a=Ke(i,function(t){return t.name===e});return i=a.fail,Ac(a.pass,function(e){e.callback()}),n},l=function(e){delete n[e],delete r[e]},u=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},d=function(t,n){var r=e.urls[t];Ac(n,function(e){Nc.ScriptLoader.add(r+"/"+e)})},f=function(e,t,n,r){var i=a(e);Ac(i,function(e){var n=u(t,e);h(n.resource,n,void 0,void 0)}),n&&(r?n.call(r):n.call(Nc))},h=function(e,t,i,o,a){if(!n[e]){var s="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==s.indexOf("/")&&s.indexOf("://")===-1&&(s=k.baseURL+"/"+s),n[e]=s.substring(0,s.lastIndexOf("/")),r[e]?f(e,t,i,o):Nc.ScriptLoader.add(s,function(){return f(e,t,i,o)},o,a)}},p=function(e,t){r.hasOwnProperty(e)?t():i.push({name:e,callback:t})};return{items:t,urls:n,lookup:r,_listeners:i,get:o,dependencies:a,requireLangPack:s,add:c,remove:l,createUrl:u,addComponents:d,load:h,waitFor:p}}function E(e,t,n){var r=n||!1,i=function(){t(),r=!0},o=function(){e(),r=!1},a=function(){var e=r?o:i;e()},s=function(){return r};return{on:i,off:o,toggle:a,isOn:s}}function T(e,t,n,r,i){return e(n,r)?je.some(n):Le(i)&&i(n)?je.none():t(n,r,i)}function S(e,t,n){var r=function(){return Cd(e)?0===t:0===t},i=function(){return Cd(e)?t>=e.data.length:t>=e.childNodes.length},o=function(){var n;return n=Sd(e.ownerDocument),n.setStart(e,t),n.setEnd(e,t),n},a=function(){return n||(n=Fd(S(e,t))),n},s=function(){return a().length>0},c=function(n){return n&&e===n.container()&&t===n.offset()},l=function(n){return Td(e,n?t-1:t)};return{container:_u.constant(e),offset:_u.constant(t),toRange:o,getClientRects:a,isVisible:s,isAtStart:r,isAtEnd:i,isEqual:c,getNode:l}}function N(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return a(n).getOr("")},r=function(e){try{return i(e)}catch(e){return je.none()}},i=function(t){return e(t)?je.from(t.dom().nodeValue):je.none()},o=Hi.detect().browser,a=o.isIE()&&10===o.version.major?r:i,s=function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom().nodeValue=r};return{get:n,getOption:a,set:s}}function A(e){var t=Kl();Wl(e,t);var n=zl(e,t);return{register:function(e,n){t.register(e,n)},annotate:function(n,r){t.lookup(n).each(function(t){Sm(e,n,t,r)})},annotationChanged:function(e,t){n.addListener(e,t)},remove:function(t){$l(e,je.some(t)).each(function(e){var t=e.elements;ze(t,zc.unwrap)})},getAll:function(t){var n=Hl(e,t);return lo(n,function(e){return He(e,function(e){return e.dom()})})}}}function j(e){var t,n,r,i,o,a=[];return e=e||{},t=e.indent,n=ov(e.indent_before||""),r=ov(e.indent_after||""),i=rc.getEncodeFunc(e.entity_encoding||"raw",e.entities),o="html"===e.element_format,{start:function(e,s,c){var l,u,d,f;if(t&&n[e]&&a.length>0&&(f=a[a.length-1],f.length>0&&"\n"!==f&&a.push("\n")),a.push("<",e),s)for(l=0,u=s.length;l<u;l++)d=s[l],a.push(" ",d.name,'="',i(d.value,!0),'"');!c||o?a[a.length]=">":a[a.length]=" />",c&&t&&r[e]&&a.length>0&&(f=a[a.length-1],f.length>0&&"\n"!==f&&a.push("\n"))},end:function(e){var n;a.push("</",e,">"),t&&r[e]&&a.length>0&&(n=a[a.length-1],n.length>0&&"\n"!==n&&a.push("\n"))},text:function(e,t){e.length>0&&(a[a.length]=t?e:i(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("<!--",e,"-->")},pi:function(e,n){n?a.push("<?",e," ",i(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function D(e,t){void 0===t&&(t=w());var n=j(e);e=e||{},e.validate=!("validate"in e)||e.validate;var r=function(r){var i,o;o=e.validate,i={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do a(e);while(e=e.next)}},n.reset();var a=function(e){var r,s,c,l,u,d,f,h,p,g=i[e.type];if(g)g(e);else{if(r=e.name,s=e.shortEnded,c=e.attributes,o&&c&&c.length>1&&(d=[],d.map={},p=t.getElementRule(e.name))){for(f=0,h=p.attributesOrder.length;f<h;f++)l=p.attributesOrder[f],l in c.map&&(u=c.map[l],d.map[l]=u,d.push({name:l,value:u}));for(f=0,h=c.length;f<h;f++)l=c[f].name,l in d.map||(u=c.map[l],d.map[l]=u,d.push({name:l,value:u}));c=d}if(n.start(e.name,c,s),!s){if(e=e.firstChild)do a(e);while(e=e.next);n.end(r)}}};return 1!==r.type||e.inner?i[11](r):a(r),n.getContent()};return{serialize:r}}function O(e){var t,n,r,i,o={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",function(){t=e.dom,n=e.selection,a=e.settings,r=e.formatter});var s=function(t,n,r,i){var a,s,c=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||i&&i.skip_focus?hC.restore(e):e.focus(),i=e.fire("BeforeExecCommand",{command:t,ui:n,value:r}),i.isDefaultPrevented())return!1;if(s=t.toLowerCase(),a=o.exec[s])return a(s,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(mC(e.plugins,function(i){if(i.execCommand&&i.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),c=!0,!1}),c)return c;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{c=e.getDoc().execCommand(t,n,r)}catch(e){}return!!c&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},c=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(e){}return!1}},l=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(e){}}},u=function(e,t){t=t||"exec",mC(e,function(e,n){mC(n.toLowerCase().split(","),function(n){o[t][n]=e})})},d=function(t,n,r){t=t.toLowerCase(),o.exec[t]=function(t,i,o,a){return n.call(r||e,i,o,a)}},f=function(t){if(t=t.toLowerCase(),o.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(e){}return!1},h=function(t,n,r){t=t.toLowerCase(),o.state[t]=function(){return n.call(r||e)}},p=function(t,n,r){t=t.toLowerCase(),o.value[t]=function(){return n.call(r||e)}},g=function(e){return e=e.toLowerCase(),!!o.exec[e]};vC(this,{execCommand:s,queryCommandState:c,queryCommandValue:l,queryCommandSupported:f,addCommands:u,addCommand:d,addQueryStateHandler:h,addQueryValueHandler:p,hasCustomCommand:g});var m=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=null),e.getDoc().execCommand(t,n,r)},v=function(e){return r.match(e)},y=function(t,n){r.toggle(t,n?{value:n}:void 0),e.nodeChanged()},_=function(e){i=n.getBookmark(e)},b=function(){n.moveToBookmark(i)};u({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=e.getDoc();try{m(t)}catch(e){n=!0}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");St.mac&&(i=i.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");return void(t&&e.dom.remove(t,!0))}r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),mC("left,center,right,justify".split(","),function(e){t!==e&&r.remove("align"+e)}),"none"!==t&&y("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var r,i;m(e),r=t.getParent(n.getNode(),"ol,ul"),r&&(i=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)&&(_(),t.split(i,r),b()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){y(e)},"ForeColor,HiliteColor":function(e,t,n){y(e,n)},FontName:function(t,n,r){lx(e,r)},FontSize:function(t,n,r){dx(e,r)},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){y("blockquote")},FormatBlock:function(e,t,n){return y(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,r,i){var o=i||n.getNode();o!==e.getBody()&&(_(),e.dom.remove(o,!0),b())},mceSelectNodeDepth:function(r,i,o){var a=0;t.getParent(n.getNode(),function(e){if(1===e.nodeType&&a++===o)return n.select(e),!1},e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){mv.insertAtCaret(e,r)},mceInsertRawHTML:function(t,r,i){var o=e.getContent();n.setContent("tiny_mce_marker"),e.setContent(o.replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(e,t,n){y(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){gC(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,r,i){e.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,i,o){var a;"string"==typeof o&&(o={href:o}),a=t.getParent(n.getNode(),"a"),o.href=o.href.replace(" ","%20"),a&&o.href||r.remove("link"),o.href&&r.apply("link",o,a)},selectAll:function(){var e=t.getParent(n.getStart(),Ls.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e),n.setRng(r)}},delete:function(){Gw.deleteCommand(e)},forwardDelete:function(){Gw.forwardDeleteCommand(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return $x.insert(e,r),!0}});var w=function(e){return function(){var i=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),o=yC(i,function(t){return!!r.matchNode(t,e)});return _C(o,!0)!==-1}};u({JustifyLeft:w("alignleft"),JustifyCenter:w("aligncenter"),JustifyRight:w("alignright"),JustifyFull:w("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return v(e)},mceBlockQuote:function(){return v("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0}return c("InsertUnorderedList")||c("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&("insertunorderedlist"===e&&"UL"===r.tagName||"insertorderedlist"===e&&"OL"===r.tagName)}},"state"),u({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),p("FontName",function(){return ux(e)},this),p("FontSize",function(){return fx(e)},this)}function R(e){var t=this,n={},r=[],i=function(e){var t,n,r={};WC(KC(e,"+"),function(e){e in YC?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=XC[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode];for(n in YC)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,St.mac?r.ctrl=!0:r.shift=!0),r.meta&&(St.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},o=function(t,n,r,o){var a;return a=xr.map(KC(t,">"),i),a[a.length-1]=xr.extend(a[a.length-1],{func:r,scope:o||e}),xr.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},a=function(e){return e.altKey||e.ctrlKey||e.metaKey},s=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},c=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},l=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){!a(e)&&!s(e)||e.isDefaultPrevented()||(WC(n,function(t){if(c(e,t))return r=t.subpatterns.slice(0),"keydown"===e.type&&l(t),!0}),c(e,r[0])&&(1===r.length&&"keydown"===e.type&&l(r[0]),r.shift()))}),t.add=function(t,r,i,a){var s;return s=i,"string"==typeof i?i=function(){e.execCommand(s,!1,null)}:xr.isArray(s)&&(i=function(){e.execCommand(s[0],s[1],s[2])}),WC(KC(xr.trim(t.toLowerCase())),function(e){var t=o(e,r,i,a);n[t.id]=t}),!0},t.remove=function(e){var t=o(e);return!!n[t.id]&&(delete n[t.id],!0)}}function B(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}function P(e){var t=[],n=function(){var t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():B()},r=function(){return je.from(t[0])},i=function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)},o=function(){t.length>0&&n().reposition(t)},a=function(e){t.push(e)},s=function(e){Ze(t,function(t){return t===e}).each(function(e){t.splice(e,1)})},c=function(r){if(!e.removed&&Pk.isEditorAttachedToDom(e))return Ge(t,function(e){return i(n().getArgs(e),r)}).getOrThunk(function(){e.editorManager.setActive(e);var t=n().open(r,function(){s(t),o()});return a(t),o(),t})},l=function(){r().each(function(e){n().close(e),s(e),o()})},u=function(){return t},d=function(e){e.on("SkinLoaded",function(){var t=e.settings.service_message;t&&c({text:t,type:"warning",timeout:0,icon:""})}),e.on("ResizeEditor ResizeWindow",function(){Ft.requestAnimationFrame(o)}),e.on("remove",function(){ze(t,function(e){n().close(e)})})};return d(e),{open:c,close:l,getNotifications:u}}function F(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}function I(e){var t=[],n=function(){var t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():F()},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},i=function(t){e.fire("OpenWindow",{win:t})},o=function(t){e.fire("CloseWindow",{win:t})},a=function(e){t.push(e),i(e)},s=function(n){Ze(t,function(e){return e===n}).each(function(r){t.splice(r,1),o(n),0===t.length&&e.focus()})},c=function(){return je.from(t[t.length-1])},l=function(t,r){e.editorManager.setActive(e),hC.store(e);var i=n().open(t,r,s);return a(i),i},u=function(e,t,i){var o=n().alert(e,r(i?i:this,t),s);a(o)},d=function(e,t,i){var o=n().confirm(e,r(i?i:this,t),s);a(o)},f=function(){c().each(function(e){n().close(e),s(e)})},h=function(){return c().map(n().getParams).getOr(null)},p=function(e){c().each(function(t){n().setParams(t,e)})},g=function(){return t};return e.on("remove",function(){ze(t.slice(0),function(e){n().close(e)})}),{windows:t,open:l,alert:u,confirm:d,close:f,getParams:h,setParams:p,getWindows:g}}function L(){var e=vt.getOrDie("XMLHttpRequest");return new e}function M(e,t){var n={},r=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},i=function(e,n,i,o){var a,s;a=new L,a.open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=function(e){o(e.loaded/e.total*100)},a.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e;return a.status<200||a.status>=300?void i("HTTP Error: "+a.status):(e=JSON.parse(a.responseText),e&&"string"==typeof e.location?void n(r(t.basePath,e.location)):void i("Invalid JSON: "+a.responseText))},s=new FormData,s.append("file",e.blob(),e.filename()),a.send(s)},o=function(){return new At(function(e){e([])})},a=function(e,t){return{url:t,blobInfo:e,status:!0}},s=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},c=function(e,t){xr.each(n[e],function(e){e(t)}),delete n[e]},l=function(t,n,r){return e.markPending(t.blobUri()),new At(function(i){var o,l,u=function(){};try{var d=function(){o&&(o.close(),l=u)},f=function(n){d(),e.markUploaded(t.blobUri(),n),c(t.blobUri(),a(t,n)),i(a(t,n))},h=function(n){d(),e.removeFailed(t.blobUri()),c(t.blobUri(),s(t,n)),i(s(t,n))};l=function(e){e<0||e>100||(o||(o=r()),o.progressBar.value(e))},n(t,f,h,l)}catch(e){i(s(t,e.message))}})},u=function(e){return e===i},d=function(e){var t=e.blobUri();return new At(function(e){
n[t]=n[t]||[],n[t].push(e)})},f=function(n,r){return n=xr.grep(n,function(t){return!e.isUploaded(t.blobUri())}),At.all(xr.map(n,function(n){return e.isPending(n.blobUri())?d(n):l(n,t.handler,r)}))},h=function(e,n){return!t.url&&u(t.handler)?o():f(e,n)};return Le(t.handler)===!1&&(t.handler=i),{upload:h}}function V(){var e=vt.getOrDie("FileReader");return new e}function $(e){var t=vt.getOrDie("Uint8Array");return new t(e)}function U(e,t){var n={},r=function(r,i){var o;i||(i=_u.constant(!0)),o=lr.filter(oE(r),function(t){var n=t.src;return!!St.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===St.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&i(t):0===n.indexOf("data:")&&i(t))});var a=lr.map(o,function(e){if(n[e.src])return new At(function(t){n[e.src].then(function(n){return"string"==typeof n?n:void t({image:e,blobInfo:n.blobInfo})})});var r=new At(function(n,r){iE(t,e,n,r)}).then(function(e){return delete n[e.image.src],e}).catch(function(t){return delete n[e.src],t});return n[e.src]=r,r});return At.all(a)};return{findAll:r}}function q(){var e=[],t=_u.constant,n=function(e){var t={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"};return t[e.toLowerCase()]||"dat"},r=function(e,t,n,r){if(Re(e)){var o=e;return i({id:o,name:r,blob:t,base64:n})}if(Be(e))return i(e);throw new Error("Unknown input type")},i=function(e){var r,i;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return r=e.id||lE.uuid("blobid"),i=e.name||r,{id:t(r),name:t(i),filename:t(i+"."+n(e.blob.type)),blob:t(e.blob),base64:t(e.base64),blobUri:t(e.blobUri||wt.createObjectURL(e.blob)),uri:t(e.uri)}},o=function(t){a(t.id())||e.push(t)},a=function(e){return s(function(t){return t.id()===e})},s=function(t){return lr.filter(e,t)[0]},c=function(e){return s(function(t){return t.blobUri()===e})},l=function(t){e=lr.filter(e,function(e){return e.blobUri()!==t||(wt.revokeObjectURL(e.blobUri()),!1)})},u=function(){lr.each(e,function(e){wt.revokeObjectURL(e.blobUri())}),e=[]};return{create:r,add:o,get:a,getByUri:c,findFirst:s,removeByUri:l,destroy:u}}function H(){var e=1,t=2,n={},r=function(e,t){return{status:e,resultUri:t}},i=function(e){return e in n},o=function(e){var t=n[e];return t?t.resultUri:null},a=function(t){return!!i(t)&&n[t].status===e},s=function(e){return!!i(e)&&n[e].status===t},c=function(t){n[t]=r(e,null)},l=function(e,i){n[e]=r(t,i)},u=function(e){delete n[e]},d=function(){n={}};return{hasBlobUri:i,getResultUri:o,isPending:a,isUploaded:s,markPending:c,markUploaded:l,removeFailed:u,destroy:d}}function z(e){var t,n,r=q(),i=H(),o=[],a=function(t){return function(n){return e.selection?t(n):[]}},s=function(){return"?"+(new Date).getTime()},c=function(e,t,n){var r=0;do r=e.indexOf(t,r),r!==-1&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1);while(r!==-1);return e},l=function(e,t,n){return e=c(e,'src="'+t+'"','src="'+n+'"'),e=c(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},u=function(t,n){ze(e.undoManager.data,function(e){"fragmented"===e.type?e.fragments=He(e.fragments,function(e){return l(e,t,n)}):e.content=l(e.content,t,n)})},d=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},f=function(t,n){r.removeByUri(t.src),u(t.src,n),e.$(t).attr({src:rp.shouldReuseFileName(e)?n+s():n,"data-mce-src":e.convertURL(n,"src")})},h=function(n){return t||(t=M(i,{url:rp.getImageUploadUrl(e),basePath:rp.getImageUploadBasePath(e),credentials:rp.getImagesUploadCredentials(e),handler:rp.getImagesUploadHandler(e)})),v().then(a(function(r){var i;return i=He(r,function(e){return e.blobInfo}),t.upload(i,d).then(a(function(t){var i=He(t,function(t,n){var i=r[n].image;return t.status&&rp.shouldReplaceBlobUris(e)?f(i,t.url):t.error&&Hk.uploadError(e,t.error),{element:i,status:t.status}});return n&&n(i),i}))}))},p=function(t){if(rp.isAutomaticUploadsEnabled(e))return h(t)},g=function(t){if(rt(o,function(e){return e(t)})===!1)return!1;if(0===t.getAttribute("src").indexOf("data:")){var n=rp.getImagesDataImgFilter(e);return n(t)}return!0},m=function(e){o.push(e)},v=function(){return n||(n=U(i,r)),n.findAll(e.getBody(),g).then(a(function(t){return t=Xe(t,function(t){return"string"!=typeof t||(Hk.displayError(e,t),!1)}),ze(t,function(e){u(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},y=function(){r.destroy(),i.destroy(),n=t=null},_=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var o=i.getResultUri(n);if(o)return'src="'+o+'"';var a=r.getByUri(n);if(a||(a=Je(e.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),a){var s=a.blob();return'src="data:'+s.type+";base64,"+a.base64()+'"'}return t})};return e.on("setContent",function(){rp.isAutomaticUploadsEnabled(e)?p():v()}),e.on("RawSaveContent",function(e){e.content=_(e.content)}),e.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=_(e.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(e){ze(e,function(e){var t=e.attr("src");if(!r.getByUri(t)){var n=i.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:r,addFilter:m,uploadImages:h,uploadImagesAuto:p,scanForImages:v,destroy:y}}function W(e){var t,n=[],r=function(t){var r,i;if(i=e.$(t).parentsUntil(e.getBody()).add(t),i.length===n.length){for(r=i.length;r>=0&&i[r]===n[r];r--);if(r===-1)return n=i,!0}return n=i,!1};"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var r,i;r=e.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&px.isEq(i,t)||e.fire("SelectionChange"),t=i}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!St.range&&e.selection.isCollapsed()||CE(e)&&!r(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("MouseUp",function(t){!t.isDefaultPrevented()&&CE(e)&&("IMG"===e.selection.getNode().nodeName?Ft.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())}),this.nodeChanged=function(t){var n,r,i,o=e.selection;e.initialized&&o&&!e.settings.disable_nodechange&&!e.readonly&&(i=e.getBody(),n=o.getStart(!0)||i,n.ownerDocument===e.getDoc()&&e.dom.isChildOf(n,i)||(n=i),r=[],e.dom.getParent(n,function(e){return e===i||void r.push(e)}),t=t||{},t.element=n,t.parents=r,e.fire("NodeChange",t))}}function K(e,t){void 0===t&&(t=w());var n=function(){};e=e||{},e.fix_self_closing!==!1&&(e.fix_self_closing=!0);var r=e.comment?e.comment:n,i=e.cdata?e.cdata:n,o=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,c=e.pi?e.pi:n,l=e.doctype?e.doctype:n,u=function(n){var u,d,f,h,p,g,m,v,y,_,b,w,x,C,k,E,T,S,N,A,j,D,O,R,B,P,F,I,L,M,V=0,$=[],U=0,q=rc.decode,H=xr.makeMap("src,href,data,background,formaction,poster,xlink:href"),z=/((java|vb)script|mhtml):/i,W=function(e){var t,n;for(t=$.length;t--&&$[t].name!==e;);if(t>=0){for(n=$.length-1;n>=t;n--)e=$[n],e.valid&&s(e.name);$.length=t}},K=function(t,n,r,i,o){var a,s,c=/[\s\u0000-\u001F]+/g;if(n=n.toLowerCase(),r=n in b?n:q(r||i||o||""),x&&!v&&RT(n)===!1){if(a=S[n],!a&&N){for(s=N.length;s--&&(a=N[s],!a.pattern.test(n)););s===-1&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(H[n]&&!e.allow_script_urls){var l=r.replace(c,"");try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}if(z.test(l))return;if(PT(e,l))return}v&&(n in H||0===n.indexOf("on"))||(h.map[n]=r,h.push({name:n,value:r}))};for(P=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),F=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,_=t.getShortEndedElements(),B=e.self_closing_elements||t.getSelfClosingElements(),b=t.getBoolAttrs(),x=e.validate,y=e.remove_internals,M=e.fix_self_closing,I=t.getSpecialElements(),O=n+">";u=P.exec(O);){if(V<u.index&&o(q(n.substr(V,u.index-V))),d=u[6])d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),W(d);else if(d=u[7]){if(u.index+u[0].length>n.length){o(q(n.substr(u.index))),V=u.index+u[0].length;continue}if(d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),w=d in _,M&&B[d]&&$.length>0&&$[$.length-1].name===d&&W(d),!x||(C=t.getElementRule(d))){if(k=!0,x&&(S=C.attributes,N=C.attributePatterns),(T=u[8])?(v=T.indexOf("data-mce-type")!==-1,v&&y&&(k=!1),h=[],h.map={},T.replace(F,K)):(h=[],h.map={}),x&&!v){if(A=C.attributesRequired,j=C.attributesDefault,D=C.attributesForced,R=C.removeEmptyAttrs,R&&!h.length&&(k=!1),D)for(p=D.length;p--;)E=D[p],m=E.name,L=E.value,"{$uid}"===L&&(L="mce_"+U++),h.map[m]=L,h.push({name:m,value:L});if(j)for(p=j.length;p--;)E=j[p],m=E.name,m in h.map||(L=E.value,"{$uid}"===L&&(L="mce_"+U++),h.map[m]=L,h.push({name:m,value:L}));if(A){for(p=A.length;p--&&!(A[p]in h.map););p===-1&&(k=!1)}if(E=h.map["data-mce-bogus"]){if("all"===E){V=FT(t,n,P.lastIndex),P.lastIndex=V;continue}k=!1}}k&&a(d,h,w)}else k=!1;if(f=I[d]){f.lastIndex=V=u.index+u[0].length,(u=f.exec(n))?(k&&(g=n.substr(V,u.index-V)),V=u.index+u[0].length):(g=n.substr(V),V=n.length),k&&(g.length>0&&o(g,!0),s(d)),P.lastIndex=V;continue}w||(T&&T.indexOf("/")===T.length-1?k&&s(d):$.push({name:d,valid:k}))}else(d=u[1])?(">"===d.charAt(0)&&(d=" "+d),e.allow_conditional_comments||"[if"!==d.substr(0,3).toLowerCase()||(d=" "+d),r(d)):(d=u[2])?i(BT(d)):(d=u[3])?l(d):(d=u[4])&&c(d,u[5]);V=u.index+u[0].length}for(V<n.length&&o(q(n.substr(V))),p=$.length-1;p>=0;p--)d=$[p],d.valid&&s(d.name)};return{parse:u}}function X(e){var t,n,r=this,i=0,o=[],a=0,s=function(){return 0===a},c=function(e){s()&&(r.typing=e)},l=function(t){e.setDirty(t)},u=function(e){c(!1),r.add({},e)},d=function(){r.typing&&(c(!1),r.add())};e.on("init",function(){r.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(d(),r.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&u(e)}),e.on("ObjectResizeStart Cut",function(){r.beforeChange()}),e.on("SaveContent ObjectResized blur",u),e.on("DragEnd",u),e.on("KeyUp",function(t){var i=t.keyCode;t.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||t.ctrlKey)&&(u(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),n&&r.typing&&xS.isEq(xS.createFromEditor(e),o[0])===!1&&(e.isDirty()===!1&&(l(!0),e.fire("change",{level:o[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&t<=36||t>=37&&t<=40||45===t)return void(r.typing&&u(e));var i=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||r.typing||i||(r.beforeChange(),c(!0),r.add({},e),n=!0)}}),e.on("MouseDown",function(e){r.typing&&u(e)});var f=function(e){return"insertReplacementText"===e.inputType},h=function(e){return"insertText"===e.inputType&&null===e.data};return e.on("input",function(e){e.inputType&&(f(e)||h(e))&&u(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),r={data:o,typing:!1,beforeChange:function(){s()&&(t=mf.getUndoBookmark(e.selection))},add:function(n,r){var a,c,u,d=e.settings;if(u=xS.createFromEditor(e),n=n||{},n=xr.extend(n,u),s()===!1||e.removed)return null;if(c=o[i],e.fire("BeforeAddUndo",{level:n,lastLevel:c,originalEvent:r}).isDefaultPrevented())return null;if(c&&xS.isEq(c,n))return null;if(o[i]&&(o[i].beforeBookmark=t),d.custom_undo_redo_levels&&o.length>d.custom_undo_redo_levels){for(a=0;a<o.length-1;a++)o[a]=o[a+1];o.length--,i=o.length}n.bookmark=mf.getUndoBookmark(e.selection),i<o.length-1&&(o.length=i+1),o.push(n),i=o.length-1;var f={level:n,lastLevel:c,originalEvent:r};return e.fire("AddUndo",f),i>0&&(l(!0),e.fire("change",f)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,c(!1)),i>0&&(t=o[--i],xS.applyToEditor(e,t,!0),l(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return i<o.length-1&&(t=o[++i],xS.applyToEditor(e,t,!1),l(!0),e.fire("redo",{level:t})),t},clear:function(){o=[],i=0,r.typing=!1,r.data=o,e.fire("ClearUndos")},hasUndo:function(){return i>0||r.typing&&o[0]&&!xS.isEq(xS.createFromEditor(e),o[0])},hasRedo:function(){return i<o.length-1&&!r.typing},transact:function(e){return d(),r.beforeChange(),r.ignore(e),r.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a,s;r.transact(t)&&(s=o[i].bookmark,a=o[i-1],xS.applyToEditor(e,a,!0),r.transact(n)&&(o[i-1].beforeBookmark=s))}}}function Y(e){var t={},n=function(e){return e?t[e]:t},r=function(e,n){e&&("string"!=typeof e?xr.each(e,function(e,t){r(t,e)}):(n=n.length?n:[n],xr.each(n,function(e){"undefined"==typeof e.deep&&(e.deep=!e.selector),"undefined"==typeof e.split&&(e.split=!e.selector||e.inline),"undefined"==typeof e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),t[e]=n))},i=function(e){return e&&t[e]&&delete t[e],t};return r(JN.get(e.dom)),r(e.settings.formats),{get:n,register:r,unregister:i}}function J(e){var t=Y(e),n=Xc(null);return cA.setup(e),ZS(e),{get:t.get,register:t.register,unregister:t.unregister,apply:be(qN.applyFormat,e),remove:be(xN.remove,e),toggle:be(aA.toggle,e,t),match:be(OS.match,e),matchAll:be(OS.matchAll,e),matchNode:be(OS.matchNode,e),canApply:be(OS.canApply,e),formatChanged:be(XN.formatChanged,e,n),getCssText:be(iA.getCssText,e)}}function G(e,t){void 0===t&&(t=w());var n={},r=[],i={},o={};e=e||{},e.validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var n,r,i,o,a,c,l,u,d,f,h,p,g,m,v,y;for(p=IA("tr,td,th,tbody,thead,tfoot,table"),f=t.getNonEmptyElements(),h=t.getWhiteSpaceElements(),g=t.getTextBlockElements(),m=t.getSpecialElements(),n=0;n<e.length;n++)if(r=e[n],r.parent&&!r.fixed)if(g[r.name]&&"li"===r.parent.name){for(v=r.next;v&&g[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(o=[r],i=r.parent;i&&!t.isValidChild(i.name,r.name)&&!p[i.name];i=i.parent)o.push(i);if(i&&o.length>1){for(o.reverse(),a=c=s(o[0].clone()),d=0;d<o.length-1;d++){for(t.isValidChild(c.name,o[d].name)?(l=s(o[d].clone()),c.append(l)):l=c,u=o[d].firstChild;u&&u!==o[d+1];)y=u.next,l.append(u),u=y;c=l}BA(t,f,h,a)?i.insert(r,o[0],!0):(i.insert(a,o[0],!0),i.insert(r,a)),i=o[0],(BA(t,f,h,i)||OA(i,"br"))&&i.empty().remove()}else if(r.parent){if("li"===r.name){if(v=r.prev,v&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if(v=r.next,v&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(s(new AA("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(s(new AA("div",1))):m[r.name]?r.empty().remove():r.unwrap()}}},s=function(e){var t,a,s;a in n&&(s=i[a],s?s.push(e):i[a]=[e]),t=r.length;for(;t--;)a=r[t].name,a in e.attributes.map&&(s=o[a],s?s.push(e):o[a]=[e]);return e},c=function(e,t){LA(MA(e),function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)})},l=function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},u=function(e,t){LA(MA(e),function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})})},d=function(){return[].concat(r)},f=function(s,c){var l,u,d,f,h,p,g,m,v,y,_,b=[];c=c||{},i={},o={},v=VA(IA("script,style,head,html,body,title,meta,param"),t.getBlockElements());var w=t.getNonEmptyElements(),x=t.children,C=e.validate,k="forced_root_block"in c?c.forced_root_block:e.forced_root_block,E=t.getWhiteSpaceElements(),T=/^[ \t\r\n]+/,S=/[ \t\r\n]+$/,N=/[ \t\r\n]+/g,A=/^[ \t\r\n]+$/;y=E.hasOwnProperty(c.context)||E.hasOwnProperty(e.root_name);var j=function(){var n,r,i=B.firstChild,o=function(e){e&&(i=e.firstChild,i&&3===i.type&&(i.value=i.value.replace(T,"")),i=e.lastChild,i&&3===i.type&&(i.value=i.value.replace(S,"")))};if(t.isValidChild(B.name,k.toLowerCase())){for(;i;)n=i.next,3===i.type||1===i.type&&"p"!==i.name&&!v[i.name]&&!i.attr("data-mce-type")?r?r.append(i):(r=D(k,1),r.attr(e.forced_root_block_attrs),B.insert(r,i),r.append(i)):(o(r),r=null),i=n;o(r)}},D=function(e,t){var r,o=new AA(e,t);return e in n&&(r=i[e],r?r.push(o):i[e]=[o]),o},O=function(e){var n,r,i,o,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if(i=n.value.replace(S,""),i.length>0)return void(n.value=i);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}o=n.prev,n.remove(),n=o}},R=function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n};l=IT({validate:C,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:R(t.getSelfClosingElements()),cdata:function(e){_.append(D("#cdata",4)).value=e},text:function(e,t){var n;y||(e=e.replace(N," "),PA(_.lastChild,v)&&(e=e.replace(T,""))),0!==e.length&&(n=D("#text",3),n.raw=!!t,_.append(n).value=e)},comment:function(e){_.append(D("#comment",8)).value=e},pi:function(e,t){_.append(D(e,7)).value=t,O(_)},doctype:function(e){var t;t=_.append(D("#doctype",10)),t.value=e,O(_)},start:function(e,n,i){var a,s,c,l,u;if(c=C?t.getElementRule(e):{}){for(a=D(c.outputName||e,1),a.attributes=n,a.shortEnded=i,_.append(a),u=x[_.name],u&&x[a.name]&&!u[a.name]&&b.push(a),s=r.length;s--;)l=r[s].name,l in n.map&&(g=o[l],g?g.push(a):o[l]=[a]);v[e]&&O(a),i||(_=a),!y&&E[e]&&(y=!0)}},end:function(n){var r,i,o,a,s;if(i=C?t.getElementRule(n):{}){if(v[n]&&!y){if(r=_.firstChild,r&&3===r.type)if(o=r.value.replace(T,""),o.length>0)r.value=o,r=r.next;else for(a=r.next,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.next,(0===o.length||A.test(o))&&(r.remove(),r=a),r=a;if(r=_.lastChild,r&&3===r.type)if(o=r.value.replace(S,""),o.length>0)r.value=o,r=r.prev;else for(a=r.prev,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.prev,(0===o.length||A.test(o))&&(r.remove(),r=a),r=a}if(y&&E[n]&&(y=!1),i.removeEmpty&&BA(t,w,E,_)&&!_.attributes.map.name&&!_.attr("id"))return s=_.parent,v[_.name]?_.empty().remove():_.unwrap(),void(_=s);i.paddEmpty&&(DA(_)||BA(t,w,E,_))&&jA(e,c,v,_),_=_.parent}}},t);var B=_=new AA(c.context||e.root_name,11);if(l.parse(s),C&&b.length&&(c.context?c.invalid=!0:a(b)),k&&("body"===B.name||c.isRootContent)&&j(),!c.invalid){for(m in i){for(g=n[m],u=i[m],h=u.length;h--;)u[h].parent||u.splice(h,1);for(d=0,f=g.length;d<f;d++)g[d](u,m,c)}for(d=0,f=r.length;d<f;d++)if(g=r[d],g.name in o){for(u=o[g.name],h=u.length;h--;)u[h].parent||u.splice(h,1);for(h=0,p=g.callbacks.length;h<p;h++)g.callbacks[h](u,g.name,c)}}return B},h={schema:t,addAttributeFilter:u,getAttributeFilters:d,addNodeFilter:c,getNodeFilters:l,filterNode:s,parse:f};return FA(h,e),EA.register(h,e),h}function Z(e,t){var n,r,i,o=["data-mce-selected"];n=t&&t.dom?t.dom:Cc.DOM,r=t&&t.schema?t.schema:w(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,i=G(e,r),gA.register(i,e,n);var a=function(o,a){var s=fA({format:"html"},a?a:{}),c=_A.process(t,o,s),l=qA(n,c,s),u=HA(i,l,s);return"tree"===s.format?u:WA(t,e,r,u,s)};return{schema:r,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:a,addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:be($A,i,o),getTempAttrs:function(){return o}}}function Q(e,t){var n=Z(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function ee(e){return{getBookmark:be(Ig.getBookmark,e),moveToBookmark:be(Ig.moveToBookmark,e)}}function te(e){var t=xr.each,n=TT.BACKSPACE,r=TT.DELETE,i=e.dom,o=e.selection,a=e.settings,s=e.parser,c=St.gecko,l=St.ie,u=St.webkit,d="data:text/mce-internal,",f=l?"Text":"URL",h=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},p=function(e){return e.isDefaultPrevented()},g=function(t){var n,r;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&o.select(t.target),n=e.selection.getContent(),n.length>0&&(r=d+escape(e.id)+","+escape(n),t.dataTransfer.setData(f,r)))},m=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(f),t&&t.indexOf(d)>=0)?(t=t.substr(d.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null},v=function(t,n){e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:t,internal:n}):e.execCommand("mceInsertContent",!1,t)},y=function(){var t=function(e){var t=i.create("body"),n=e.cloneContents();return t.appendChild(n),o.serializer.serialize(t,{format:"html"})},a=function(n){var r=t(n),o=i.createRng();o.selectNode(e.getBody());var a=t(o);return r===a};e.on("keydown",function(t){var o,s,c=t.keyCode;if(!p(t)&&(c===r||c===n)){if(o=e.selection.isCollapsed(),s=e.getBody(),o&&!i.isEmpty(s))return;if(!o&&!a(e.selection.getRng()))return;t.preventDefault(),e.setContent(""),s.firstChild&&i.isBlock(s.firstChild)?e.selection.setCursorLocation(s.firstChild,0):e.selection.setCursorLocation(s,0),e.nodeChanged()}})},_=function(){e.shortcuts.add("meta+a",null,"SelectAll")},b=function(){e.settings.content_editable||i.bind(e.getDoc(),"mousedown mouseup",function(t){var n;if(t.target===e.getDoc().documentElement)if(n=o.getRng(),e.getBody().focus(),"mousedown"===t.type){if(Nu(n.startContainer))return;o.placeCaretAt(t.clientX,t.clientY)}else o.setRng(n)})},w=function(){e.on("keydown",function(t){if(!p(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(o.isCollapsed()&&0===o.getRng().startOffset){var r=o.getNode(),a=r.previousSibling;if("HR"===r.nodeName)return i.remove(r),void t.preventDefault();a&&a.nodeName&&"hr"===a.nodeName.toLowerCase()&&(i.remove(a),t.preventDefault())}}})},x=function(){Range.prototype.getClientRects||e.on("mousedown",function(t){if(!p(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),Ft.setEditorTimeout(e,function(){n.focus()})}})},C=function(){e.on("click",function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==i.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&i.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),o.select(n))})},k=function(){var n=function(){var n=i.getAttribs(o.getStart().cloneNode(!1));return function(){var r=o.getStart();r!==e.getBody()&&(i.setAttrib(r,"style",null),t(n,function(e){r.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!o.isCollapsed()&&i.getParent(o.getStart(),i.isBlock)!==i.getParent(o.getEnd(),i.isBlock)};e.on("keypress",function(t){var i;if(!p(t)&&(8===t.keyCode||46===t.keyCode)&&r())return i=n(),e.getDoc().execCommand("delete",!1,null),i(),t.preventDefault(),!1}),i.bind(e.getDoc(),"cut",function(t){var i;!p(t)&&r()&&(i=n(),Ft.setEditorTimeout(e,function(){i()}))})},E=function(){e.on("keydown",function(e){if(!p(e)&&e.keyCode===n&&o.isCollapsed()&&0===o.getRng().startOffset){var t=o.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},T=function(){e.on("keydown",function(t){var n,r,a,s,c;if(!p(t)&&t.keyCode===TT.BACKSPACE&&(n=o.getRng(),r=n.startContainer,a=n.startOffset,s=i.getRoot(),c=r,n.collapsed&&0===a)){for(;c&&c.parentNode&&c.parentNode.firstChild===c&&c.parentNode!==s;)c=c.parentNode;"BLOCKQUOTE"===c.tagName&&(e.formatter.toggle("blockquote",null,c),n=i.createRng(),n.setStart(r,0),n.setEnd(r,0),o.setRng(n))}})},S=function(){var t=function(){h("StyleWithCSS",!1),h("enableInlineTableEditing",!1),a.object_resizing||h("enableObjectResizing",!1)};a.readonly||e.on("BeforeExecCommand MouseDown",t)},N=function(){var n=function(){t(i.select("a"),function(e){var t=e.parentNode,n=i.getRoot();if(t.lastChild===e){for(;t&&!i.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}i.add(t,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||n()})},A=function(){a.forced_root_block&&e.on("init",function(){h("DefaultParagraphSeparator",a.forced_root_block)})},j=function(){e.on("keyup focusin mouseup",function(e){TT.modifierPressed(e)||o.normalize()},!0)},D=function(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},O=function(){e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()})},R=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(t){var n;if("HTML"===t.target.nodeName){if(St.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}}))},B=function(){St.mac&&e.on("keydown",function(t){!TT.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})},P=function(){h("AutoUrlDetect",!1)},F=function(){e.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},I=function(){e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(e){e.preventDefault()})})},L=function(){s.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})},M=function(){e.on("dragstart",function(e){g(e)}),e.on("drop",function(t){if(!p(t)){var n=m(t);if(n&&n.id!==e.id){t.preventDefault();var r=rj.fromPoint(t.x,t.y,e.getDoc());o.setRng(r),v(n.html,!0)}}})},V=function(){},$=function(){var t;return!c||e.removed?0:(t=e.selection.getSel(),!t||!t.rangeCount||0===t.rangeCount)};return T(),y(),St.windowsPhone||j(),u&&(b(),C(),A(),I(),E(),L(),St.iOS?(O(),R(),F()):_()),St.ie>=11&&(R(),E()),St.ie&&(_(),P(),M()),c&&(w(),x(),k(),S(),N(),D(),B(),E()),{refreshContentEditable:V,isHidden:$}}function ne(e){var t=function(t,n){return gm.walk(e,t,n)},n=PS.split,r=function(t){return Sx.normalize(e,t).fold(ye(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})};return{walk:t,split:n,normalize:r}}var re,ie,oe,ae,se,ce,le,ue,de,fe,he,pe,ge,me=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},ve=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},ye=function(e){return function(){return e}},_e=function(e){return e},be=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},we=function(e){return function(){throw new Error(e)}},xe=ye(!1),Ce=ye(!0),ke=xe,Ee=Ce,Te=function(){return Se},Se=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},i=function(){return null},o=function(){},a={fold:function(e,t){return e()},is:ke,isSome:ke,isNone:Ee,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i,getOrUndefined:o,or:n,orThunk:t,map:Te,ap:Te,each:r,bind:Te,flatten:Te,exists:ke,forall:Ee,filter:Te,equals:e,equals_:e,toArray:function(){return[]},toString:ye("none()")};return Object.freeze&&Object.freeze(a),a}(),Ne=function(e){var t=function(){return e},n=function(){return o},r=function(t){return Ne(t(e))},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:Ee,isNone:ke,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(Te,function(t){return Ne(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?o:Se},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(ke,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},Ae=function(e){return null===e||void 0===e?Se:Ne(e)},je={some:Ne,none:Te,from:Ae},De=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},Oe=function(e){return function(t){return De(t)===e}},Re=Oe("string"),Be=Oe("object"),Pe=Oe("array"),Fe=Oe("null"),Ie=Oe("boolean"),Le=Oe("function"),Me=Oe("number"),Ve=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return Qe(e,t)};return void 0===e?n:t}(),$e=function(e,t){var n=Ve(e,t);return n===-1?je.none():je.some(n)},Ue=function(e,t){return Ve(e,t)>-1},qe=function(e,t){return Ze(e,t).isSome()},He=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},ze=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n,e)}},We=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];t(r,n,e)}},Ke=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i],s=t(a,i,e)?n:r;s.push(a)}return{pass:n,fail:r}},Xe=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},Ye=function(e,t,n){return We(e,function(e){n=t(n,e)}),n},Je=function(e,t,n){return ze(e,function(e){n=t(n,e)}),n},Ge=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return je.some(i)}return je.none()},Ze=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return je.some(n)}return je.none()},Qe=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},et=Array.prototype.push,tt=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);et.apply(t,e[n])}return t},nt=function(e,t){var n=He(e,t);return tt(n)},rt=function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(t(i,n,e)!==!0)return!1}return!0},it=Array.prototype.slice,ot=function(e){var t=it.call(e,0);return t.reverse(),t},at=function(e,t){return Xe(e,function(e){return!Ue(t,e)})},st=function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n},ct=function(e,t){var n=it.call(e,0);return n.sort(t),n},lt=function(e){return 0===e.length?je.none():je.some(e[0])},ut=function(e){return 0===e.length?je.none():je.some(e[e.length-1])},dt=Le(Array.from)?Array.from:function(e){return it.call(e)},ft="undefined"!=typeof window?window:Function("return this;")(),ht=function(e,t){for(var n=void 0!==t&&null!==t?t:ft,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},pt=function(e,t){var n=e.split(".");return ht(n,t)},gt=function(e,t){return pt(e,t)},mt=function(e,t){var n=gt(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},vt={getOrDie:mt},yt=function(){return vt.getOrDie("URL")},_t=function(e){return yt().createObjectURL(e)},bt=function(e){yt().revokeObjectURL(e)},wt={createObjectURL:_t,revokeObjectURL:bt},xt=navigator,Ct=xt.userAgent,kt=function(e){return"matchMedia"in window&&matchMedia(e).matches};re=!1,de=/Android/.test(Ct),ie=/WebKit/.test(Ct),oe=!ie&&!re&&/MSIE/gi.test(Ct)&&/Explorer/gi.test(xt.appName),oe=oe&&/MSIE (\w+)\./.exec(Ct)[1],ae=Ct.indexOf("Trident/")!==-1&&(Ct.indexOf("rv:")!==-1||xt.appName.indexOf("Netscape")!==-1)&&11,se=Ct.indexOf("Edge/")!==-1&&!oe&&!ae&&12,oe=oe||ae||se,ce=!ie&&!ae&&/Gecko/.test(Ct),le=Ct.indexOf("Mac")!==-1,ue=/(iPad|iPhone)/.test(Ct),
fe="FormData"in window&&"FileReader"in window&&"URL"in window&&!!wt.createObjectURL,he=kt("only screen and (max-device-width: 480px)")&&(de||ue),pe=kt("only screen and (min-width: 800px)")&&(de||ue),ge=Ct.indexOf("Windows Phone")!==-1,se&&(ie=!1);var Et,Tt=!ue||fe||parseInt(Ct.match(/AppleWebKit\/(\d*)/)[1],10)>=534,St={opera:re,webkit:ie,ie:oe,gecko:ce,mac:le,iOS:ue,android:de,contentEditable:Tt,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==oe,range:window.getSelection&&"Range"in window,documentMode:oe&&!se?document.documentMode||7:10,fileApi:fe,ceFalse:oe===!1||oe>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:oe===!1||oe>11,desktop:!he&&!pe,windowsPhone:ge},Nt=function(){function e(e,t){return function(){e.apply(t,arguments)}}function n(e){var t=this;return null===this._state?void this._deferreds.push(e):void u(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void s(e(n,t),e(r,this),e(i,this))}this._state=!0,this._value=t,o.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,o.call(this)}function o(){for(var e=0,t=this._deferreds.length;e<t;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function s(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(t,e(r,this),e(i,this))},u=l.immediateFn||"function"==typeof t&&t||function(e){setTimeout(e,1)};return l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){var r=this;return new l(function(i,o){n.call(r,new a(e,t,i,o))})},l.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new l(function(t,n){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(o,e)},n)}e[o]=a,0===--i&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)r(o,e[o])})},l.resolve=function(e){return e&&"object"==typeof e&&e.constructor===l?e:new l(function(t){t(e)})},l.reject=function(e){return new l(function(t,n){n(e)})},l.race=function(e){return new l(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},l},At=window.Promise?window.Promise:Nt(),jt=function(e,t){var n,r=window.requestAnimationFrame,i=["ms","moz","webkit"],o=function(e){window.setTimeout(e,0)};for(n=0;n<i.length&&!r;n++)r=window[i[n]+"RequestAnimationFrame"];r||(r=o),r(e,t)},Dt=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},Ot=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},Rt=function(e){return clearTimeout(e)},Bt=function(e){return clearInterval(e)},Pt=function(e,t){var n,r;return r=function(){var r=arguments;clearTimeout(n),n=Dt(function(){e.apply(this,r)},t)},r.stop=function(){clearTimeout(n)},r},Ft={requestAnimationFrame:function(e,t){return Et?void Et.then(e):void(Et=new At(function(e){t||(t=document.body),jt(e,t)}).then(e))},setTimeout:Dt,setInterval:Ot,setEditorTimeout:function(e,t,n){return Dt(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r;return r=Ot(function(){e.removed?clearInterval(r):t()},n)},debounce:Pt,throttle:Pt,clearInterval:Bt,clearTimeout:Rt},It="mce-data-",Lt=/^(?:mouse|contextmenu)|click/,Mt={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Vt=function(e){return e.isDefaultPrevented===Ut||e.isDefaultPrevented===$t},$t=function(){return!1},Ut=function(){return!0},qt=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Ht=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},zt=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&n.length>0)return n[0]}return t},Wt=function(e,t){var n,r=t||{};for(n in e)Mt[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||document),St.experimentalShadowDom&&(r.target=zt(e,r.target)),e&&Lt.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var i=r.target.ownerDocument||document,o=i.documentElement,a=i.body;r.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),r.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=Ut,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=Ut,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=Ut,r.stopPropagation()},Vt(r)===!1&&(r.isDefaultPrevented=$t,r.isPropagationStopped=$t,r.isImmediatePropagationStopped=$t),"undefined"==typeof r.metaKey&&(r.metaKey=!1),r},Kt=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded)return void t(i);var o=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(i))},s=function(){o()&&(Ht(r,"readystatechange",s),a())},c=function(){try{r.documentElement.doScroll("left")}catch(e){return void Ft.setTimeout(c)}a()};!r.addEventListener||St.ie&&St.ie<11?(qt(r,"readystatechange",s),r.documentElement.doScroll&&e.self===e.top&&c()):o()?a():qt(e,"DOMContentLoaded",a),qt(e,"load",a)},Xt=function(){var e,t,n,r,i,o=this,a={};t=It+(+new Date).toString(32),r="onmouseenter"in document.documentElement,n="onfocusin"in document.documentElement,i={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,o.domLoaded=!1,o.events=a;var s=function(e,t){var n,r,i,o,s=a[t];if(n=s&&s[e.type])for(r=0,i=n.length;r<i;r++)if(o=n[r],o&&o.func.call(o.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return};o.bind=function(c,l,u,d){var f,h,p,g,m,v,y,_=window,b=function(e){s(Wt(e||_.event),f)};if(c&&3!==c.nodeType&&8!==c.nodeType){for(c[t]?f=c[t]:(f=e++,c[t]=f,a[f]={}),d=d||c,l=l.split(" "),p=l.length;p--;)g=l[p],v=b,m=y=!1,"DOMContentLoaded"===g&&(g="ready"),o.domLoaded&&"ready"===g&&"complete"===c.readyState?u.call(d,Wt({type:g})):(r||(m=i[g],m&&(v=function(e){var t,n;if(t=e.currentTarget,n=e.relatedTarget,n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||(e=Wt(e||_.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,s(e,f))})),n||"focusin"!==g&&"focusout"!==g||(y=!0,m="focusin"===g?"focus":"blur",v=function(e){e=Wt(e||_.event),e.type="focus"===e.type?"focusin":"focusout",s(e,f)}),h=a[f][g],h?"ready"===g&&o.domLoaded?u({type:g}):h.push({func:u,scope:d}):(a[f][g]=h=[{func:u,scope:d}],h.fakeName=m,h.capture=y,h.nativeHandler=v,"ready"===g?Kt(c,v,o):qt(c,m||g,v,y)));return c=h=0,u}},o.unbind=function(e,n,r){var i,s,c,l,u,d;if(!e||3===e.nodeType||8===e.nodeType)return o;if(i=e[t]){if(d=a[i],n){for(n=n.split(" "),c=n.length;c--;)if(u=n[c],s=d[u]){if(r)for(l=s.length;l--;)if(s[l].func===r){var f=s.nativeHandler,h=s.fakeName,p=s.capture;s=s.slice(0,l).concat(s.slice(l+1)),s.nativeHandler=f,s.fakeName=h,s.capture=p,d[u]=s}r&&0!==s.length||(delete d[u],Ht(e,s.fakeName||u,s.nativeHandler,s.capture))}}else{for(u in d)s=d[u],Ht(e,s.fakeName||u,s.nativeHandler,s.capture);d={}}for(u in d)return o;delete a[i];try{delete e[t]}catch(n){e[t]=null}}return o},o.fire=function(e,n,r){var i;if(!e||3===e.nodeType||8===e.nodeType)return o;r=Wt(null,r),r.type=n,r.target=e;do i=e[t],i&&s(r,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!r.isPropagationStopped());return o},o.clean=function(e){var n,r,i=o.unbind;if(!e||3===e.nodeType||8===e.nodeType)return o;if(e[t]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),r=e.getElementsByTagName("*"),n=r.length;n--;)e=r[n],e[t]&&i(e);return o},o.destroy=function(){a={}},o.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};Xt.Event=new Xt,Xt.Event.bind(window,"ready",function(){});var Yt,Jt,Gt,Zt,Qt,en,tn,nn,rn,on,an,sn,cn,ln,un,dn,fn,hn,pn,gn="sizzle"+-new Date,mn=window.document,vn=0,yn=0,_n=n(),bn=n(),wn=n(),xn=function(e,t){return e===t&&(an=!0),0},Cn="undefined",kn=1<<31,En={}.hasOwnProperty,Tn=[],Sn=Tn.pop,Nn=Tn.push,An=Tn.push,jn=Tn.slice,Dn=Tn.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},On="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Rn="[\\x20\\t\\r\\n\\f]",Bn="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Pn="\\["+Rn+"*("+Bn+")(?:"+Rn+"*([*^$|!~]?=)"+Rn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Bn+"))|)"+Rn+"*\\]",Fn=":("+Bn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Pn+")*)|.*)\\)|)",In=new RegExp("^"+Rn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Rn+"+$","g"),Ln=new RegExp("^"+Rn+"*,"+Rn+"*"),Mn=new RegExp("^"+Rn+"*([>+~]|"+Rn+")"+Rn+"*"),Vn=new RegExp("="+Rn+"*([^\\]'\"]*?)"+Rn+"*\\]","g"),$n=new RegExp(Fn),Un=new RegExp("^"+Bn+"$"),qn={ID:new RegExp("^#("+Bn+")"),CLASS:new RegExp("^\\.("+Bn+")"),TAG:new RegExp("^("+Bn+"|[*])"),ATTR:new RegExp("^"+Pn),PSEUDO:new RegExp("^"+Fn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Rn+"*(even|odd|(([+-]|)(\\d*)n|)"+Rn+"*(?:([+-]|)"+Rn+"*(\\d+)|))"+Rn+"*\\)|)","i"),bool:new RegExp("^(?:"+On+")$","i"),needsContext:new RegExp("^"+Rn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Rn+"*((?:-\\d)?\\d*)"+Rn+"*\\)|)(?=[^-]|$)","i")},Hn=/^(?:input|select|textarea|button)$/i,zn=/^h\d$/i,Wn=/^[^{]+\{\s*\[native \w/,Kn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Xn=/[+~]/,Yn=/'|\\/g,Jn=new RegExp("\\\\([\\da-f]{1,6}"+Rn+"?|("+Rn+")|.)","ig"),Gn=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{An.apply(Tn=jn.call(mn.childNodes),mn.childNodes),Tn[mn.childNodes.length].nodeType}catch(e){An={apply:Tn.length?function(e,t){Nn.apply(e,jn.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var Zn=function(e,t,n,r){var i,o,a,s,l,d,f,h,p,g;if((t?t.ownerDocument||t:mn)!==cn&&sn(t),t=t||cn,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(un&&!r){if(i=Kn.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&pn(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return An.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&Jt.getElementsByClassName)return An.apply(n,t.getElementsByClassName(a)),n}if(Jt.qsa&&(!dn||!dn.test(e))){if(h=f=gn,p=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(d=en(e),(f=t.getAttribute("id"))?h=f.replace(Yn,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=d.length;l--;)d[l]=h+u(d[l]);p=Xn.test(e)&&c(t.parentNode)||t,g=d.join(",")}if(g)try{return An.apply(n,p.querySelectorAll(g)),n}catch(e){}finally{f||t.removeAttribute("id")}}}return nn(e.replace(In,"$1"),t,n,r)};Jt=Zn.support={},Qt=Zn.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},sn=Zn.setDocument=function(e){function t(e){try{return e.top}catch(e){}return null}var n,r=e?e.ownerDocument||e:mn,o=r.defaultView;return r!==cn&&9===r.nodeType&&r.documentElement?(cn=r,ln=r.documentElement,un=!Qt(r),o&&o!==t(o)&&(o.addEventListener?o.addEventListener("unload",function(){sn()},!1):o.attachEvent&&o.attachEvent("onunload",function(){sn()})),Jt.attributes=!0,Jt.getElementsByTagName=!0,Jt.getElementsByClassName=Wn.test(r.getElementsByClassName),Jt.getById=!0,Gt.find.ID=function(e,t){if(typeof t.getElementById!==Cn&&un){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Gt.filter.ID=function(e){var t=e.replace(Jn,Gn);return function(e){return e.getAttribute("id")===t}},Gt.find.TAG=Jt.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Cn)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},Gt.find.CLASS=Jt.getElementsByClassName&&function(e,t){if(un)return t.getElementsByClassName(e)},fn=[],dn=[],Jt.disconnectedMatch=!0,dn=dn.length&&new RegExp(dn.join("|")),fn=fn.length&&new RegExp(fn.join("|")),n=Wn.test(ln.compareDocumentPosition),pn=n||Wn.test(ln.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},xn=n?function(e,t){if(e===t)return an=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!Jt.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===mn&&pn(mn,e)?-1:t===r||t.ownerDocument===mn&&pn(mn,t)?1:on?Dn.call(on,e)-Dn.call(on,t):0:4&n?-1:1)}:function(e,t){if(e===t)return an=!0,0;var n,o=0,a=e.parentNode,s=t.parentNode,c=[e],l=[t];if(!a||!s)return e===r?-1:t===r?1:a?-1:s?1:on?Dn.call(on,e)-Dn.call(on,t):0;if(a===s)return i(e,t);for(n=e;n=n.parentNode;)c.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;c[o]===l[o];)o++;return o?i(c[o],l[o]):c[o]===mn?-1:l[o]===mn?1:0},r):cn},Zn.matches=function(e,t){return Zn(e,null,null,t)},Zn.matchesSelector=function(e,t){if((e.ownerDocument||e)!==cn&&sn(e),t=t.replace(Vn,"='$1']"),Jt.matchesSelector&&un&&(!fn||!fn.test(t))&&(!dn||!dn.test(t)))try{var n=hn.call(e,t);if(n||Jt.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return Zn(t,cn,null,[e]).length>0},Zn.contains=function(e,t){return(e.ownerDocument||e)!==cn&&sn(e),pn(e,t)},Zn.attr=function(e,t){(e.ownerDocument||e)!==cn&&sn(e);var n=Gt.attrHandle[t.toLowerCase()],r=n&&En.call(Gt.attrHandle,t.toLowerCase())?n(e,t,!un):void 0;return void 0!==r?r:Jt.attributes||!un?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},Zn.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Zn.uniqueSort=function(e){var t,n=[],r=0,i=0;if(an=!Jt.detectDuplicates,on=!Jt.sortStable&&e.slice(0),e.sort(xn),an){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return on=null,e},Zt=Zn.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Zt(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=Zt(t);return n},Gt=Zn.selectors={cacheLength:50,createPseudo:r,match:qn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Jn,Gn),e[3]=(e[3]||e[4]||e[5]||"").replace(Jn,Gn),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Zn.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Zn.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return qn.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$n.test(n)&&(t=en(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Jn,Gn).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_n[e+" "];return t||(t=new RegExp("(^|"+Rn+")"+e+"("+Rn+"|$)"))&&_n(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Cn&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=Zn.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,f,h,p,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!c&&!s;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(u=m[gn]||(m[gn]={}),l=u[e]||[],h=l[0]===vn&&l[1],f=l[0]===vn&&l[2],d=h&&m.childNodes[h];d=++h&&d&&d[g]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[vn,h,f];break}}else if(y&&(l=(t[gn]||(t[gn]={}))[e])&&l[0]===vn)f=l[1];else for(;(d=++h&&d&&d[g]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[gn]||(d[gn]={}))[e]=[vn,f]),d!==t)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(e,t){var n,i=Gt.pseudos[e]||Gt.setFilters[e.toLowerCase()]||Zn.error("unsupported pseudo: "+e);return i[gn]?i(t):i.length>1?(n=[e,e,"",t],Gt.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)r=Dn.call(e,o[a]),e[r]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:r(function(e){var t=[],n=[],i=tn(e.replace(In,"$1"));return i[gn]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(t){return Zn(e,t).length>0}}),contains:r(function(e){return e=e.replace(Jn,Gn),function(t){return(t.textContent||t.innerText||Zt(t)).indexOf(e)>-1}}),lang:r(function(e){return Un.test(e||"")||Zn.error("unsupported lang: "+e),e=e.replace(Jn,Gn).toLowerCase(),function(t){var n;do if(n=un?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===ln},focus:function(e){return e===cn.activeElement&&(!cn.hasFocus||cn.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Gt.pseudos.empty(e)},header:function(e){return zn.test(e.nodeName)},input:function(e){return Hn.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},Gt.pseudos.nth=Gt.pseudos.eq;for(Yt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Gt.pseudos[Yt]=o(Yt);for(Yt in{submit:!0,reset:!0})Gt.pseudos[Yt]=a(Yt);l.prototype=Gt.filters=Gt.pseudos,Gt.setFilters=new l,en=Zn.tokenize=function(e,t){var n,r,i,o,a,s,c,l=bn[e+" "];if(l)return t?0:l.slice(0);for(a=e,s=[],c=Gt.preFilter;a;){n&&!(r=Ln.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=Mn.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(In," ")}),a=a.slice(n.length));for(o in Gt.filter)!(r=qn[o].exec(a))||c[o]&&!(r=c[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?Zn.error(e):bn(e,s).slice(0)},tn=Zn.compile=function(e,t){var n,r=[],i=[],o=wn[e+" "];if(!o){for(t||(t=en(e)),n=t.length;n--;)o=m(t[n]),o[gn]?r.push(o):i.push(o);o=wn(e,v(i,r)),o.selector=e}return o},nn=Zn.select=function(e,t,n,r){var i,o,a,s,l,d="function"==typeof e&&e,f=!r&&en(e=d.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&Jt.getById&&9===t.nodeType&&un&&Gt.relative[o[1].type]){if(t=(Gt.find.ID(a.matches[0].replace(Jn,Gn),t)||[])[0],!t)return n;d&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=qn.needsContext.test(e)?0:o.length;i--&&(a=o[i],!Gt.relative[s=a.type]);)if((l=Gt.find[s])&&(r=l(a.matches[0].replace(Jn,Gn),Xn.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&u(o),!e)return An.apply(n,r),n;break}}return(d||tn(e,f))(r,t,!un,n,Xn.test(e)&&c(t.parentNode)||t),n},Jt.sortStable=gn.split("").sort(xn).join("")===gn,Jt.detectDuplicates=!!an,sn(),Jt.sortDetached=!0;var Qn=Array.isArray,er=function(e){var t,n,r=e;if(!Qn(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},tr=function(e,t,n){var r,i;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===!1)return 0}else for(r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e)===!1)return 0;return 1},nr=function(e,t){var n=[];return tr(e,function(r,i){n.push(t(r,i,e))}),n},rr=function(e,t){var n=[];return tr(e,function(r,i){t&&!t(r,i,e)||n.push(r)}),n},ir=function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},or=function(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n},ar=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},sr=function(e,t,n){var r=ar(e,t,n);if(r!==-1)return e[r]},cr=function(e){return e[e.length-1]},lr={isArray:Qn,toArray:er,each:tr,map:nr,filter:rr,indexOf:ir,reduce:or,findIndex:ar,find:sr,last:cr},ur=/^\s*|\s*$/g,dr=function(e){return null===e||void 0===e?"":(""+e).replace(ur,"")},fr=function(e,t){return t?!("array"!==t||!lr.isArray(e))||typeof e===t:void 0!==e},hr=function(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},pr=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},gr=function(e,t,n){var r,i,o,a,s,c=this,l=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],i=c.createNS(e[3].replace(/\.\w+$/,""),n),!i[o]){if("static"===e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},l=1),i[o]=t[o],c.extend(i[o].prototype,t),e[5]&&(r=c.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[o],l?i[o]=function(){return r[a].apply(this,arguments)}:i[o]=function(){return this.parent=r[a],s.apply(this,arguments)},i[o].prototype[o]=i[o],c.each(r,function(e,t){i[o].prototype[t]=r[t]}),c.each(t,function(e,t){r[t]?i[o].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==o&&(i[o].prototype[t]=e)})),c.each(t.static,function(e,t){i[o][t]=e})}},mr=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i,o,a,s,c=arguments;for(i=1,o=c.length;i<o;i++){t=c[i];for(a in t)t.hasOwnProperty(a)&&(s=t[a],void 0!==s&&(e[a]=s))}return e},vr=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),lr.each(e,function(e,i){return t.call(r,e,i,n)!==!1&&void vr(e,t,n,r)}))},yr=function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t},_r=function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;n<r&&(t=t[e[n]]);n++);return t},br=function(e,t){return!e||fr(e,"array")?e:lr.map(e.split(t||","),dr)},wr=function(e){var t=St.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e},xr={trim:dr,isArray:lr.isArray,is:fr,toArray:lr.toArray,makeMap:hr,each:lr.each,map:lr.map,grep:lr.filter,inArray:lr.indexOf,hasOwn:pr,extend:mr,create:gr,walk:vr,createNS:yr,resolve:_r,explode:br,_addCacheSuffix:wr},Cr=document,kr=Array.prototype.push,Er=Array.prototype.slice,Tr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Sr=Xt.Event,Nr=xr.makeMap("children,contents,next,prev"),Ar=function(e){return"undefined"!=typeof e},jr=function(e){return"string"==typeof e},Dr=function(e){return e&&e===e.window},Or=function(e,t){var n,r,i;for(t=t||Cr,i=t.createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return n},Rr=function(e,t,n,r){var i;if(jr(t))t=Or(t,Xr(e[0]));else if(t.length&&!t.nodeType){if(t=Ur.makeArray(t),r)for(i=t.length-1;i>=0;i--)Rr(e,t[i],n,r);else for(i=0;i<t.length;i++)Rr(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e},Br=function(e,t){return e&&t&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1},Pr=function(e,t,n){var r,i;return t=Ur(t)[0],e.each(function(){var e=this;n&&r===e.parentNode?i.appendChild(e):(r=e.parentNode,i=t.cloneNode(!1),e.parentNode.insertBefore(i,e),i.appendChild(e))}),e},Fr=xr.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Ir=xr.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Lr={for:"htmlFor",class:"className",readonly:"readOnly"},Mr={float:"cssFloat"},Vr={},$r={},Ur=function(e,t){return new Ur.fn.init(e,t)},qr=function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},Hr=/^\s*|\s*$/g,zr=function(e){return null===e||void 0===e?"":(""+e).replace(Hr,"")},Wr=function(e,t){var n,r,i,o;if(e)if(n=e.length,void 0===n){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],t.call(o,r,o)===!1))break}else for(i=0;i<n&&(o=e[i],t.call(o,i,o)!==!1);i++);return e},Kr=function(e,t){var n=[];return Wr(e,function(e,r){t(r,e)&&n.push(r)}),n},Xr=function(e){return e?9===e.nodeType?e:e.ownerDocument:Cr};Ur.fn=Ur.prototype={constructor:Ur,selector:"",context:null,length:0,init:function(e,t){var n,r,i=this;if(!e)return i;if(e.nodeType)return i.context=i[0]=e,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return Ur(e).attr(t);i.context=t=document}if(jr(e)){if(i.selector=e,n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Tr.exec(e),!n)return Ur(t).find(e);if(n[1])for(r=Or(e,Xr(t)).firstChild;r;)kr.call(i,r),r=r.nextSibling;else{if(r=Xr(t).getElementById(n[2]),!r)return i;if(r.id!==n[2])return i.find(e);i.length=1,i[0]=r}}else this.add(e,!1);return i},toArray:function(){return xr.toArray(this)},add:function(e,t){var n,r,i=this;if(jr(e))return i.add(Ur(e));if(t!==!1)for(n=Ur.unique(i.toArray().concat(Ur.makeArray(e))),i.length=n.length,r=0;r<n.length;r++)i[r]=n[r];else kr.apply(i,Ur.makeArray(e));return i},attr:function(e,t){var n,r=this;if("object"==typeof e)Wr(e,function(e,t){r.attr(e,t)});else{if(!Ar(t)){if(r[0]&&1===r[0].nodeType){if(n=Vr[e],n&&n.get)return n.get(r[0],e);if(Ir[e])return r.prop(e)?e:void 0;t=r[0].getAttribute(e,2),null===t&&(t=void 0)}return t}this.each(function(){var n;if(1===this.nodeType){if(n=Vr[e],n&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=Lr[e]||e,"object"==typeof e)Wr(e,function(e,t){n.prop(e,t)});else{if(!Ar(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,i=this,o=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)Wr(e,function(e,t){i.css(e,t)});else if(Ar(t))e=o(e),"number"!=typeof t||Fr[e]||(t=t.toString()+"px"),i.each(function(){var n=this.style;if(r=$r[e],r&&r.set)return void r.set(this,t);try{this.style[Mr[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))});else{if(n=i[0],r=$r[e],r&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[o(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(e){return}}return i},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],Sr.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(Ar(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){Ur(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(Ar(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return Rr(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return Rr(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?Rr(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?Rr(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return Ur(e).append(this),this},prependTo:function(e){return Ur(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Pr(this,e)},wrapAll:function(e){return Pr(this,e,!0)},wrapInner:function(e){return this.each(function(){Ur(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){Ur(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),Ur(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(e.indexOf(" ")!==-1?Wr(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var i,o;o=Br(r,e),o!==t&&(i=r.className,o?r.className=zr((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e)}),n)},hasClass:function(e){return Br(this[0],e)},each:function(e){return Wr(this,e)},on:function(e,t){return this.each(function(){Sr.bind(this,e,t)})},off:function(e,t){return this.each(function(){Sr.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?Sr.fire(this,e.type,e):Sr.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new Ur(Er.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)Ur.find(e,this[t],r);return Ur(r)},filter:function(e){return Ur("function"==typeof e?Kr(this.toArray(),function(t,n){return e(n,t)}):Ur.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof Ur&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&Ur(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}}),Ur(t)},offset:function(e){var t,n,r,i,o=0,a=0;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,
r=n.documentElement,t.getBoundingClientRect&&(i=t.getBoundingClientRect(),o=i.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=i.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:o,top:a})},push:kr,sort:[].sort,splice:[].splice},xr.extend(Ur,{extend:xr.extend,makeArray:function(e){return Dr(e)||e.nodeType?[e]:xr.toArray(e)},inArray:qr,isArray:xr.isArray,each:Wr,trim:zr,grep:Kr,find:Zn,expr:Zn.selectors,unique:Zn.uniqueSort,text:Zn.getText,contains:Zn.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?Ur.find.matchesSelector(t[0],e)?[t[0]]:[]:Ur.find.matches(e,t)}});var Yr=function(e,t,n){var r=[],i=e[t];for("string"!=typeof n&&n instanceof Ur&&(n=n[0]);i&&9!==i.nodeType;){if(void 0!==n){if(i===n)break;if("string"==typeof n&&Ur(i).is(n))break}1===i.nodeType&&r.push(i),i=i[t]}return r},Jr=function(e,t,n,r){var i=[];for(r instanceof Ur&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&Ur(e).is(r))break}i.push(e)}return i},Gr=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};Wr({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Yr(e,"parentNode")},next:function(e){return Gr(e,"nextSibling",1)},prev:function(e){return Gr(e,"previousSibling",1)},children:function(e){return Jr(e.firstChild,"nextSibling",1)},contents:function(e){return xr.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){Ur.fn[e]=function(n){var r=this,i=[];return r.each(function(){var e=t.call(i,this,n,i);e&&(Ur.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(Nr[e]||(i=Ur.unique(i)),0===e.indexOf("parents")&&(i=i.reverse())),i=Ur(i),n?i.filter(n):i}}),Wr({parentsUntil:function(e,t){return Yr(e,"parentNode",t)},nextUntil:function(e,t){return Jr(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return Jr(e,"previousSibling",1,t).slice(1)}},function(e,t){Ur.fn[e]=function(n,r){var i=this,o=[];return i.each(function(){var e=t.call(o,this,n,o);e&&(Ur.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(o=Ur.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())),o=Ur(o),r?o.filter(r):o}}),Ur.fn.is=function(e){return!!e&&this.filter(e).length>0},Ur.fn.init.prototype=Ur.fn,Ur.overrideDefaults=function(e){var t,n=function(r,i){return t=t||e(),0===arguments.length&&(r=t.element),i||(i=t.context),new n.fn.init(r,i)};return Ur.extend(n,this),n};var Zr=function(e,t,n){Wr(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})};St.ie&&St.ie<8&&(Zr(Vr,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647!==t)return t},size:function(e){var t=e.size;if(20!==t)return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0!==t.length)return t}}),Zr(Vr,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),St.ie&&St.ie<9&&(Mr.float="styleFloat",Zr($r,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),Ur.attrHooks=Vr,Ur.cssHooks=$r;var Qr,ei,ti,ni=function(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,t=e.apply(null,r)),t}},ri=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},ii=function(e,t){var n=ri(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return si(r(1),r(2))},oi=function(e,t){var n=String(t).toLowerCase();return 0===e.length?ai():ii(e,n)},ai=function(){return si(0,0)},si=function(e,t){return{major:e,minor:t}},ci={nu:si,detect:oi,unknown:ai},li="Edge",ui="Chrome",di="IE",fi="Opera",hi="Firefox",pi="Safari",gi=function(e,t){return function(){return t===e}},mi=function(){return vi({current:void 0,version:ci.unknown()})},vi=function(e){var t=e.current,n=e.version;return{current:t,version:n,isEdge:gi(li,t),isChrome:gi(ui,t),isIE:gi(di,t),isOpera:gi(fi,t),isFirefox:gi(hi,t),isSafari:gi(pi,t)}},yi={unknown:mi,nu:vi,edge:ye(li),chrome:ye(ui),ie:ye(di),opera:ye(fi),firefox:ye(hi),safari:ye(pi)},_i="Windows",bi="iOS",wi="Android",xi="Linux",Ci="OSX",ki="Solaris",Ei="FreeBSD",Ti=function(e,t){return function(){return t===e}},Si=function(){return Ni({current:void 0,version:ci.unknown()})},Ni=function(e){var t=e.current,n=e.version;return{current:t,version:n,isWindows:Ti(_i,t),isiOS:Ti(bi,t),isAndroid:Ti(wi,t),isOSX:Ti(Ci,t),isLinux:Ti(xi,t),isSolaris:Ti(ki,t),isFreeBSD:Ti(Ei,t)}},Ai={unknown:Si,nu:Ni,windows:ye(_i),ios:ye(bi),android:ye(wi),linux:ye(xi),osx:ye(Ci),solaris:ye(ki),freebsd:ye(Ei)},ji=function(e,t){var n=String(t).toLowerCase();return Ge(e,function(e){return e.search(n)})},Di=function(e,t){return ji(e,t).map(function(e){var n=ci.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Oi=function(e,t){return ji(e,t).map(function(e){var n=ci.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Ri={detectBrowser:Di,detectOs:Oi},Bi=function(e,t){return e.indexOf(t)!==-1},Pi=function(e){return e.replace(/^\s+|\s+$/g,"")},Fi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ii=function(e){return function(t){return Bi(t,e)}},Li=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){var t=Bi(e,"edge/")&&Bi(e,"chrome")&&Bi(e,"safari")&&Bi(e,"applewebkit");return t}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fi],search:function(e){return Bi(e,"chrome")&&!Bi(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Bi(e,"msie")||Bi(e,"trident")}},{name:"Opera",versionRegexes:[Fi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ii("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ii("firefox")},{name:"Safari",versionRegexes:[Fi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Bi(e,"safari")||Bi(e,"mobile/"))&&Bi(e,"applewebkit")}}],Mi=[{name:"Windows",search:Ii("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Bi(e,"iphone")||Bi(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ii("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ii("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ii("linux"),versionRegexes:[]},{name:"Solaris",search:Ii("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ii("freebsd"),versionRegexes:[]}],Vi={browsers:ye(Li),oses:ye(Mi)},$i=function(e){var t=Vi.browsers(),n=Vi.oses(),r=Ri.detectBrowser(t,e).fold(yi.unknown,yi.nu),i=Ri.detectOs(n,e).fold(Ai.unknown,Ai.nu),o=y(i,r,e);return{browser:r,os:i,deviceType:o}},Ui={detect:$i},qi=ni(function(){var e=navigator.userAgent;return Ui.detect(e)}),Hi={detect:qi},zi=function(e,t){var n=t||document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return Xi(r.childNodes[0])},Wi=function(e,t){var n=t||document,r=n.createElement(e);return Xi(r)},Ki=function(e,t){var n=t||document,r=n.createTextNode(e);return Xi(r)},Xi=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:ye(e)}},Yi=function(e,t,n){var r=e.dom();return je.from(r.elementFromPoint(t,n)).map(Xi)},Ji={fromHtml:zi,fromTag:Wi,fromText:Ki,fromDom:Xi,fromPoint:Yi},Gi={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Zi=function(e){var t=e.dom().nodeName;return t.toLowerCase()},Qi=function(e){return e.dom().nodeType},eo=function(e){return e.dom().nodeValue},to=function(e){return function(t){return Qi(t)===e}},no=function(e){return Qi(e)===Gi.COMMENT||"#comment"===Zi(e)},ro=to(Gi.ELEMENT),io=to(Gi.TEXT),oo=to(Gi.DOCUMENT),ao={name:Zi,type:Qi,value:eo,isElement:ro,isText:io,isDocument:oo,isComment:no},so=Object.keys,co=function(e,t){for(var n=so(e),r=0,i=n.length;r<i;r++){var o=n[r],a=e[o];t(a,o,e)}},lo=function(e,t){return uo(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},uo=function(e,t){var n={};return co(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},fo=function(e,t){var n={},r={};return co(e,function(e,i){var o=t(e,i)?n:r;o[i]=e}),{t:n,f:r}},ho=function(e,t,n){if(!(Re(n)||Ie(n)||Me(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},po=function(e,t,n){ho(e.dom(),t,n)},go=function(e,t){var n=e.dom();co(t,function(e,t){ho(n,t,e)})},mo=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},vo=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},yo=function(e,t){e.dom().removeAttribute(t)},_o=function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},bo=function(e){return Je(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},wo=function(e,t,n){vo(e,n)&&!vo(t,n)&&po(t,n,mo(e,n))},xo=function(e,t,n){ao.isElement(e)&&ao.isElement(t)&&ze(n,function(n){wo(e,t,n)})},Co={clone:bo,set:po,setAll:go,get:mo,has:vo,remove:yo,hasNone:_o,transfer:xo},ko=function(e){var t=ao.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},Eo=ni(function(){return To(Ji.fromDom(document))}),To=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Ji.fromDom(t)},So={body:Eo,getBody:To,inBody:ko},No=function(e){return void 0!==e.style},Ao={isSupported:No},jo=function(e,t,n){if(!Re(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Ao.isSupported(e)&&e.style.setProperty(t,n)},Do=function(e,t){Ao.isSupported(e)&&e.style.removeProperty(t)},Oo=function(e,t,n){var r=e.dom();jo(r,t,n)},Ro=function(e,t){var n=e.dom();co(t,function(e,t){jo(n,t,e)})},Bo=function(e,t){var n=e.dom();co(t,function(e,t){e.fold(function(){Do(n,t)},function(e){jo(n,t,e)})})},Po=function(e,t){var n=e.dom(),r=window.getComputedStyle(n),i=r.getPropertyValue(t),o=""!==i||So.inBody(e)?i:Fo(n,t);return null===o?void 0:o},Fo=function(e,t){return Ao.isSupported(e)?e.style.getPropertyValue(t):""},Io=function(e,t){var n=e.dom(),r=Fo(n,t);return je.from(r).filter(function(e){return e.length>0})},Lo=function(e){var t={},n=e.dom();if(Ao.isSupported(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}return t},Mo=function(e,t,n){var r=Ji.fromTag(e);Oo(r,t,n);var i=Io(r,t);return i.isSome()},Vo=function(e,t){var n=e.dom();Do(n,t),Co.has(e,"style")&&""===Pi(Co.get(e,"style"))&&Co.remove(e,"style")},$o=function(e,t){var n=Co.get(e,"style"),r=t(e),i=void 0===n?Co.remove:Co.set;return i(e,"style",n),r},Uo=function(e,t){var n=e.dom(),r=t.dom();Ao.isSupported(n)&&Ao.isSupported(r)&&(r.style.cssText=n.style.cssText)},qo=function(e){return e.dom().offsetWidth},Ho=function(e,t,n){Io(e,n).each(function(e){Io(t,n).isNone()&&Oo(t,n,e)})},zo=function(e,t,n){ao.isElement(e)&&ao.isElement(t)&&ze(n,function(n){Ho(e,t,n)})},Wo={copy:Uo,set:Oo,preserve:$o,setAll:Ro,setOptions:Bo,remove:Vo,get:Po,getRaw:Io,getAllRaw:Lo,isValidValue:Mo,reflow:qo,transfer:zo},Ko=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return ze(e,function(e,n){r[e]=ye(t[n])}),r}},Xo=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do i=i.bind(r);while(i.isSome());return n},Yo={toArray:Xo},Jo=function(){var e=vt.getOrDie("Node");return e},Go=function(e,t,n){return 0!==(e.compareDocumentPosition(t)&n)},Zo=function(e,t){return Go(e,t,Jo().DOCUMENT_POSITION_PRECEDING)},Qo=function(e,t){return Go(e,t,Jo().DOCUMENT_POSITION_CONTAINED_BY)},ea={documentPositionPreceding:Zo,documentPositionContainedBy:Qo},ta=Gi.ELEMENT,na=Gi.DOCUMENT,ra=function(e,t){var n=e.dom();if(n.nodeType!==ta)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},ia=function(e){return e.nodeType!==ta&&e.nodeType!==na||0===e.childElementCount},oa=function(e,t){var n=void 0===t?document:t.dom();return ia(n)?[]:He(n.querySelectorAll(e),Ji.fromDom)},aa=function(e,t){var n=void 0===t?document:t.dom();return ia(n)?je.none():je.from(n.querySelector(e)).map(Ji.fromDom)},sa={all:oa,is:ra,one:aa},ca=function(e,t){return e.dom()===t.dom()},la=function(e,t){return e.dom().isEqualNode(t.dom())},ua=function(e,t){return qe(t,be(ca,e))},da=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},fa=function(e,t){return ea.documentPositionContainedBy(e.dom(),t.dom())},ha=Hi.detect().browser,pa=ha.isIE()?fa:da,ga={eq:ca,isEqualNode:la,member:ua,contains:pa,is:sa.is},ma=function(e){return Ji.fromDom(e.dom().ownerDocument)},va=function(e){return Ji.fromDom(e.dom().ownerDocument.documentElement)},ya=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return Ji.fromDom(n)},_a=function(e){var t=e.dom();return je.from(t.parentNode).map(Ji.fromDom)},ba=function(e){return _a(e).bind(function(t){var n=Na(t);return Ze(n,function(t){return ga.eq(e,t)})})},wa=function(e,t){for(var n=Le(t)?t:ye(!1),r=e.dom(),i=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,a=Ji.fromDom(o);if(i.push(a),n(a)===!0)break;r=o}return i},xa=function(e){var t=function(t){return Xe(t,function(t){return!ga.eq(e,t)})};return _a(e).map(Na).map(t).getOr([])},Ca=function(e){var t=e.dom();return je.from(t.offsetParent).map(Ji.fromDom)},ka=function(e){var t=e.dom();return je.from(t.previousSibling).map(Ji.fromDom)},Ea=function(e){var t=e.dom();return je.from(t.nextSibling).map(Ji.fromDom)},Ta=function(e){return ot(Yo.toArray(e,ka))},Sa=function(e){return Yo.toArray(e,Ea)},Na=function(e){var t=e.dom();return He(t.childNodes,Ji.fromDom)},Aa=function(e,t){var n=e.dom().childNodes;return je.from(n[t]).map(Ji.fromDom)},ja=function(e){return Aa(e,0)},Da=function(e){return Aa(e,e.dom().childNodes.length-1)},Oa=function(e){return e.dom().childNodes.length},Ra=function(e){return e.dom().hasChildNodes()},Ba=Ko("element","offset"),Pa=function(e,t){var n=Na(e);return n.length>0&&t<n.length?Ba(n[t],0):Ba(e,t)},Fa={owner:ma,defaultView:ya,documentElement:va,parent:_a,findIndex:ba,parents:wa,siblings:xa,prevSibling:ka,offsetParent:Ca,prevSiblings:Ta,nextSibling:Ea,nextSiblings:Sa,children:Na,child:Aa,firstChild:ja,lastChild:Da,childNodesCount:Oa,hasChildNodes:Ra,leaf:Pa},Ia=Hi.detect().browser,La=function(e){return Ge(e,ao.isElement)},Ma=function(e){return Ia.isFirefox()&&"table"===ao.name(e)?La(Fa.children(e)).filter(function(e){return"caption"===ao.name(e)}).bind(function(e){return La(Fa.nextSiblings(e)).map(function(t){var n=t.dom().offsetTop,r=e.dom().offsetTop,i=e.dom().offsetHeight;return n<=r?-i:0})}).getOr(0):0},Va=function(e,t,n){var r,i,o=0,a=0,s=e.ownerDocument;if(n=n?n:e,t){if(n===e&&t.getBoundingClientRect&&"static"===Wo.get(Ji.fromDom(e),"position"))return i=t.getBoundingClientRect(),o=i.left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,a=i.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop,{x:o,y:a};for(r=t;r&&r!==n&&r.nodeType;)o+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)o-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=Ma(Ji.fromDom(t))}return{x:o,y:a}},$a={getPos:Va},Ua=function(e){var t=je.none(),n=[],r=function(e){return Ua(function(t){i(function(n){t(e(n))})})},i=function(e){a()?c(e):n.push(e)},o=function(e){t=je.some(e),s(n),n=[]},a=function(){return t.isSome()},s=function(e){ze(e,c)},c=function(e){t.each(function(t){setTimeout(function(){e(t)},0)})};return e(o),{get:i,map:r,isReady:a}},qa=function(e){return Ua(function(t){t(e)})},Ha={nu:Ua,pure:qa},za=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this;setTimeout(function(){e.apply(r,t)},0)}},Wa=function(e){var t=function(t){e(za(t))},n=function(e){return Wa(function(n){t(function(t){var r=e(t);n(r)})})},r=function(e){return Wa(function(n){t(function(t){e(t).get(n)})})},i=function(e){return Wa(function(n){t(function(t){e.get(n)})})},o=function(){return Ha.nu(t)},a=function(){var e=null;return Wa(function(t){null===e&&(e=o()),e.get(t)})};return{map:n,bind:r,anonBind:i,toLazy:o,toCached:a,get:t}},Ka=function(e){return Wa(function(t){t(e)})},Xa={nu:Wa,pure:Ka},Ya=function(e,t){return t(function(t){var n=[],r=0,i=function(i){return function(o){n[i]=o,r++,r>=e.length&&t(n)}};0===e.length?t([]):ze(e,function(e,t){e.get(i(t))})})},Ja=function(e){return Ya(e,Xa.nu)},Ga=function(e){var t=function(t){return e===t},n=function(t){return Ga(e)},r=function(t){return Ga(e)},i=function(t){return Ga(t(e))},o=function(t){t(e)},a=function(t){return t(e)},s=function(t,n){return n(e)},c=function(t){return t(e)},l=function(t){return t(e)},u=function(){return je.some(e)};return{is:t,isValue:Ce,isError:xe,getOr:ye(e),getOrThunk:ye(e),getOrDie:ye(e),or:n,orThunk:r,fold:s,map:i,each:o,bind:a,exists:c,forall:l,toOption:u}},Za=function(e){var t=function(e){return e()},n=function(){return we(String(e))()},r=function(e){return e},i=function(e){return e()},o=function(t){return Za(e)},a=function(t){return Za(e)},s=function(t,n){return t(e)};return{is:xe,isValue:xe,isError:Ce,getOr:_e,getOrThunk:t,getOrDie:n,or:r,orThunk:i,fold:s,map:o,each:me,bind:a,exists:xe,forall:Ce,toOption:je.none}},Qa={value:Ga,error:Za},es=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],ts=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],ns=["td","th"],rs=["thead","tbody","tfoot"],is=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],os=["h1","h2","h3","h4","h5","h6"],as=["li","dd","dt"],ss=["ul","ol","dl"],cs=["pre","script","textarea","style"],ls=function(e){var t;return function(n){return t=t?t:st(e,ye(!0)),t.hasOwnProperty(ao.name(n))}},us=ls(os),ds=ls(es),fs=function(e){return ao.isElement(e)&&!ds(e)},hs=function(e){return ao.isElement(e)&&"br"===ao.name(e)},ps=ls(is),gs=ls(ss),ms=ls(as),vs=ls(ts),ys=ls(rs),_s=ls(ns),bs=ls(cs),ws=function(e){return function(t){return!!t&&t.nodeType===e}},xs=ws(1),Cs=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,r;if(e&&e.nodeType)for(r=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(r===t[n])return!0;return!1}},ks=function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r,i;if(xs(t))for(r=0;r<n.length;r++){var o=t.ownerDocument.defaultView.getComputedStyle(t,null);if(i=o?o.getPropertyValue(e):null,i===n[r])return!0}return!1}},Es=function(e,t){return function(n){return xs(n)&&n[e]===t}},Ts=function(e,t){return function(t){return xs(t)&&t.hasAttribute(e)}},Ss=function(e,t){return function(n){return xs(n)&&n.getAttribute(e)===t}},Ns=function(e){return xs(e)&&e.hasAttribute("data-mce-bogus")},As=function(e){return xs(e)&&"all"===e.getAttribute("data-mce-bogus")},js=function(e){return xs(e)&&"TABLE"===e.tagName},Ds=function(e){return function(t){if(xs(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Os=ws(3),Rs=ws(8),Bs=ws(9),Ps=Cs("br"),Fs=Ds("true"),Is=Ds("false"),Ls={isText:Os,isElement:xs,isComment:Rs,isDocument:Bs,isBr:Ps,isContentEditableTrue:Fs,isContentEditableFalse:Is,matchNodeNames:Cs,hasPropValue:Es,hasAttribute:Ts,hasAttributeValue:Ss,matchStyleValues:ks,isBogus:Ns,isBogusAll:As,isTable:js},Ms=function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n},Vs=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},$s=function(e,t){var n,r=t.childNodes;if(!Ls.isElement(t)||!Vs(t)){for(n=r.length-1;n>=0;n--)$s(e,r[n]);if(Ls.isDocument(t)===!1){if(Ls.isText(t)&&t.nodeValue.length>0){var i=xr.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||i>0)return;if(0===i&&Ms(t))return}else if(Ls.isElement(t)&&(r=t.childNodes,1===r.length&&Vs(r[0])&&t.parentNode.insertBefore(r[0],t),r.length||vs(Ji.fromDom(t))))return;e.remove(t)}return t}},Us={trimNode:$s},qs=xr.makeMap,Hs=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zs=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ws=/[<>&\"\']/g,Ks=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Xs={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};ei={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ti={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Ys=function(e){var t;return t=Ji.fromTag("div").dom(),t.innerHTML=e,t.textContent||t.innerText||e},Js=function(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),ei[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}};Qr=Js("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Gs=function(e,t){return e.replace(t?Hs:zs,function(e){return ei[e]||e})},Zs=function(e){return(""+e).replace(Ws,function(e){return ei[e]||e})},Qs=function(e,t){return e.replace(t?Hs:zs,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":ei[e]||"&#"+e.charCodeAt(0)+";"})},ec=function(e,t,n){return n=n||Qr,e.replace(t?Hs:zs,function(e){return ei[e]||n[e]||e})},tc=function(e,t){var n=Js(t)||Qr,r=function(e,t){return e.replace(t?Hs:zs,function(e){return void 0!==ei[e]?ei[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})},i=function(e,t){return ec(e,t,n)},o=qs(e.replace(/\+/g,","));return o.named&&o.numeric?r:o.named?t?i:ec:o.numeric?Qs:Gs},nc=function(e){return e.replace(Ks,function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10),t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Xs[t]||String.fromCharCode(t)):ti[e]||Qr[e]||Ys(e)})},rc={encodeRaw:Gs,encodeAllRaw:Zs,encodeNumeric:Qs,encodeNamed:ec,getEncodeFunc:tc,decode:nc},ic={},oc={},ac=xr.makeMap,sc=xr.each,cc=xr.extend,lc=xr.explode,uc=xr.inArray,dc=function(e,t){return e=xr.trim(e),e?e.split(t||" "):[]},fc=function(e){var t,n,r,i,o,a,s={},c=function(e,n,r){var i,o,a,c=function(e,t){var n,r,i={};for(n=0,r=e.length;n<r;n++)i[e[n]]=t||{};return i};for(r=r||[],n=n||"","string"==typeof r&&(r=dc(r)),e=dc(e),i=e.length;i--;)o=dc([t,n].join(" ")),a={attributes:c(o),attributesOrder:o,children:c(r,oc)},s[e[i]]=a},l=function(e,t){var n,r,i,o;for(e=dc(e),n=e.length,t=dc(t);n--;)for(r=s[e[n]],i=0,o=t.length;i<o;i++)r.attributes[t[i]]={},r.attributesOrder.push(t[i])};return ic[e]?ic[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",a="acronym applet basefont big font strike tt",r=[r,a].join(" "),sc(dc(a),function(e){c(e,"",r)}),o="center dir isindex noframes",n=[n,o].join(" "),i=[n,r].join(" "),sc(dc(o),function(e){c(e,"",i)})),i=i||[n,r].join(" "),c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),c("address dt dd div caption","",i),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),c("blockquote","cite",i),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",i),c("dl","","dt dd"),c("a","href target rel media hreflang type",r),c("q","cite",r),c("ins del","cite datetime",i),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",i),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),c("param","name value"),c("map","name",[i,"area"].join(" ")),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",i),c("th","colspan rowspan headers scope abbr",i),c("form","accept-charset action autocomplete enctype method name novalidate target",i),c("fieldset","disabled form name",[i,"legend"].join(" ")),c("label","form for",r),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:r),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",[i,"li"].join(" ")),c("noscript","",i),"html4"!==e&&(c("wbr"),c("ruby","",[r,"rt rp"].join(" ")),c("figcaption","",i),c("mark rt rp summary bdi","",r),c("canvas","width height",i),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",[r,"option"].join(" ")),c("article section nav aside header footer","",i),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",[i,"figcaption"].join(" ")),c("time","datetime",r),c("dialog","open",i),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",r),c("progress","value max",r),c("meter","value min max low high optimum",r),c("details","open",[i,"summary"].join(" ")),c("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select","onchange"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink")),"html4"!==e&&(l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("iframe","sandbox seamless allowfullscreen")),sc(dc("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e];
}),delete s.caption.children.table,delete s.script,ic[e]=s,s)},hc=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),sc(e,function(e,r){n[r]=n[r.toUpperCase()]="map"===t?ac(e,/[, ]/):lc(e,/[, ]/)})),n},pc=function(e,t,n,r){var i=function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e};return"#"+i(t)+i(n)+i(r)},gc=xr.each,mc=xr.grep,vc=St.ie,yc=/^([a-z0-9],?)+$/i,_c=/^[ \t\r\n]*$/,bc=function(e,t,n){var r={},i=t.keep_values,o={set:function(e,r,i){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,i,e[0])),e.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return r={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(i&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serialize(e.parse(n),t[0].nodeName)}}},i&&(r.href=r.src=o),r},wc=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},xc=function(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(i++,n=r);return i};!function(e){e.DOM=e(document),e.nodeIndex=xc}(C||(C={}));var Cc=C,kc=Cc.DOM,Ec=xr.each,Tc=xr.grep,Sc=function(e){return"function"==typeof e},Nc=function(){var e=0,t=1,n=2,r=3,i={},o=[],a={},s=[],c=0,l=function(e,t,n){var r,i,o=kc,a=function(){o.remove(i),r&&(r.onreadystatechange=r.onload=r=null),t()},s=function(){Sc(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)};i=o.uniqueId(),r=document.createElement("script"),r.id=i,r.type="text/javascript",r.src=xr._addCacheSuffix(e),r.onload=a,r.onerror=s,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)};this.isDone=function(e){return i[e]===n},this.markDone=function(e){i[e]=n},this.add=this.load=function(t,n,r,s){var c=i[t];void 0===c&&(o.push(t),i[t]=e),n&&(a[t]||(a[t]=[]),a[t].push({success:n,failure:s,scope:r||this}))},this.remove=function(e){delete i[e],delete a[e]},this.loadQueue=function(e,t,n){this.loadScripts(o,e,t,n)},this.loadScripts=function(e,o,u,d){var f,h=[],p=function(e,t){Ec(a[t],function(t){Sc(t[e])&&t[e].call(t.scope)}),a[t]=void 0};s.push({success:o,failure:d,scope:u||this}),(f=function(){var o=Tc(e);if(e.length=0,Ec(o,function(e){return i[e]===n?void p("success",e):i[e]===r?void p("failure",e):void(i[e]!==t&&(i[e]=t,c++,l(e,function(){i[e]=n,c--,p("success",e),f()},function(){i[e]=r,c--,h.push(e),p("failure",e),f()})))}),!c){var a=s.slice(0);s.length=0,Ec(a,function(e){0===h.length?Sc(e.success)&&e.success.call(e.scope):Sc(e.failure)&&e.failure.call(e.scope,h)})}})()}};Nc.ScriptLoader=new Nc;var Ac=xr.each;!function(e){e.PluginManager=e(),e.ThemeManager=e()}(k||(k={}));var jc=function(e,t){var n=Fa.parent(e);n.each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},Dc=function(e,t){var n=Fa.nextSibling(e);n.fold(function(){var n=Fa.parent(e);n.each(function(e){Rc(e,t)})},function(e){jc(e,t)})},Oc=function(e,t){var n=Fa.firstChild(e);n.fold(function(){Rc(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},Rc=function(e,t){e.dom().appendChild(t.dom())},Bc=function(e,t,n){Fa.child(e,n).fold(function(){Rc(e,t)},function(e){jc(e,t)})},Pc=function(e,t){jc(e,t),Rc(t,e)},Fc={before:jc,after:Dc,prepend:Oc,append:Rc,appendAt:Bc,wrap:Pc},Ic=function(e,t){ze(t,function(t){Fc.before(e,t)})},Lc=function(e,t){ze(t,function(n,r){var i=0===r?e:t[r-1];Fc.after(i,n)})},Mc=function(e,t){ze(t.slice().reverse(),function(t){Fc.prepend(e,t)})},Vc=function(e,t){ze(t,function(t){Fc.append(e,t)})},$c={before:Ic,after:Lc,prepend:Mc,append:Vc},Uc=function(e){e.dom().textContent="",ze(Fa.children(e),function(e){qc(e)})},qc=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Hc=function(e){var t=Fa.children(e);t.length>0&&$c.before(e,t),qc(e)},zc={empty:Uc,remove:qc,unwrap:Hc},Wc=function(e,t){var n=null,r=function(){null!==n&&(clearTimeout(n),n=null)},i=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];null===n&&(n=setTimeout(function(){e.apply(null,r),n=null},t))};return{cancel:r,throttle:i}},Kc=function(e,t){var n=null,r=function(){null!==n&&(clearTimeout(n),n=null)},i=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(null,r),n=null},t)};return{cancel:r,throttle:i}},Xc=function(e){var t=e,n=function(){return t},r=function(e){t=e},i=function(){return Xc(n())};return{get:n,set:r,clone:i}},Yc=function(e,t){var n=Co.get(e,t);return void 0===n||""===n?[]:n.split(" ")},Jc=function(e,t,n){var r=Yc(e,t),i=r.concat([n]);return Co.set(e,t,i.join(" ")),!0},Gc=function(e,t,n){var r=Xe(Yc(e,t),function(e){return e!==n});return r.length>0?Co.set(e,t,r.join(" ")):Co.remove(e,t),!1},Zc={read:Yc,add:Jc,remove:Gc},Qc=function(e){return void 0!==e.dom().classList},el=function(e){return Zc.read(e,"class")},tl=function(e,t){return Zc.add(e,"class",t)},nl=function(e,t){return Zc.remove(e,"class",t)},rl=function(e,t){return Ue(el(e),t)?nl(e,t):tl(e,t)},il={get:el,add:tl,remove:nl,toggle:rl,supports:Qc},ol=function(e,t){il.supports(e)?e.dom().classList.add(t):il.add(e,t)},al=function(e){var t=il.supports(e)?e.dom().classList:il.get(e);0===t.length&&Co.remove(e,"class")},sl=function(e,t){if(il.supports(e)){var n=e.dom().classList;n.remove(t)}else il.remove(e,t);al(e)},cl=function(e,t){return il.supports(e)?e.dom().classList.toggle(t):il.toggle(e,t)},ll=function(e,t){var n=il.supports(e),r=e.dom().classList,i=function(){n?r.remove(t):il.remove(e,t)},o=function(){n?r.add(t):il.add(e,t)};return E(i,o,ul(e,t))},ul=function(e,t){return il.supports(e)&&e.dom().classList.contains(t)},dl={add:ol,remove:sl,toggle:cl,toggler:ll,has:ul},fl=function(e){return ml(So.body(),e)},hl=function(e,t,n){return Xe(Fa.parents(e,n),t)},pl=function(e,t){return Xe(Fa.siblings(e),t)},gl=function(e,t){return Xe(Fa.children(e),t)},ml=function(e,t){var n=[];return ze(Fa.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(ml(e,t))}),n},vl={all:fl,ancestors:hl,siblings:pl,children:gl,descendants:ml},yl=function(e){return sa.all(e)},_l=function(e,t,n){return vl.ancestors(e,function(e){return sa.is(e,t)},n)},bl=function(e,t){return vl.siblings(e,function(e){return sa.is(e,t)})},wl=function(e,t){return vl.children(e,function(e){return sa.is(e,t)})},xl=function(e,t){return sa.all(t,e)},Cl={all:yl,ancestors:_l,siblings:bl,children:wl,descendants:xl},kl=function(e){return Al(So.body(),e)},El=function(e,t,n){for(var r=e.dom(),i=Le(n)?n:ye(!1);r.parentNode;){r=r.parentNode;var o=Ji.fromDom(r);if(t(o))return je.some(o);if(i(o))break}return je.none()},Tl=function(e,t,n){var r=function(e){return t(e)};return T(r,El,e,t,n)},Sl=function(e,t){var n=e.dom();return n.parentNode?Nl(Ji.fromDom(n.parentNode),function(n){return!ga.eq(e,n)&&t(n)}):je.none()},Nl=function(e,t){var n=Ge(e.dom().childNodes,ve(t,Ji.fromDom));return n.map(Ji.fromDom)},Al=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(Ji.fromDom(e.childNodes[r])))return je.some(Ji.fromDom(e.childNodes[r]));var i=n(e.childNodes[r]);if(i.isSome())return i}return je.none()};return n(e.dom())},jl={first:kl,ancestor:El,closest:Tl,sibling:Sl,child:Nl,descendant:Al},Dl=function(e){return sa.one(e)},Ol=function(e,t,n){return jl.ancestor(e,function(e){return sa.is(e,t)},n)},Rl=function(e,t){return jl.sibling(e,function(e){return sa.is(e,t)})},Bl=function(e,t){return jl.child(e,function(e){return sa.is(e,t)})},Pl=function(e,t){return sa.one(t,e)},Fl=function(e,t,n){return T(sa.is,Ol,e,t,n)},Il={first:Dl,ancestor:Ol,sibling:Rl,child:Bl,descendant:Pl,closest:Fl},Ll=ye("mce-annotation"),Ml=ye("data-mce-annotation"),Vl=ye("data-mce-annotation-uid"),$l=function(e,t){var n=e.selection.getRng(),r=Ji.fromDom(n.startContainer),i=Ji.fromDom(e.getBody()),o=t.fold(function(){return"."+Ll()},function(e){return"["+Ml()+'="'+e+'"]'}),a=Fa.child(r,n.startOffset).getOr(r),s=Il.closest(a,o,function(e){return ga.eq(e,i)}),c=function(e,t){return Co.has(e,t)?je.some(Co.get(e,t)):je.none()};return s.bind(function(t){return c(t,""+Vl()).bind(function(n){return c(t,""+Ml()).map(function(t){var r=ql(e,n);return{uid:n,name:t,elements:r}})})})},Ul=function(e){return ao.isElement(e)&&dl.has(e,Ll())},ql=function(e,t){var n=Ji.fromDom(e.getBody());return Cl.descendants(n,"["+Vl()+'="'+t+'"]')},Hl=function(e,t){var n=Ji.fromDom(e.getBody()),r=Cl.descendants(n,"["+Ml()+'="'+t+'"]'),i={};return ze(r,function(e){var t=Co.get(e,Vl()),n=i.hasOwnProperty(t)?i[t]:[];i[t]=n.concat([e])}),i},zl=function(e,t){var n=Xc({}),r=function(){return{listeners:[],previous:Xc(je.none())}},i=function(e,t){o(e,function(e){return t(e),e})},o=function(e,t){var i=n.get(),o=i.hasOwnProperty(e)?i[e]:r(),a=t(o);i[e]=a,n.set(i)},a=function(e,t,n){i(e,function(r){ze(r.listeners,function(r){return r(!0,e,{uid:t,nodes:He(n,function(e){return e.dom()})})})})},s=function(e){i(e,function(t){ze(t.listeners,function(t){return t(!1,e)})})},c=Kc(function(){var t=n.get(),r=ct(so(t));ze(r,function(t){o(t,function(n){var r=n.previous.get();return $l(e,je.some(t)).fold(function(){r.isSome()&&(s(t),n.previous.set(je.none()))},function(e){var t=e.uid,i=e.name,o=e.elements;r.is(t)||(a(i,t,o),n.previous.set(je.some(t)))}),{previous:n.previous,listeners:n.listeners}})})},30);e.on("remove",function(){c.cancel()}),e.on("nodeChange",function(){c.throttle()});var l=function(e,t){o(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})};return{addListener:l}},Wl=function(e,t){var n=function(e){var n=je.from(e.attributes.map[Ml()]);return n.bind(t.lookup)};e.on("init",function(){e.serializer.addNodeFilter("span",function(e){ze(e,function(e){n(e).each(function(t){t.persistent===!1&&e.unwrap()})})})})},Kl=function(){var e={},t=function(t,n){e[t]={name:t,settings:n}},n=function(t){return e.hasOwnProperty(t)?je.from(e[t]).map(function(e){return e.settings}):je.none()};return{register:t,lookup:n}},Xl=0,Yl=function(e){var t=new Date,n=t.getTime(),r=Math.floor(1e9*Math.random());return Xl++,e+"_"+r+Xl+String(n)},Jl=function(e,t){ze(t,function(t){dl.add(e,t)})},Gl=function(e,t){ze(t,function(t){dl.remove(e,t)})},Zl=function(e,t){ze(t,function(t){dl.toggle(e,t)})},Ql=function(e,t){return rt(t,function(t){return dl.has(e,t)})},eu=function(e,t){return qe(t,function(t){return dl.has(e,t)})},tu=function(e){for(var t=e.dom().classList,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t.item(r);return n},nu=function(e){return il.supports(e)?tu(e):il.get(e)},ru={add:Jl,remove:Gl,toggle:Zl,hasAll:Ql,hasAny:eu,get:nu},iu=function(e,t){return Ji.fromDom(e.dom().cloneNode(t))},ou=function(e){return iu(e,!1)},au=function(e){return iu(e,!0)},su=function(e,t){var n=Ji.fromTag(t),r=Co.clone(e);return Co.setAll(n,r),n},cu=function(e,t){var n=su(e,t),r=Fa.children(au(e));return $c.append(n,r),n},lu=function(e,t){var n=su(e,t);Fc.before(e,n);var r=Fa.children(e);return $c.append(n,r),zc.remove(e),n},uu={shallow:ou,shallowAs:su,deep:au,copy:cu,mutate:lu},du=[].slice,fu=function(e){return function(){return e}},hu=function(e){return function(t){return!e(t)}},pu=function(e,t){return function(n){return e(t(n))}},gu=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=du.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},mu=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=du.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},vu=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=du.call(arguments);return r.length-1>=e.length?e.apply(this,r.slice(1)):function(){var e=r.concat([].slice.call(arguments));return vu.apply(this,e)}},yu=function(){},_u={constant:fu,negate:hu,and:mu,or:gu,curry:vu,compose:pu,noop:yu},bu="\ufeff",wu=function(e){return e===bu},xu=function(e){return e.replace(new RegExp(bu,"g"),"")},Cu={isZwsp:wu,ZWSP:bu,trim:xu},ku=Ls.isElement,Eu=Ls.isText,Tu=function(e){return Eu(e)&&(e=e.parentNode),ku(e)&&e.hasAttribute("data-mce-caret")},Su=function(e){return Eu(e)&&Cu.isZwsp(e.data)},Nu=function(e){return Tu(e)||Su(e)},Au=function(e){return e.firstChild!==e.lastChild||!Ls.isBr(e.firstChild)},ju=function(e,t){var n,r,i,o;if(n=e.ownerDocument,i=n.createTextNode(Cu.ZWSP),o=e.parentNode,t){if(r=e.previousSibling,Eu(r)){if(Nu(r))return r;if(Fu(r))return r.splitText(r.data.length-1)}o.insertBefore(i,e)}else{if(r=e.nextSibling,Eu(r)){if(Nu(r))return r;if(Pu(r))return r.splitText(1),r}e.nextSibling?o.insertBefore(i,e.nextSibling):o.appendChild(i)}return i},Du=function(e){var t=e.container();return e&&Ls.isText(t)&&t.data.charAt(e.offset())===Cu.ZWSP},Ou=function(e){var t=e.container();return e&&Ls.isText(t)&&t.data.charAt(e.offset()-1)===Cu.ZWSP},Ru=function(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},Bu=function(e,t,n){var r,i,o;return r=t.ownerDocument,i=r.createElement(e),i.setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(Ru()),o=t.parentNode,n?o.insertBefore(i,t):t.nextSibling?o.insertBefore(i,t.nextSibling):o.appendChild(i),i},Pu=function(e){return Eu(e)&&e.data[0]===Cu.ZWSP},Fu=function(e){return Eu(e)&&e.data[e.data.length-1]===Cu.ZWSP},Iu=function(e){var t=e.getElementsByTagName("br"),n=t[t.length-1];Ls.isBogus(n)&&n.parentNode.removeChild(n)},Lu=function(e){return e&&e.hasAttribute("data-mce-caret")?(Iu(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},Mu=function(e){return Tu(e.startContainer)},Vu=Ls.isContentEditableTrue,$u=Ls.isContentEditableFalse,Uu=Ls.isBr,qu=Ls.isText,Hu=Ls.matchNodeNames("script style textarea"),zu=Ls.matchNodeNames("img input textarea hr iframe video audio object"),Wu=Ls.matchNodeNames("table"),Ku=Nu,Xu=function(e){return!Ku(e)&&(qu(e)?!Hu(e.parentNode):zu(e)||Uu(e)||Wu(e)||Ju(e))},Yu=function(e){return Ls.isElement(e)&&"true"===e.getAttribute("unselectable")},Ju=function(e){return Yu(e)===!1&&$u(e)},Gu=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Ju(e))return!1;if(Vu(e))return!0}return!0},Zu=function(e){return!!Ju(e)&&lr.reduce(e.getElementsByTagName("*"),function(e,t){return e||Vu(t)},!1)!==!0},Qu=function(e){return zu(e)||Zu(e)},ed=function(e,t){return Xu(e)&&Gu(e,t)},td=Math.round,nd=function(e){return e?{left:td(e.left),top:td(e.top),bottom:td(e.bottom),right:td(e.right),width:td(e.width),height:td(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},rd=function(e,t){return e=nd(e),t?e.right=e.left:(e.left=e.left+e.width,e.right=e.left),e.width=0,e},id=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},od=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},ad=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&od(t.top-e.bottom,e,t)},sd=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&od(t.bottom-e.top,e,t)},cd=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},ld=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right},ud=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom},dd=function(e,t){return{x:ld(e,t),y:ud(e,t)}},fd=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},hd=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},pd=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),gd=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&pd.test(e)},md=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(!i.isSome())return je.none();n.push(i.getOrDie())}return je.some(t.apply(null,n))},vd=Ls.isElement,yd=Xu,_d=Ls.matchStyleValues("display","block table"),bd=Ls.matchStyleValues("float","left right"),wd=_u.and(vd,yd,_u.negate(bd)),xd=_u.negate(Ls.matchStyleValues("white-space","pre pre-line pre-wrap")),Cd=Ls.isText,kd=Ls.isBr,Ed=Cc.nodeIndex,Td=hd,Sd=function(e){return"createRange"in e?e.createRange():Cc.DOM.createRng()},Nd=function(e){return e&&/[\r\n\t ]/.test(e)},Ad=function(e){return!!e.setStart&&!!e.setEnd},jd=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(Nd(e.toString())&&xd(n.parentNode)&&Ls.isText(n)&&(t=n.data,Nd(t[r-1])||Nd(t[r+1])))},Dd=function(e){var t,n=e.ownerDocument,r=Sd(n),i=n.createTextNode(""),o=e.parentNode;return o.insertBefore(i,e),r.setStart(i,0),r.setEnd(i,1),t=nd(r.getBoundingClientRect()),o.removeChild(i),t},Od=function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,i=e.endOffset;if(t===n&&Ls.isText(n)&&0===r&&1===i){var o=e.cloneRange();return o.setEndAfter(n),Bd(o)}return null},Rd=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},Bd=function(e){var t,n;return n=e.getClientRects(),t=nd(n.length>0?n[0]:e.getBoundingClientRect()),!Ad(e)&&kd(e)&&Rd(t)?Dd(e):Rd(t)&&Ad(e)?Od(e):t},Pd=function(e,t){var n=rd(e,t);return n.width=1,n.right=n.left+1,n},Fd=function(e){var t,n,r=[],i=function(e){0!==e.height&&(r.length>0&&id(e,r[r.length-1])||r.push(e))},o=function(e,t){var n=Sd(e.ownerDocument);if(t<e.data.length){if(gd(e.data[t]))return r;if(gd(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!jd(n)))return i(Pd(Bd(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),jd(n)||i(Pd(Bd(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),jd(n)||i(Pd(Bd(n),!0)))};if(Cd(e.container()))return o(e.container(),e.offset()),r;if(vd(e.container()))if(e.isAtEnd())n=Td(e.container(),e.offset()),Cd(n)&&o(n,n.data.length),wd(n)&&!kd(n)&&i(Pd(Bd(n),!1));else{if(n=Td(e.container(),e.offset()),Cd(n)&&o(n,0),wd(n)&&e.isAtEnd())return i(Pd(Bd(n),!1)),r;t=Td(e.container(),e.offset()-1),wd(t)&&!kd(t)&&(_d(t)||_d(n)||!wd(n))&&i(Pd(Bd(t),!1)),wd(n)&&i(Pd(Bd(n),!0))}return r};!function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)},e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)},e.after=function(t){return e(t.parentNode,Ed(t)+1)},e.before=function(t){return e(t.parentNode,Ed(t))},e.isAbove=function(e,t){return md([lt(t.getClientRects()),ut(e.getClientRects())],ad).getOr(!1)},e.isBelow=function(e,t){return md([ut(t.getClientRects()),lt(e.getClientRects())],sd).getOr(!1)},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=function(e){return!!e&&Ls.isText(e.container())},e.isElementPosition=function(t){return e.isTextPosition(t)===!1}}(S||(S={}));var Id,Ld=S,Md=Ls.isText,Vd=Ls.isBogus,$d=Cc.nodeIndex,Ud=function(e){var t=e.parentNode;return Vd(t)?Ud(t):t},qd=function(e){return e?lr.reduce(e.childNodes,function(e,t){return Vd(t)&&"BR"!==t.nodeName?e=e.concat(qd(t)):e.push(t),e},[]):[]},Hd=function(e,t){for(;(e=e.previousSibling)&&Md(e);)t+=e.data.length;return t},zd=function(e){return function(t){return e===t}},Wd=function(e){var t,n,r;return t=qd(Ud(e)),n=lr.findIndex(t,zd(e),e),t=t.slice(0,n+1),r=lr.reduce(t,function(e,n,r){return Md(n)&&Md(t[r-1])&&e++,e},0),t=lr.filter(t,Ls.matchNodeNames(e.nodeName)),n=lr.findIndex(t,zd(e),e),n-r},Kd=function(e){var t;return t=Md(e)?"text()":e.nodeName.toLowerCase(),t+"["+Wd(e)+"]"},Xd=function(e,t,n){var r=[];for(t=t.parentNode;!(t===e||n&&n(t));t=t.parentNode)r.push(t);return r},Yd=function(e,t){var n,r,i,o,a,s=[];return n=t.container(),r=t.offset(),Md(n)?i=Hd(n,r):(o=n.childNodes,r>=o.length?(i="after",r=o.length-1):i="before",n=o[r]),s.push(Kd(n)),a=Xd(e,n),a=lr.filter(a,_u.negate(Ls.isBogus)),s=s.concat(lr.map(a,function(e){return Kd(e)})),s.reverse().join("/")+","+i},Jd=function(e,t,n){var r=qd(e);return r=lr.filter(r,function(e,t){return!Md(e)||!Md(r[t-1])}),r=lr.filter(r,Ls.matchNodeNames(t)),r[n]},Gd=function(e,t){for(var n,r=e,i=0;Md(r);){if(n=r.data.length,t>=i&&t<=i+n){e=r,t-=i;break}if(!Md(r.nextSibling)){e=r,t=n;break}i+=n,r=r.nextSibling}return Md(e)&&t>e.data.length&&(t=e.data.length),Ld(e,t)},Zd=function(e,t){var n,r,i;return t?(n=t.split(","),t=n[0].split("/"),i=n.length>1?n[1]:"before",r=lr.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),Jd(e,t[1],parseInt(t[2],10))):null},e),r?Md(r)?Gd(r,parseInt(i,10)):(i="after"===i?$d(r)+1:$d(r),Ld(r.parentNode,i)):null):null},Qd=Ls.isContentEditableFalse,ef=function(e,t,n){var r,i;for(i=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&Ls.isText(r);r=r.previousSibling)i+=e(r.data).length;return i},tf=function(e,t,n,r,i){var o,a=r[i?"startContainer":"endContainer"],s=r[i?"startOffset":"endOffset"],c=[],l=0,u=e.getRoot();for(Ls.isText(a)?c.push(n?ef(t,a,s):s):(o=a.childNodes,s>=o.length&&o.length&&(l=1,s=Math.max(0,o.length-1)),c.push(e.nodeIndex(o[s],n)+l));a&&a!==u;a=a.parentNode)c.push(e.nodeIndex(a,n));return c},nf=function(e,t,n,r){var i=t.dom,o={};return o.start=tf(i,e,n,r,!0),t.isCollapsed()||(o.end=tf(i,e,n,r,!1)),o},rf=function(e){Ls.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},of=function(e,t,n){var r=0;return xr.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},af=function(e,t){var n,r,i,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],Ls.isElement(n)&&"TR"===n.nodeName&&(i=n.childNodes,n=i[Math.min(t?r:r-1,i.length-1)],n&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))},sf=function(e){return af(e,!0),af(e,!1),e},cf=function(e,t){var n;if(Ls.isElement(e)&&(e=hd(e,t),Qd(e)))return e;if(Nu(e)){if(Ls.isText(e)&&Tu(e)&&(e=e.parentNode),n=e.previousSibling,Qd(n))return n;if(n=e.nextSibling,Qd(n))return n}},lf=function(e){return cf(e.startContainer,e.startOffset)||cf(e.endContainer,e.endOffset)},uf=function(e,t,n){var r=n.getNode(),i=r?r.nodeName:null,o=n.getRng();if(Qd(r)||"IMG"===i)return{name:i,index:of(n.dom,i,r)};var a=lf(o);return a?(i=a.tagName,{name:i,index:of(n.dom,i,a)}):nf(e,n,t,o)},df=function(e){var t=e.getRng();return{start:Yd(e.dom.getRoot(),Ld.fromRangeStart(t)),end:Yd(e.dom.getRoot(),Ld.fromRangeEnd(t))}},ff=function(e){return{rng:e.getRng()}},hf=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},pf=function(e,t){var n=e.dom,r=e.getRng(),i=n.uniqueId(),o=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:of(n,s,a)};var c=sf(r.cloneRange());if(!o){c.collapse(!1);var l=hf(n,i+"_end",t);c.insertNode(l),rf(l.nextSibling)}r=sf(r),r.collapse(!0);var u=hf(n,i+"_start",t);return r.insertNode(u),rf(u.previousSibling),rf(u.nextSibling),e.moveToBookmark({id:i,keep:1}),{id:i}},gf=function(e,t,n){return 2===t?uf(Cu.trim,n,e):3===t?df(e):t?ff(e):pf(e,!1)},mf={getBookmark:gf,getUndoBookmark:be(uf,_e,!0),getPersistentBookmark:pf},vf="_mce_caret",yf=function(e){return Ls.isElement(e)&&e.id===vf},_f=function(e,t){for(;t&&t!==e;){if(t.id===vf)return t;t=t.parentNode}return null},bf=Ls.isElement,wf=Ls.isText,xf=function(e){var t=e.parentNode;t&&t.removeChild(e)},Cf=function(e){try{return e.nodeValue}catch(e){return""}},kf=function(e,t){0===t.length?xf(e):e.nodeValue=t},Ef=function(e){var t=Cu.trim(e);return{count:e.length-t.length,text:t}},Tf=function(e,t){return Of(e),t},Sf=function(e,t){var n=Ef(e.data.substr(0,t.offset())),r=Ef(e.data.substr(t.offset())),i=n.text+r.text;return i.length>0?(kf(e,i),Ld(e,t.offset()-n.count)):t},Nf=function(e,t){var n=t.container(),r=$e(dt(n.childNodes),e).map(function(e){return e<t.offset()?Ld(n,t.offset()-1):t}).getOr(t);return Of(e),r},Af=function(e,t){return wf(e)&&t.container()===e?Sf(e,t):Tf(e,t)},jf=function(e,t){return t.container()===e.parentNode?Nf(e,t):Tf(e,t)},Df=function(e,t){return Ld.isTextPosition(t)?Af(e,t):jf(e,t)},Of=function(e){if(bf(e)&&Nu(e)&&(Au(e)?e.removeAttribute("data-mce-caret"):xf(e)),wf(e)){var t=Cu.trim(Cf(e));kf(e,t)}},Rf={removeAndReposition:Df,remove:Of},Bf=Ls.isContentEditableTrue,Pf=Ls.isContentEditableFalse,Ff=function(e,t,n,r,i){return t._selectionOverrides.showCaret(e,n,r,i)},If=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},Lf=function(e,t){var n=e.fire("BeforeObjectSelected",{target:t});return n.isDefaultPrevented()?null:If(t)},Mf=function(e,t,n){var r=Xp(1,e.getBody(),t),i=Ld.fromRangeStart(r),o=i.getNode();if(Pf(o))return Ff(1,e,o,!i.isAtEnd(),!1);var a=i.getNode(!0);if(Pf(a))return Ff(1,e,a,!1,!1);var s=e.dom.getParent(i.getNode(),function(e){return Pf(e)||Bf(e)});return Pf(s)?Ff(1,e,s,!1,n):null},Vf=function(e,t,n){if(!t||!t.collapsed)return t;var r=Mf(e,t,n);return r?r:t};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(Id||(Id={}));var $f,Uf=Ls.isContentEditableFalse,qf=Ls.isText,Hf=Ls.isElement,zf=Ls.isBr,Wf=Xu,Kf=Qu,Xf=ed,Yf=function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n},Jf=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},Gf=function(e,t){if(Fp(e)){if(Wf(t.previousSibling)&&!qf(t.previousSibling))return Ld.before(t);if(qf(t))return Ld(t,0)}if(Ip(e)){if(Wf(t.nextSibling)&&!qf(t.nextSibling))return Ld.after(t);if(qf(t))return Ld(t,t.data.length)}return Ip(e)?zf(t)?Ld.before(t):Ld.after(t):Ld.before(t)},Zf=function(e,t){var n;return!!Ls.isBr(e)&&(n=Qf(1,Ld.after(e),t),!!n&&!$p(Ld.before(e),Ld.before(n),t))},Qf=function(e,t,n){var r,i,o,a,s;if(!Hf(n)||!t)return null;if(t.isEqual(Ld.after(n))&&n.lastChild){if(s=Ld.after(n.lastChild),Ip(e)&&Wf(n.lastChild)&&Hf(n.lastChild))return zf(n.lastChild)?Ld.before(n.lastChild):s}else s=t;var c=s.container(),l=s.offset();if(qf(c)){if(Ip(e)&&l>0)return Ld(c,--l);if(Fp(e)&&l<c.length)return Ld(c,++l);r=c}else{if(Ip(e)&&l>0&&(i=Jf(c,l-1),Wf(i)))return!Kf(i)&&(o=Mp(i,e,Xf,i))?qf(o)?Ld(o,o.data.length):Ld.after(o):qf(i)?Ld(i,i.data.length):Ld.before(i);if(Fp(e)&&l<c.childNodes.length&&(i=Jf(c,l),Wf(i)))return zf(i)&&n.lastChild===i?null:Zf(i,n)?Qf(e,Ld.after(i),n):!Kf(i)&&(o=Mp(i,e,Xf,i))?qf(o)?Ld(o,0):Ld.before(o):qf(i)?Ld(i,0):Ld.after(i);r=i?i:s.getNode()}return(Fp(e)&&s.isAtEnd()||Ip(e)&&s.isAtStart())&&(r=Mp(r,e,_u.constant(!0),n,!0),Xf(r,n))?Gf(e,r):(i=Mp(r,e,Xf,n),a=lr.last(lr.filter(Yf(c,n),Uf)),!a||i&&a.contains(i)?i?Gf(e,i):null:s=Fp(e)?Ld.after(a):Ld.before(a))},eh=function(e){return{next:function(t){return Qf(Id.Forwards,t,e)},prev:function(t){return Qf(Id.Backwards,t,e)}}};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}($f||($f={}));var th=function(e,t){return e===Id.Backwards?t.reverse():t},nh=function(e,t,n){return e===Id.Forwards?t.next(n):t.prev(n)},rh=function(e,t,n,r){return Ls.isBr(r.getNode(t===Id.Forwards))?$f.Br:$p(n,r)===!1?$f.Block:$f.Wrap},ih=function(e,t,n,r){for(var i,o=eh(n),a=r,s=[];a&&(i=nh(t,o,a));){if(Ls.isBr(i.getNode(!1)))return t===Id.Forwards?{positions:th(t,s).concat([i]),breakType:$f.Br,breakAt:je.some(i)}:{positions:th(t,s),breakType:$f.Br,breakAt:je.some(i)};if(i.isVisible()){if(e(a,i)){var c=rh(n,t,a,i);return{positions:th(t,s),breakType:c,breakAt:je.some(i)}}s.push(i),a=i}else a=i}return{positions:th(t,s),breakType:$f.Eol,breakAt:je.none()}},oh=function(e,t,n,r){return t(n,r).breakAt.map(function(r){var i=t(n,r).positions;return e===Id.Backwards?i.concat(r):[r].concat(i)}).getOr([])},ah=function(e,t){return Je(e,function(e,n){return e.fold(function(){return je.some(n)},function(r){return md([lt(r.getClientRects()),lt(n.getClientRects())],function(e,i){var o=Math.abs(t-e.left),a=Math.abs(t-i.left);return a<=o?n:r}).or(e)})},je.none())},sh=function(e,t){return lt(t.getClientRects()).bind(function(t){return ah(e,t.left)})},ch=be(ih,S.isAbove,-1),lh=be(ih,S.isBelow,1),uh=be(oh,-1,ch),dh=be(oh,1,lh),fh=function(e){return hg.firstPositionIn(e).map(function(t){return[t].concat(lh(e,t).positions)}).getOr([])},hh=function(e){return hg.lastPositionIn(e).map(function(t){return ch(e,t).positions.concat(t)}).getOr([])},ph=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}},gh=function(e,t){return nt(t,function(t){var n=ph(nd(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})},mh=function(e,t,n){return Je(e,function(e,r){return e.fold(function(){return je.some(r)},function(e){var i=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),o=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return je.some(o<i?r:e)})},je.none())},vh=function(e,t,n,r,i){var o=Cl.descendants(Ji.fromDom(n),"td,th,caption").map(function(e){return e.dom()}),a=Xe(gh(e,o),function(e){return t(e,i)});return mh(a,r,i).map(function(e){return e.cell})},yh=function(e){return e.bottom},_h=function(e){return e.top},bh=function(e,t){return e.y<t},wh=function(e,t){return e.y>t},xh=be(vh,yh,bh),Ch=be(vh,_h,wh),kh=function(e,t){return lt(t.getClientRects()).bind(function(t){return xh(e,t.left,t.top)}).bind(function(e){return sh(hh(e),t)})},Eh=function(e,t){return ut(t.getClientRects()).bind(function(t){return Ch(e,t.left,t.top)}).bind(function(e){return sh(fh(e),t)})},Th=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},Sh=function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()},Nh=function(e,t,n){var r,i,o,a,s=e.dom,c=s.getRoot(),l=0;if(!Sh(e,t,n)&&Ls.isElement(t)){if(n===!1&&(l=t.offsetHeight),"BODY"!==c.nodeName){var u=e.selection.getScrollContainer();if(u)return r=Th(t).y-Th(u).y+l,a=u.clientHeight,o=u.scrollTop,void((r<o||r+25>o+a)&&(u.scrollTop=r<o?r:r-a+25))}i=s.getViewPort(e.getWin()),r=s.getPos(t).y+l,o=i.y,a=i.h,(r<i.y||r+25>o+a)&&e.getWin().scrollTo(0,r<o?r:r-a+25)}},Ah=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}},jh=function(e,t,n){e.inline?(e.getBody().scrollLeft+=t,e.getBody().scrollTop+=n):e.getWin().scrollBy(t,n)},Dh=function(e,t){lt(S.fromRangeStart(t).getClientRects()).each(function(t){var n=Ah(e),r=dd(n,t),i=4,o=r.x>0?r.x+i:r.x-i,a=r.y>0?r.y+i:r.y-i;jh(e,0!==r.x?o:0,0!==r.y?a:0)})},Oh={scrollElementIntoView:Nh,scrollRangeIntoView:Dh},Rh=function(e,t,n){var r=e.getParam(t,n);if(r.indexOf("=")!==-1){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}return r},Bh=function(e){return e.getParam("iframe_attrs",{})},Ph=function(e){return e.getParam("doctype","<!DOCTYPE html>")},Fh=function(e){return e.getParam("document_base_url","")},Ih=function(e){return Rh(e,"body_id","tinymce")},Lh=function(e){return Rh(e,"body_class","")},Mh=function(e){return e.getParam("content_security_policy","")},Vh=function(e){return e.getParam("br_in_pre",!0)},$h=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return t===!1?"":t},Uh=function(e){return e.getParam("forced_root_block_attrs",{})},qh=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},Hh=function(e){return e.getParam("no_newline_selector","")},zh=function(e){return e.getParam("keep_styles",!0)},Wh=function(e){return e.getParam("end_container_on_empty_block",!1)},Kh=function(e){return xr.explode(e.getParam("font_size_style_values",""))},Xh=function(e){return xr.explode(e.getParam("font_size_classes",""))},Yh=function(e){return e.getParam("images_dataimg_filter",ye(!0),"function")},Jh=function(e){return e.getParam("automatic_uploads",!0,"boolean")},Gh=function(e){
return e.getParam("images_reuse_filename",!1,"boolean")},Zh=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},Qh=function(e){return e.getParam("images_upload_url","","string")},ep=function(e){return e.getParam("images_upload_base_path","","string")},tp=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},np=function(e){return e.getParam("images_upload_handler",null,"function")},rp={getIframeAttrs:Bh,getDocType:Ph,getDocumentBaseUrl:Fh,getBodyId:Ih,getBodyClass:Lh,getContentSecurityPolicy:Mh,shouldPutBrInPre:Vh,getForcedRootBlock:$h,getForcedRootBlockAttrs:Uh,getBrNewLineSelector:qh,getNoNewLineSelector:Hh,shouldKeepStyles:zh,shouldEndContainerOnEmptyBlock:Wh,getFontStyleValues:Kh,getFontSizeClasses:Xh,getImagesDataImgFilter:Yh,isAutomaticUploadsEnabled:Jh,shouldReuseFileName:Gh,shouldReplaceBlobUris:Zh,getImageUploadUrl:Qh,getImageUploadBasePath:ep,getImagesUploadCredentials:tp,getImagesUploadHandler:np},ip=Hi.detect().browser,op=function(){return ip.isIE()||ip.isEdge()||ip.isFirefox()},ap=function(e,t){e.selection.setRng(t),Oh.scrollRangeIntoView(e,t)},sp=function(e,t,n){return n.breakAt.map(function(n){return e(t,n).breakAt.isSome()}).getOr(!1)},cp=function(e){return e.breakType===$f.Wrap&&0===e.positions.length},lp=function(e){return e.breakType===$f.Br&&1===e.positions.length},up=function(e,t,n){var r=e(t,n);return cp(r)||!Ls.isBr(n.getNode())&&lp(r)?!sp(e,t,r):r.breakAt.isNone()},dp=_u.curry(up,ch),fp=_u.curry(up,lh),hp=function(e,t,n){var r=Ld.fromRangeStart(t);return hg.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(!1)},pp=function(e,t,n,r){var i=e.selection.getRng(),o=t?1:-1;if(op()&&hp(t,i,n)){var a=Ff(o,e,n,!t,!0);return ap(e,a),!0}return!1},gp=function(e,t,n){return kh(t,n).orThunk(function(){return lt(n.getClientRects()).bind(function(n){return ah(uh(e,Ld.before(t)),n.left)})}).getOr(Ld.before(t))},mp=function(e,t,n){return Eh(t,n).orThunk(function(){return lt(n.getClientRects()).bind(function(n){return ah(dh(e,Ld.after(t)),n.left)})}).getOr(Ld.after(t))},vp=function(e,t){var n=t.getNode(e);return Ls.isElement(n)&&"TABLE"===n.nodeName?je.some(n):je.none()},yp=function(e,t,n,r){var i=rp.getForcedRootBlock(t);i?t.undoManager.transact(function(){var r=Ji.fromTag(i);Co.setAll(r,rp.getForcedRootBlockAttrs(t)),Fc.append(r,Ji.fromTag("br")),e?Fc.after(Ji.fromDom(n),r):Fc.before(Ji.fromDom(n),r);var o=t.dom.createRng();o.setStart(r.dom(),0),o.setEnd(r.dom(),0),ap(t,o)}):ap(t,r.toRange())},_p=function(e,t,n){var r=t?vp(!0,n):vp(!1,n),i=t===!1;r.fold(function(){return ap(e,n.toRange())},function(r){return hg.positionIn(i,e.getBody()).filter(function(e){return e.isEqual(n)}).fold(function(){return ap(e,n.toRange())},function(i){return yp(t,e,r,n)})})},bp=function(e,t,n,r){var i=e.selection.getRng(),o=Ld.fromRangeStart(i),a=e.getBody();if(!t&&dp(r,o)){var s=gp(a,n,o);return _p(e,t,s),!0}if(t&&fp(r,o)){var s=mp(a,n,o);return _p(e,t,s),!0}return!1},wp=function(e,t){return function(){return je.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return je.from(e.dom.getParent(n,"table")).map(function(r){return pp(e,t,r,n)})}).getOr(!1)}},xp=function(e,t){return function(){return je.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return je.from(e.dom.getParent(n,"table")).map(function(r){return bp(e,t,r,n)})}).getOr(!1)}},Cp=Ls.isContentEditableFalse,kp=function(e){return Ls.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)},Ep=function(e,t,n){var r,i,o,a,s,c=rd(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,i=e.scrollLeft||r.scrollLeft,o=e.scrollTop||r.scrollTop):(s=e.getBoundingClientRect(),i=e.scrollLeft-s.left,o=e.scrollTop-s.top),c.left+=i,c.right+=i,c.top+=o,c.bottom+=o,c.width=1,a=t.offsetWidth-t.clientWidth,a>0&&(n&&(a*=-1),c.left+=a,c.right+=a),c},Tp=function(e){var t,n,r,i,o;for(t=Ur("*[contentEditable=false]",e),i=0;i<t.length;i++)n=t[i],r=n.previousSibling,Fu(r)&&(o=r.data,1===o.length?r.parentNode.removeChild(r):r.deleteData(o.length-1,1)),r=n.nextSibling,Pu(r)&&(o=r.data,1===o.length?r.parentNode.removeChild(r):r.deleteData(0,1))},Sp=function(e,t,n){var r,i,o=Xc(je.none()),a=function(n,r){var a,l;if(s(),kp(r))return null;if(!t(r))return i=ju(r,n),l=r.ownerDocument.createRange(),Cp(i.nextSibling)?(l.setStart(i,0),l.setEnd(i,0)):(l.setStart(i,1),l.setEnd(i,1)),l;i=Bu("p",r,n),a=Ep(e,r,n),Ur(i).css("top",a.top);var u=Ur('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(a).appendTo(e)[0];return o.set(je.some({caret:u,element:r,before:n})),o.get().each(function(e){n&&Ur(e.caret).addClass("mce-visual-caret-before")}),c(),l=r.ownerDocument.createRange(),l.setStart(i,0),l.setEnd(i,0),l},s=function(){Tp(e),i&&(Rf.remove(i),i=null),o.get().each(function(e){Ur(e.caret).remove(),o.set(je.none())}),clearInterval(r)},c=function(){r=Ft.setInterval(function(){n()?Ur("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):Ur("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")},500)},l=function(){o.get().each(function(t){var n=Ep(e,t.element,t.before);Ur(t.caret).css(n)})},u=function(){return Ft.clearInterval(r)},d=function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"};return{show:a,hide:s,getCss:d,reposition:l,destroy:u}},Np=function(e){return Cp(e)||Ls.isTable(e)&&op()},Ap=Ls.isContentEditableFalse,jp=Ls.matchStyleValues("display","block table table-cell table-caption list-item"),Dp=Nu,Op=Tu,Rp=_u.curry,Bp=Ls.isElement,Pp=Xu,Fp=function(e){return e>0},Ip=function(e){return e<0},Lp=function(e,t){for(var n;n=e(t);)if(!Op(n))return n;return null},Mp=function(e,t,n,r,i){var o=new b(e,r);if(Ip(t)){if((Ap(e)||Op(e))&&(e=Lp(o.prev,!0),n(e)))return e;for(;e=Lp(o.prev,i);)if(n(e))return e}if(Fp(t)){if((Ap(e)||Op(e))&&(e=Lp(o.next,!0),n(e)))return e;for(;e=Lp(o.next,i);)if(n(e))return e}return null},Vp=function(e,t){for(;e&&e!==t;){if(jp(e))return e;e=e.parentNode}return null},$p=function(e,t,n){return Vp(e.container(),n)===Vp(t.container(),n)},Up=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),Bp(n)?n.childNodes[r+e]:null):null},qp=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Hp=function(e,t,n){return Vp(t,e)===Vp(n,e)},zp=function(e,t,n){var r,i;for(i=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[i],Dp(r)&&(r=r[i]),Ap(r)){if(Hp(t,r,n))return r;break}if(Pp(r))break;n=n.parentNode}return null},Wp=Rp(qp,!0),Kp=Rp(qp,!1),Xp=function(e,t,n){var r,i,o,a,s=Rp(zp,!0,t),c=Rp(zp,!1,t);if(i=n.startContainer,o=n.startOffset,Tu(i)){if(Bp(i)||(i=i.parentNode),a=i.getAttribute("data-mce-caret"),"before"===a&&(r=i.nextSibling,Np(r)))return Wp(r);if("after"===a&&(r=i.previousSibling,Np(r)))return Kp(r)}if(!n.collapsed)return n;if(Ls.isText(i)){if(Dp(i)){if(1===e){if(r=c(i))return Wp(r);if(r=s(i))return Kp(r)}if(e===-1){if(r=s(i))return Kp(r);if(r=c(i))return Wp(r)}return n}if(Fu(i)&&o>=i.data.length-1)return 1===e&&(r=c(i))?Wp(r):n;if(Pu(i)&&o<=1)return e===-1&&(r=s(i))?Kp(r):n;if(o===i.data.length)return r=c(i),r?Wp(r):n;if(0===o)return r=s(i),r?Kp(r):n}return n},Yp=function(e,t){var n=Up(e,t);return Ap(n)&&!Ls.isBogusAll(n)},Jp=function(e,t){return Ls.isTable(Up(e,t))},Gp=function(e,t){return je.from(Up(e?0:-1,t)).filter(Ap)},Zp=function(e,t,n){var r=Xp(e,t,n);return e===-1?S.fromRangeStart(r):S.fromRangeEnd(r)},Qp=Rp(Yp,0),eg=Rp(Yp,-1),tg=Rp(Jp,0),ng=Rp(Jp,-1),rg=function(e,t,n){var r=e?Ld.before(n):Ld.after(n);return ug(e,t,r)},ig=function(e){return Ls.isBr(e)?Ld.before(e):Ld.after(e)},og=function(e){return Ld.isTextPosition(e)?0===e.offset():Xu(e.getNode())},ag=function(e){if(Ld.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Xu(e.getNode(!0))},sg=function(e,t){return!Ld.isTextPosition(e)&&!Ld.isTextPosition(t)&&e.getNode()===t.getNode(!0)},cg=function(e){return!Ld.isTextPosition(e)&&Ls.isBr(e.getNode())},lg=function(e,t,n){return e?!sg(t,n)&&!cg(t)&&ag(t)&&og(n):!sg(n,t)&&og(t)&&ag(n)},ug=function(e,t,n){var r=eh(t);return je.from(e?r.next(n):r.prev(n))},dg=function(e,t,n){return ug(e,t,n).bind(function(r){return $p(n,r,t)&&lg(e,n,r)?ug(e,t,r):je.some(r)})},fg=function(e,t){var n=e?t.firstChild:t.lastChild;return Ls.isText(n)?je.some(Ld(n,e?0:n.data.length)):n?Xu(n)?je.some(e?Ld.before(n):ig(n)):rg(e,t,n):je.none()},hg={fromPosition:ug,nextPosition:be(ug,!0),prevPosition:be(ug,!1),navigate:dg,positionIn:fg,firstPositionIn:be(fg,!0),lastPositionIn:be(fg,!1)},pg=function(e){return"string"==typeof e.start},gg=function(e){return e.hasOwnProperty("rng")},mg=function(e){return e.hasOwnProperty("id")},vg=function(e){return e.hasOwnProperty("name")},yg=function(e){return xr.isArray(e.start)},_g=function(e,t){return!e.isBlock(t)||t.innerHTML||St.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},bg=function(e,t){var n,r;return n=e.createRng(),r=Zd(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=Zd(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n},wg=function(e,t){var n=e.ownerDocument.createTextNode(Cu.ZWSP);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},xg=function(e){return e.hasChildNodes()===!1},Cg=function(e,t){return hg.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},kg=function(e,t,n){return!(!xg(t)||!_f(e,t)||(wg(t,n),0))},Eg=function(e,t,n,r){var i,o,a,s,c=n[t?"start":"end"],l=e.getRoot();if(c){for(a=c[0],o=l,i=c.length-1;i>=1;i--){if(s=o.childNodes,kg(l,o,r))return!0;if(c[i]>s.length-1)return!!kg(l,o,r)||Cg(o,r);o=s[c[i]]}3===o.nodeType&&(a=Math.min(c[0],o.nodeValue.length)),1===o.nodeType&&(a=Math.min(c[0],o.childNodes.length)),t?r.setStart(o,a):r.setEnd(o,a)}return!0},Tg=function(e){return Ls.isText(e)&&e.data.length>0},Sg=function(e,t,n){var r,i,o,a,s,c,l=e.get(n.id+"_"+t),u=n.keep;if(l){if(r=l.parentNode,"start"===t?(u?l.hasChildNodes()?(r=l.firstChild,i=1):Tg(l.nextSibling)?(r=l.nextSibling,i=0):Tg(l.previousSibling)?(r=l.previousSibling,i=l.previousSibling.data.length):(r=l.parentNode,i=e.nodeIndex(l)+1):i=e.nodeIndex(l),s=r,c=i):(u?l.hasChildNodes()?(r=l.firstChild,i=1):Tg(l.previousSibling)?(r=l.previousSibling,i=l.previousSibling.data.length):(r=l.parentNode,i=e.nodeIndex(l)):i=e.nodeIndex(l),s=r,c=i),!u){for(a=l.previousSibling,o=l.nextSibling,xr.each(xr.grep(l.childNodes),function(e){Ls.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});l=e.get(n.id+"_"+t);)e.remove(l,!0);a&&o&&a.nodeType===o.nodeType&&Ls.isText(a)&&!St.opera&&(i=a.nodeValue.length,a.appendData(o.nodeValue),e.remove(o),"start"===t?(s=a,c=i):(s=a,c=i))}return je.some(Ld(s,c))}return je.none()},Ng=function(e,t){return e.isSome()?e:t},Ag=function(e,t){var n=e.createRng();return Eg(e,!0,t,n)&&Eg(e,!1,t,n)?je.some(n):je.none()},jg=function(e,t){var n=Sg(e,"start",t),r=Sg(e,"end",t);return md([n,Ng(r,n)],function(t,n){var r=e.createRng();return r.setStart(_g(e,t.container()),t.offset()),r.setEnd(_g(e,n.container()),n.offset()),r})},Dg=function(e,t){return je.from(e.select(t.name)[t.index]).map(function(t){var n=e.createRng();return n.selectNode(t),n})},Og=function(e,t){var n=e.dom;if(t){if(yg(t))return Ag(n,t);if(pg(t))return je.some(bg(n,t));if(mg(t))return jg(n,t);if(vg(t))return Dg(n,t);if(gg(t))return je.some(t.rng)}return je.none()},Rg={resolve:Og},Bg=function(e,t,n){return mf.getBookmark(e,t,n)},Pg=function(e,t){Rg.resolve(e,t).each(function(t){e.setRng(t)})},Fg=function(e){return Ls.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Ig={getBookmark:Bg,moveToBookmark:Pg,isBookmarkNode:Fg},Lg=function(e){return e&&/^(IMG)$/.test(e.nodeName)},Mg=function(e,t,n){var r,i,o,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!Lg(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(o=s.childNodes,a<o.length?(s=o[a],r=new b(s,e.getParent(s,e.isBlock))):(s=o[o.length-1],r=new b(s,e.getParent(s,e.isBlock)),r.next(!0)),i=r.current();i;i=r.next())if(3===i.nodeType&&!qg(i))return n.setStart(i,0),void t.setRng(n)},Vg=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!qg(e))return e},$g=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},Ug=function(e,t,n){return e.schema.isValidChild(t,n)},qg=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},Hg=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},zg=function(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},Wg=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},Kg=function(e,t,n){return Wg(e,e.getStyle(t,n),n)},Xg=function(e,t){var n;return e.getParent(t,function(t){return n=e.getStyle(t,"text-decoration"),n&&"none"!==n}),n},Yg=function(e,t,n){return e.getParents(t,n,e.getRoot())},Jg={isInlineBlock:Lg,moveStart:Mg,getNonWhiteSpaceSibling:Vg,isTextBlock:$g,isValid:Ug,isWhiteSpaceNode:qg,replaceVars:Hg,isEq:zg,normalizeStyleValue:Wg,getStyle:Kg,getTextDecoration:Xg,getParents:Yg},Gg=Ig.isBookmarkNode,Zg=Jg.getParents,Qg=Jg.isWhiteSpaceNode,em=Jg.isTextBlock,tm=function(e,t){for("undefined"==typeof t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},nm=function(e,t){var n=tm(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=tm(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(e=n.node,e.splitText(n.offset-1))}return e},rm=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},im=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},om=function(e,t,n,r){var i,o,a=n.nodeValue;return"undefined"==typeof r&&(r=e?a.length:0),e?(i=a.lastIndexOf(" ",r),o=a.lastIndexOf("",r),i=i>o?i:o,i===-1||t||i++):(i=a.indexOf(" ",r),o=a.indexOf("",r),i=i!==-1&&(o===-1||i<o)?i:o),i},am=function(e,t,n,r,i,o){var a,s,c,l;if(3===n.nodeType){if(c=om(i,o,n,r),c!==-1)return{container:n,offset:c};l=n}for(a=new b(n,e.getParent(n,e.isBlock)||t);s=a[i?"prev":"next"]();)if(3!==s.nodeType||Gg(s.parentNode)){if(e.isBlock(s)||Jg.isEq(s,"BR"))break}else if(l=s,c=om(i,o,s),c!==-1)return{container:s,offset:c};if(l)return r=i?0:l.length,{container:l,offset:r}},sm=function(e,t,n,r,i){var o,a,s,c;for(3===r.nodeType&&0===r.nodeValue.length&&r[i]&&(r=r[i]),o=Zg(e,r),a=0;a<o.length;a++)for(s=0;s<t.length;s++)if(c=t[s],!("collapsed"in c&&c.collapsed!==n.collapsed)&&e.is(o[a],c.selector))return o[a];return r},cm=function(e,t,n,r){var i,o=e.dom,a=o.getRoot();if(t[0].wrapper||(i=o.getParent(n,t[0].block,a)),!i){var s=o.getParent(n,"LI,TD,TH");i=o.getParent(3===n.nodeType?n.parentNode:n,function(t){return t!==a&&em(e,t)},s)}if(i&&t[0].wrapper&&(i=Zg(o,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i[r]&&!o.isBlock(i[r])&&(i=i[r],!Jg.isEq(i,"br")););return i||n},lm=function(e,t,n,r,i,o,a){var s,c,l,u,d;if(s=c=a?n:i,u=a?"previousSibling":"nextSibling",d=e.getRoot(),3===s.nodeType&&!Qg(s)&&(a?r>0:o<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(c))return c;for(l=c[u];l;l=l[u])if(!Gg(l)&&!Qg(l)&&!rm(l))return c;if(c===d||c.parentNode===d){s=c;break}c=c.parentNode}return s},um=function(e,t,n,r){var i,o=t.startContainer,a=t.startOffset,s=t.endContainer,c=t.endOffset,l=e.dom;return 1===o.nodeType&&o.hasChildNodes()&&(o=hd(o,a),3===o.nodeType&&(a=0)),1===s.nodeType&&s.hasChildNodes()&&(s=hd(s,t.collapsed?c:c-1),3===s.nodeType&&(c=s.nodeValue.length)),o=im(l,o),s=im(l,s),(Gg(o.parentNode)||Gg(o))&&(o=Gg(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,3===o.nodeType&&(a=t.collapsed?o.length:0)),(Gg(s.parentNode)||Gg(s))&&(s=Gg(s)?s:s.parentNode,s=t.collapsed?s.nextSibling||s:s.previousSibling||s,3===s.nodeType&&(c=t.collapsed?0:s.length)),t.collapsed&&(i=am(l,e.getBody(),o,a,!0,r),i&&(o=i.container,a=i.offset),i=am(l,e.getBody(),s,c,!1,r),i&&(s=i.container,c=i.offset)),n[0].inline&&(s=r?s:nm(s,c)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===o.nodeType&&0!==a||(o=lm(l,n,o,a,s,c,!0)),n[0].inline&&3===s.nodeType&&c!==s.nodeValue.length||(s=lm(l,n,o,a,s,c,!1))),n[0].selector&&n[0].expand!==!1&&!n[0].inline&&(o=sm(l,n,t,o,"previousSibling"),s=sm(l,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(o=cm(e,n,o,"previousSibling"),s=cm(e,n,s,"nextSibling"),n[0].block&&(l.isBlock(o)||(o=lm(l,n,o,a,s,c,!0)),l.isBlock(s)||(s=lm(l,n,o,a,s,c,!1)))),1===o.nodeType&&(a=l.nodeIndex(o),o=o.parentNode),1===s.nodeType&&(c=l.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:c}},dm={expandRng:um},fm=xr.each,hm=function(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e},pm=function(e,t,n){var r,i,o,a,s,c,l,u=t.startContainer,d=t.startOffset,f=t.endContainer,h=t.endOffset;if(l=e.select("td[data-mce-selected],th[data-mce-selected]"),l.length>0)return void fm(l,function(e){n([e])});var p=function(e){var t;return t=e[0],3===t.nodeType&&t===u&&d>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&e.length>0&&t===f&&3===t.nodeType&&e.splice(e.length-1,1),e},g=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},m=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},v=function(e,t,r){var i=r?"nextSibling":"previousSibling";for(a=e,s=a.parentNode;a&&a!==t;a=s)s=a.parentNode,c=g(a===e?a:a[i],i),c.length&&(r||c.reverse(),n(p(c)))};if(1===u.nodeType&&u.hasChildNodes()&&(u=u.childNodes[d]),1===f.nodeType&&f.hasChildNodes()&&(f=hm(f,h)),u===f)return n(p([u]));for(r=e.findCommonAncestor(u,f),a=u;a;a=a.parentNode){if(a===f)return v(u,r,!0);if(a===r)break}for(a=f;a;a=a.parentNode){if(a===u)return v(f,r);if(a===r)break}i=m(u,r)||u,o=m(f,r)||f,v(u,i,!0),c=g(i===u?i:i.nextSibling,"nextSibling",o===f?o.nextSibling:o),c.length&&n(p(c)),v(f,o)},gm={walk:pm},mm=function(){return"\ufeff"},vm=N(ao.isText,"text"),ym=function(e){return vm.get(e)},_m=function(e){return vm.getOption(e)},bm=function(e,t){vm.set(e,t)},wm={get:ym,getOption:_m,set:bm},xm=function(e){return ao.isText(e)&&wm.get(e)===mm()},Cm=function(e,t,n,r){return Fa.parent(t).fold(function(){return"skipping"},function(i){return"br"===r||xm(t)?"skipping":Ul(t)?"existing":yf(t)?"caret":Jg.isValid(e,n,r)&&Jg.isValid(e,ao.name(i),n)?"valid":"invalid-child"})},km=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n},Em=function(e,t){var n=dm.expandRng(e,t,[{inline:!0}],!1);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},Tm=function(e,t,n,r,i){var o=i.uid,a=void 0===o?Yl("mce-annotation"):o,s=km(i,["uid"]),c=[],l=Ji.fromTag("span");dl.add(l,Ll()),Co.set(l,""+Vl(),a),Co.set(l,""+Ml(),n);var u=r(a,s),d=u.attributes,f=void 0===d?{}:d,h=u.classes,p=void 0===h?[]:h;Co.setAll(l,f),ru.add(l,p);var g=Xc(je.none()),m=function(){g.set(je.none())},v=function(){return g.get().getOrThunk(function(){var e=uu.shallow(l);return c.push(e),g.set(je.some(e)),e})},y=function(e){ze(e,_)},_=function(t){var n=Cm(e,t,"span",ao.name(t));switch(n){case"invalid-child":m();var r=Fa.children(t);y(r),m();break;case"valid":var i=v();Fc.wrap(t,i);break;case"skipping":case"existing":case"caret":}},b=function(e){var t=He(e,Ji.fromDom);y(t)};return gm.walk(e.dom,t,function(e){m(),b(e)}),c},Sm=function(e,t,n,r){e.undoManager.transact(function(){var i=e.selection.getRng();i.collapsed&&Em(e,i);var o=mf.getPersistentBookmark(e.selection,!0),a=e.selection.getRng();Tm(e,a,t,n.decorate,r),e.selection.moveToBookmark(o)})},Nm=function(e){return e.firstChild&&e.firstChild===e.lastChild},Am=function(e){return"br"===e.name||""===e.value},jm=function(e,t){var n=e.getBlockElements();return n[t.name]&&Nm(t)&&Am(t.firstChild)},Dm=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||jm(e,t))},Om=function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),Dm(e,r)&&(r=r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)},Rm=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},Bm=function(e,t,n){var r=t.serialize(n),i=e.createFragment(r);return Rm(i)},Pm=function(e){return xr.grep(e.childNodes,function(e){return"LI"===e.nodeName})},Fm=function(e){return""===e.data||Ls.isBr(e)},Im=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&Fm(e.firstChild)},Lm=function(e){return!e.firstChild||Im(e)},Mm=function(e){return e.length>0&&Lm(e[e.length-1])?e.slice(0,-1):e},Vm=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},$m=function(e,t){return!!Vm(e,t)},Um=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},qm=function(e,t){var n=Ld.before(e),r=eh(t),i=r.next(n);return i?i.toRange():null},Hm=function(e,t){var n=Ld.after(e),r=eh(t),i=r.prev(n);return i?i.toRange():null},zm=function(e,t,n,r){var i=Um(e,r),o=e.parentNode;return o.insertBefore(i[0],e),xr.each(t,function(t){o.insertBefore(t,e)}),o.insertBefore(i[1],e),o.removeChild(e),Hm(t[t.length-1],n)},Wm=function(e,t,n){var r=e.parentNode;return xr.each(t,function(t){r.insertBefore(t,e)}),qm(e,n)},Km=function(e,t,n,r){return r.insertAfter(t.reverse(),e),Hm(t[0],n)},Xm=function(e,t,n,r){var i=Bm(t,e,r),o=Vm(t,n.startContainer),a=Mm(Pm(i.firstChild)),s=1,c=2,l=t.getRoot(),u=function(e){var r=Ld.fromRangeStart(n),i=eh(t.getRoot()),a=e===s?i.prev(r):i.next(r);return!a||Vm(t,a.getNode())!==o};return u(s)?Wm(o,a,l):u(c)?Km(o,a,l,t):zm(o,a,l,n)},Ym={isListFragment:Om,insertAtCaret:Xm,isParentBlockLi:$m,trimListItems:Mm,listItems:Pm},Jm=xr.each,Gm=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return Jm(e.getAttribs(t),function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&0!==i.indexOf("data-")&&(n[i]=e.getAttrib(t,i))}),n},i=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(n=t[r],"undefined"==typeof n)return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!(!i(r(t),r(n))||!i(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||Ig.isBookmarkNode(t)||Ig.isBookmarkNode(n))}},Zm=function(e){for(var t=[],n=e.dom();n;)t.push(Ji.fromDom(n)),n=n.lastChild;return t},Qm=function(e){var t=Cl.descendants(e,"br"),n=Xe(Zm(e).slice(-1),hs);t.length===n.length&&ze(n,zc.remove)},ev=function(e){zc.empty(e),Fc.append(e,Ji.fromHtml('<br data-mce-bogus="1">'))},tv=function(e){return ao.isText(e)?""===wm.get(e):hs(e)},nv=function(e){return 1===Xe(Fa.children(e),tv).length},rv=function(e){Fa.lastChild(e).each(function(t){Fa.prevSibling(t).each(function(n){ds(e)&&hs(t)&&ds(n)&&zc.remove(t)})})},iv={removeTrailingBr:Qm,fillWithPaddingBr:ev,isPaddedElement:nv,trimBlockTrailingBr:rv},ov=xr.makeMap,av=function(e,t,n,r){var i=document.createRange();return i.setStart(e,t),i.setEnd(n,r),i},sv=function(e){var t=Ld.fromRangeStart(e),n=Ld.fromRangeEnd(e),r=e.commonAncestorContainer;return hg.fromPosition(!1,r,n).map(function(i){return!$p(t,n,r)&&$p(t,i,r)?av(t.container(),t.offset(),i.container(),i.offset()):e}).getOr(e)},cv=function(e){return e.collapsed?e:sv(e)},lv={normalize:cv},uv=Ls.matchNodeNames("td th"),dv=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,i=n.lastChild;!r||r===i&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},fv=function(e,t){je.from(e.getParent(t,"td,th")).map(Ji.fromDom).each(iv.trimBlockTrailingBr)},hv=function(e,t,n){var r,i,o,a,s,c,l,u,d,f,h,p,g=e.schema.getTextInlineElements(),m=e.selection,v=e.dom,y=function(e){var t,n,r;t=m.getRng(),n=t.startContainer,r=t.startOffset;var i=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):i("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):i("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e},_=function(){var e,n,r;e=m.getRng(),n=e.startContainer,r=e.startOffset,3===n.nodeType&&e.collapsed&&(""===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):""===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t)))},b=function(){if(p){var t=e.getBody(),n=new Gm(v);xr.each(v.select("*[data-mce-fragment]"),function(e){for(var r=e.parentNode;r&&r!==t;r=r.parentNode)g[e.nodeName.toLowerCase()]&&n.compare(r,e)&&v.remove(e,!0)})}},w=function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")},x=function(e){xr.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})},C=function(e){return!!e.getAttribute("data-mce-fragment")},k=function(t){return t&&!e.schema.getShortEndedElements()[t.nodeName]},E=function(t){var n,r,i,o=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null};if(t){if(m.scrollIntoView(t),n=o(t))return v.remove(t),void m.select(n);u=v.createRng(),d=t.previousSibling,d&&3===d.nodeType?(u.setStart(d,d.nodeValue.length),St.ie||(f=t.nextSibling,f&&3===f.nodeType&&(d.appendData(f.data),f.parentNode.removeChild(f)))):(u.setStartBefore(t),u.setEndBefore(t));var a=function(t){var n=Ld.fromRangeStart(t),r=eh(e.getBody());if(n=r.next(n))return n.toRange()};r=v.getParent(t,v.isBlock),v.remove(t),r&&v.isEmpty(r)&&(e.$(r).empty(),u.setStart(r,0),u.setEnd(r,0),uv(r)||C(r)||!(i=a(u))?v.add(r,v.create("br",{"data-mce-bogus":"1"})):(u=i,v.remove(r))),m.setRng(u)}};if(/^ | $/.test(t)&&(t=y(t)),r=e.parser,p=n.merge,i=D({validate:e.settings.validate},e.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',c={content:t,format:"html",selection:!0,paste:n.paste},c=e.fire("BeforeSetContent",c),c.isDefaultPrevented())return void e.fire("SetContent",{content:c.content,format:"html",selection:!0,paste:n.paste});t=c.content,t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,h),u=m.getRng();var T=u.startContainer||(u.parentElement?u.parentElement():null),S=e.getBody();T===S&&m.isCollapsed()&&v.isBlock(S.firstChild)&&k(S.firstChild)&&v.isEmpty(S.firstChild)&&(u=v.createRng(),u.setStart(S.firstChild,0),u.setEnd(S.firstChild,0),m.setRng(u)),m.isCollapsed()||(e.selection.setRng(lv.normalize(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),_()),o=m.getNode();var N={context:o.nodeName.toLowerCase(),data:n.data,insert:!0};if(s=r.parse(t,N),n.paste===!0&&Ym.isListFragment(e.schema,s)&&Ym.isParentBlockLi(v,o))return u=Ym.insertAtCaret(i,v,e.selection.getRng(),s),e.selection.setRng(u),void e.fire("SetContent",c);if(w(s),d=s.lastChild,"mce_marker"===d.attr("id"))for(l=d,d=d.prev;d;d=d.walk(!0))if(3===d.type||!v.isBlock(d.name)){e.schema.isValidChild(d.parent.name,"span")&&d.parent.insert(l,d,"br"===d.name);break}if(e._selectionOverrides.showBlockCaretContainer(o),N.invalid){for(m.setContent(h),o=m.getNode(),a=e.getBody(),9===o.nodeType?o=d=a:d=o;d!==a;)o=d,d=d.parentNode;t=o===a?a.innerHTML:v.getOuterHTML(o),t=i.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(s)}))),o===a?v.setHTML(a,t):v.setOuterHTML(o,t)}else t=i.serialize(s),dv(e,t,o);b(),E(v.get("mce_marker")),x(e.getBody()),fv(e.dom,e.selection.getStart()),e.fire("SetContent",c),e.addVisual()},pv=function(e){var t;return"string"!=typeof e?(t=xr.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}},gv=function(e,t){var n=pv(t);hv(e,n.content,n.details)},mv={insertAtCaret:gv},vv=Ko("sections","settings"),yv=Hi.detect(),_v=yv.deviceType.isTouch(),bv=["lists","autolink","autosave"],wv={theme:"mobile"},xv=function(e){var t=Pe(e)?e.join(" "):e,n=He(Re(t)?t.split(" "):[],Pi);return Xe(n,function(e){return e.length>0})},Cv=function(e){return Xe(e,be(Ue,bv))},kv=function(e,t){var n=fo(t,function(t,n){return Ue(e,n)});return vv(n.t,n.f)},Ev=function(e,t,n){var r=e.sections(),i=r.hasOwnProperty(t)?r[t]:{};return xr.extend({},n,i)},Tv=function(e,t){return e.sections().hasOwnProperty(t)},Sv=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}},Nv=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?xr.extend({},e.external_plugins,n):n},Av=function(e,t){return[].concat(xv(e)).concat(xv(t))},jv=function(e,t,n,r){var i=xv(n.forced_plugins),o=xv(r.plugins),a=e&&Tv(t,"mobile")?Cv(o):o,s=Av(i,a);return xr.extend(r,{plugins:s.join(" ")})},Dv=function(e,t){var n=t.settings().inline;return e&&Tv(t,"mobile")&&!n},Ov=function(e,t,n,r){var i=kv(["mobile"],r),o=xr.extend(t,n,i.settings(),Dv(e,i)?Ev(i,"mobile",wv):{},{validate:!0,content_editable:i.settings().inline,external_plugins:Nv(n,i.settings())});return jv(e,i,n,o)},Rv=function(e,t,n,r,i){var o=Sv(t,n,e);return Ov(_v,o,r,i)},Bv=function(e,t,n){return je.from(t.settings[n]).filter(e)},Pv=be(Bv,Re),Fv=function(e){var t={};return"string"==typeof e?ze(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){var n=e.split("=");n.length>1?t[xr.trim(n[0])]=xr.trim(n[1]):t[xr.trim(n[0])]=xr.trim(n)}):t=e,t},Iv=function(e){return function(t){return Pe(t)&&rt(t,e)}},Lv=function(e,t,n,r){var i=t in e.settings?e.settings[t]:n;return"hash"===r?Fv(i):"string"===r?Bv(Re,e,t).getOr(n):"number"===r?Bv(Me,e,t).getOr(n):"boolean"===r?Bv(Ie,e,t).getOr(n):"object"===r?Bv(Be,e,t).getOr(n):"array"===r?Bv(Pe,e,t).getOr(n):"string[]"===r?Bv(Iv(Re),e,t).getOr(n):"function"===r?Bv(Le,e,t).getOr(n):i},Mv=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Vv=function(e){return Mv.test(e)},$v=function(e,t){var n=Pv(e,"inline_boundaries_selector").getOr("a[href],code");return sa.is(Ji.fromDom(t),n)},Uv=function(e){return"rtl"===Cc.DOM.getStyle(e,"direction",!0)||Vv(e.textContent)},qv=function(e,t,n){return Xe(Cc.DOM.getParents(n.container(),"*",t),e)},Hv=function(e,t,n){var r=qv(e,t,n);return je.from(r[r.length-1])},zv=function(e,t,n){var r=Vp(t,e),i=Vp(n,e);return r&&r===i},Wv=function(e){return Du(e)||Ou(e)},Kv=function(e,t){var n=t.container(),r=t.offset();return e?Su(n)?Ls.isText(n.nextSibling)?Ld(n.nextSibling,0):Ld.after(n):Du(t)?Ld(n,r+1):t:Su(n)?Ls.isText(n.previousSibling)?Ld(n.previousSibling,n.previousSibling.data.length):Ld.before(n):Ou(t)?Ld(n,r-1):t;
},Xv=be(Kv,!0),Yv=be(Kv,!1),Jv={isInlineTarget:$v,findRootInline:Hv,isRtl:Uv,isAtZwsp:Wv,normalizePosition:Kv,normalizeForwards:Xv,normalizeBackwards:Yv,hasSameParentBlock:zv},Gv=function(e){return function(t){return ga.eq(e,Ji.fromDom(t.dom().parentNode))}},Zv=function(e,t){return ga.contains(e,t)?jl.closest(t,function(e){return ps(e)||ms(e)},Gv(e)):je.none()},Qv=function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},ey=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),Qv(e))},ty=function(e,t,n){return md([hg.firstPositionIn(n),hg.lastPositionIn(n)],function(r,i){var o=Jv.normalizePosition(!0,r),a=Jv.normalizePosition(!1,i),s=Jv.normalizePosition(!1,t);return e?hg.nextPosition(n,s).map(function(e){return e.isEqual(a)&&t.isEqual(o)}).getOr(!1):hg.prevPosition(n,s).map(function(e){return e.isEqual(o)&&t.isEqual(a)}).getOr(!1)}).getOr(!0)},ny={getParentBlock:Zv,paddEmptyBody:ey,willDeleteLastPositionInElement:ty},ry=function(e){return Il.first(e).isSome()},iy=function(e,t,n){return Il.ancestor(e,t,n).isSome()},oy=function(e,t){return Il.sibling(e,t).isSome()},ay=function(e,t){return Il.child(e,t).isSome()},sy=function(e,t){return Il.descendant(e,t).isSome()},cy=function(e,t,n){return Il.closest(e,t,n).isSome()},ly={any:ry,ancestor:iy,sibling:oy,child:ay,descendant:sy,closest:cy},uy=function(e,t){var n=Ji.fromDom(e),r=Ji.fromDom(t);return ly.ancestor(r,"pre,code",be(ga.eq,n))},dy=function(e,t){return Ls.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&uy(e,t)===!1},fy=function(e){return Ls.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},hy=function(e,t){return Xu(t)&&dy(e,t)===!1||fy(t)||py(t)},py=Ls.hasAttribute("data-mce-bookmark"),gy=Ls.hasAttribute("data-mce-bogus"),my=Ls.hasAttributeValue("data-mce-bogus","all"),vy=function(e){var t,n,r=0;if(hy(e,e))return!1;if(n=e.firstChild,!n)return!0;t=new b(n,e);do if(my(n))n=t.next(!0);else if(gy(n))n=t.next();else if(Ls.isBr(n))r++,n=t.next();else{if(hy(e,n))return!1;n=t.next()}while(n);return r<=1},yy=function(e){return vy(e.dom())},_y={isEmpty:yy},by=Ko("block","position"),wy=Ko("from","to"),xy=function(e,t){var n=Ji.fromDom(e),r=Ji.fromDom(t.container());return ny.getParentBlock(n,r).map(function(e){return by(e,t)})},Cy=function(e){return ga.eq(e.from().block(),e.to().block())===!1},ky=function(e){return Fa.parent(e.from().block()).bind(function(t){return Fa.parent(e.to().block()).filter(function(e){return ga.eq(t,e)})}).isSome()},Ey=function(e){return Ls.isContentEditableFalse(e.from().block())===!1&&Ls.isContentEditableFalse(e.to().block())===!1},Ty=function(e,t,n){return Ls.isBr(n.position().getNode())&&_y.isEmpty(n.block())===!1?hg.positionIn(!1,n.block().dom()).bind(function(r){return r.isEqual(n.position())?hg.fromPosition(t,e,r).bind(function(t){return xy(e,t)}):je.some(n)}).getOr(n):n},Sy=function(e,t,n){var r=xy(e,Ld.fromRangeStart(n)),i=r.bind(function(n){return hg.fromPosition(t,e,n.position()).bind(function(n){return xy(e,n).map(function(n){return Ty(e,t,n)})})});return md([r,i],wy).filter(function(e){return Cy(e)&&ky(e)&&Ey(e)})},Ny=function(e,t,n){return n.collapsed?Sy(e,t,n):je.none()},Ay={read:Ny},jy=function(e){return e.slice(0,-1)},Dy=function(e,t,n){return ga.contains(t,e)?jy(Fa.parents(e,function(e){return n(e)||ga.eq(e,t)})):[]},Oy=function(e,t){return Dy(e,t,ye(!1))},Ry=function(e,t){return[e].concat(Oy(e,t))},By={parentsUntil:Dy,parents:Oy,parentsAndSelf:Ry},Py=function(e){var t=Fa.children(e);return Ze(t,ds).fold(function(){return t},function(e){return t.slice(0,e)})},Fy=function(e){var t=Py(e);return ze(t,zc.remove),t},Iy=function(e,t){var n=By.parentsAndSelf(t,e);return Ge(n.reverse(),_y.isEmpty).each(zc.remove)},Ly=function(e){return 0===Xe(Fa.prevSiblings(e),function(e){return!_y.isEmpty(e)}).length},My=function(e,t,n,r){if(_y.isEmpty(n))return iv.fillWithPaddingBr(n),hg.firstPositionIn(n.dom());Ly(r)&&_y.isEmpty(t)&&Fc.before(r,Ji.fromTag("br"));var i=hg.prevPosition(n.dom(),Ld.before(r.dom()));return ze(Fy(t),function(e){Fc.before(r,e)}),Iy(e,t),i},Vy=function(e,t,n){if(_y.isEmpty(n))return zc.remove(n),_y.isEmpty(t)&&iv.fillWithPaddingBr(t),hg.firstPositionIn(t.dom());var r=hg.lastPositionIn(n.dom());return ze(Fy(t),function(e){Fc.append(n,e)}),Iy(e,t),r},$y=function(e,t){var n=By.parentsAndSelf(t,e);return je.from(n[n.length-1])},Uy=function(e,t){return ga.contains(t,e)?$y(t,e):je.none()},qy=function(e,t){hg.positionIn(e,t.dom()).map(function(e){return e.getNode()}).map(Ji.fromDom).filter(hs).each(zc.remove)},Hy=function(e,t,n){return qy(!0,t),qy(!1,n),Uy(t,n).fold(be(Vy,e,t,n),be(My,e,t,n))},zy=function(e,t,n,r){return t?Hy(e,r,n):Hy(e,n,r)},Wy={mergeBlocks:zy},Ky=function(e,t){var n,r=Ji.fromDom(e.getBody());return n=Ay.read(r.dom(),t,e.selection.getRng()).bind(function(e){return Wy.mergeBlocks(r,t,e.from().block(),e.to().block())}),n.each(function(t){e.selection.setRng(t.toRange())}),n.isSome()},Xy={backspaceDelete:Ky},Yy=function(e,t){var n=t.getRng();return md([ny.getParentBlock(e,Ji.fromDom(n.startContainer)),ny.getParentBlock(e,Ji.fromDom(n.endContainer))],function(r,i){return ga.eq(r,i)===!1&&(n.deleteContents(),Wy.mergeBlocks(e,!0,r,i).each(function(e){t.setRng(e.toRange())}),!0)}).getOr(!1)},Jy=function(e,t){var n=Ji.fromDom(t),r=be(ga.eq,e);return jl.ancestor(n,_s,r).isSome()},Gy=function(e,t){return Jy(e,t.startContainer)||Jy(e,t.endContainer)},Zy=function(e,t){var n=hg.prevPosition(e.dom(),Ld.fromRangeStart(t)).isNone(),r=hg.nextPosition(e.dom(),Ld.fromRangeEnd(t)).isNone();return!Gy(e,t)&&n&&r},Qy=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},e_=function(e){var t=Ji.fromDom(e.getBody()),n=e.selection.getRng();return Zy(t,n)?Qy(e):Yy(t,e.selection)},t_=function(e,t){return!e.selection.isCollapsed()&&e_(e)},n_={backspaceDelete:t_},r_=function(e){if(!Pe(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return ze(e,function(r,i){var o=so(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!Pe(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];var c=function(e){var n=so(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));var i=rt(t,function(e){return Ue(n,e)});if(!i)throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)};return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);var t=arguments[i];return t.apply(null,r)},match:c,log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}}),n},i_={generate:r_},o_=function(e){return _s(Ji.fromDom(e))||ms(Ji.fromDom(e))},a_=i_.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),s_=function(e,t){var n=t.getNode(e===!1),r=e?"after":"before";return Ls.isElement(n)&&n.getAttribute("data-mce-caret")===r},c_=function(e,t,n,r){var i=function(t){return fs(Ji.fromDom(t))&&!$p(n,r,e)};return Gp(!t,n).fold(function(){return Gp(t,r).fold(ye(!1),i)},i)},l_=function(e,t,n,r){var i=r.getNode(t===!1);return ny.getParentBlock(Ji.fromDom(e),Ji.fromDom(n.getNode())).map(function(e){return _y.isEmpty(e)?a_.remove(e.dom()):a_.moveToElement(i)}).orThunk(function(){return je.some(a_.moveToElement(i))})},u_=function(e,t,n){return hg.fromPosition(t,e,n).bind(function(r){return o_(r.getNode())?je.none():c_(e,t,n,r)?je.none():t&&Ls.isContentEditableFalse(r.getNode())?l_(e,t,n,r):t===!1&&Ls.isContentEditableFalse(r.getNode(!0))?l_(e,t,n,r):t&&eg(n)?je.some(a_.moveToPosition(r)):t===!1&&Qp(n)?je.some(a_.moveToPosition(r)):je.none()})},d_=function(e,t){return e&&Ls.isContentEditableFalse(t.nextSibling)?je.some(a_.moveToElement(t.nextSibling)):e===!1&&Ls.isContentEditableFalse(t.previousSibling)?je.some(a_.moveToElement(t.previousSibling)):je.none()},f_=function(e,t,n){return n.fold(function(e){return je.some(a_.remove(e))},function(e){return je.some(a_.moveToElement(e))},function(n){return $p(t,n,e)?je.none():je.some(a_.moveToPosition(n))})},h_=function(e,t,n){return s_(t,n)?d_(t,n.getNode(t===!1)).fold(function(){return u_(e,t,n)},je.some):u_(e,t,n).bind(function(t){return f_(e,n,t)})},p_=function(e,t,n){var r=Xp(t?1:-1,e,n),i=Ld.fromRangeStart(r);return t===!1&&eg(i)?je.some(a_.remove(i.getNode(!0))):t&&Qp(i)?je.some(a_.remove(i.getNode())):h_(e,t,i)},g_=function(e,t){var n=e.container(),r=e.offset();return Ld.isTextPosition(e)===!1&&n===t.parentNode&&r>Ld.before(t).offset()},m_=function(e,t){return g_(t,e)?Ld(t.container(),t.offset()-1):t},v_=function(e){return Ls.isText(e)?Ld(e,0):Ld.before(e)},y_=function(e){return Ls.isText(e)?Ld(e,e.data.length):Ld.after(e)},__=function(e){return Xu(e.previousSibling)?je.some(y_(e.previousSibling)):e.previousSibling?hg.lastPositionIn(e.previousSibling):je.none()},b_=function(e){return Xu(e.nextSibling)?je.some(v_(e.nextSibling)):e.nextSibling?hg.firstPositionIn(e.nextSibling):je.none()},w_=function(e,t){var n=Ld.before(t.previousSibling?t.previousSibling:t.parentNode);return hg.prevPosition(e,n).fold(function(){return hg.nextPosition(e,Ld.after(t))},je.some)},x_=function(e,t){return hg.nextPosition(e,Ld.after(t)).fold(function(){return hg.prevPosition(e,Ld.before(t))},je.some)},C_=function(e,t){return __(t).orThunk(function(){return b_(t)}).orThunk(function(){return w_(e,t)})},k_=function(e,t){return b_(t).orThunk(function(){return __(t)}).orThunk(function(){return x_(e,t)})},E_=function(e,t,n){return e?k_(t,n):C_(t,n)},T_=function(e,t,n){return E_(e,t,n).map(be(m_,n))},S_=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},N_=function(e){return function(t){return t.dom()===e}},A_=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(ao.name(t))},j_=function(e){if(_y.isEmpty(e)){var t=Ji.fromHtml('<br data-mce-bogus="1">');return zc.empty(e),Fc.append(e,t),je.some(Ld.before(t.dom()))}return je.none()},D_=function(e,t){return md([Fa.prevSibling(e),Fa.nextSibling(e),t],function(t,n,r){var i,o=t.dom(),a=n.dom();return Ls.isText(o)&&Ls.isText(a)?(i=o.data.length,o.appendData(a.data),zc.remove(n),zc.remove(e),r.container()===a?Ld(o,i):r):(zc.remove(e),r)}).orThunk(function(){return zc.remove(e),t})},O_=function(e,t,n){var r=T_(t,e.getBody(),n.dom()),i=jl.ancestor(n,be(A_,e),N_(e.getBody())),o=D_(n,r);e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(j_).fold(function(){S_(e,t,o)},function(n){S_(e,t,je.some(n))})},R_={deleteElement:O_},B_=function(e,t){return function(n){return e._selectionOverrides.hideFakeCaret(),R_.deleteElement(e,t,Ji.fromDom(n)),!0}},P_=function(e,t){return function(n){var r=t?Ld.before(n):Ld.after(n);return e.selection.setRng(r.toRange()),!0}},F_=function(e){return function(t){return e.selection.setRng(t.toRange()),!0}},I_=function(e,t){var n=p_(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(B_(e,t),P_(e,t),F_(e))});return n.getOr(!1)},L_=function(e){ze(Cl.descendants(e,".mce-offscreen-selection"),zc.remove)},M_=function(e,t){var n=e.selection.getNode();return!!Ls.isContentEditableFalse(n)&&(L_(Ji.fromDom(e.getBody())),R_.deleteElement(e,t,Ji.fromDom(e.selection.getNode())),ny.paddEmptyBody(e),!0)},V_=function(e,t){for(;t&&t!==e;){if(Ls.isContentEditableTrue(t)||Ls.isContentEditableFalse(t))return t;t=t.parentNode}return null},$_=function(e){var t,n=V_(e.getBody(),e.selection.getNode());return Ls.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(Ld.before(t).toRange())),!0},U_=function(e,t){return e.selection.isCollapsed()?I_(e,t):M_(e,t)},q_={backspaceDelete:U_,paddEmptyElement:$_},H_=Ls.isText,z_=function(e){return H_(e)&&e.data[0]===Cu.ZWSP},W_=function(e){return H_(e)&&e.data[e.data.length-1]===Cu.ZWSP},K_=function(e){return e.ownerDocument.createTextNode(Cu.ZWSP)},X_=function(e){if(H_(e.previousSibling))return W_(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(Cu.ZWSP),e.previousSibling);if(H_(e))return z_(e)?e:(e.insertData(0,Cu.ZWSP),e);var t=K_(e);return e.parentNode.insertBefore(t,e),t},Y_=function(e){if(H_(e.nextSibling))return z_(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,Cu.ZWSP),e.nextSibling);if(H_(e))return W_(e)?e:(e.appendData(Cu.ZWSP),e);var t=K_(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t},J_=function(e,t){return e?X_(t):Y_(t)},G_=be(J_,!0),Z_=be(J_,!1),Q_=function(e,t){return Ls.isText(e.container())?J_(t,e.container()):J_(t,e.getNode())},eb=function(e,t){var n=t.get();return n&&e.container()===n&&Su(n)},tb=function(e,t){return t.fold(function(t){Rf.remove(e.get());var n=G_(t);return e.set(n),je.some(Ld(n,n.length-1))},function(t){return hg.firstPositionIn(t).map(function(t){if(eb(t,e))return Ld(e.get(),1);Rf.remove(e.get());var n=Q_(t,!0);return e.set(n),Ld(n,1)})},function(t){return hg.lastPositionIn(t).map(function(t){if(eb(t,e))return Ld(e.get(),e.get().length-1);Rf.remove(e.get());var n=Q_(t,!1);return e.set(n),Ld(n,n.length-1)})},function(t){Rf.remove(e.get());var n=Z_(t);return e.set(n),je.some(Ld(n,1))})},nb={renderCaret:tb},rb=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return je.none()},ib={evaluateUntil:rb},ob=i_.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),ab=function(e,t){var n=Vp(t,e);return n?n:e},sb=function(e,t,n){var r=Jv.normalizeForwards(n),i=ab(t,r.container());return Jv.findRootInline(e,i,r).fold(function(){return hg.nextPosition(i,r).bind(be(Jv.findRootInline,e,i)).map(function(e){return ob.before(e)})},je.none)},cb=function(e,t){return null===_f(e,t)},lb=function(e,t,n){return Jv.findRootInline(e,t,n).filter(be(cb,t))},ub=function(e,t,n){var r=Jv.normalizeBackwards(n);return lb(e,t,r).bind(function(e){var t=hg.prevPosition(e,r);return t.isNone()?je.some(ob.start(e)):je.none()})},db=function(e,t,n){var r=Jv.normalizeForwards(n);return lb(e,t,r).bind(function(e){var t=hg.nextPosition(e,r);return t.isNone()?je.some(ob.end(e)):je.none()})},fb=function(e,t,n){var r=Jv.normalizeBackwards(n),i=ab(t,r.container());return Jv.findRootInline(e,i,r).fold(function(){return hg.prevPosition(i,r).bind(be(Jv.findRootInline,e,i)).map(function(e){return ob.after(e)})},je.none)},hb=function(e){return Jv.isRtl(gb(e))===!1},pb=function(e,t,n){var r=ib.evaluateUntil([sb,ub,db,fb],[e,t,n]);return r.filter(hb)},gb=function(e){return e.fold(_e,_e,_e,_e)},mb=function(e){return e.fold(ye("before"),ye("start"),ye("end"),ye("after"))},vb=function(e){return e.fold(ob.before,ob.before,ob.after,ob.after)},yb=function(e){return e.fold(ob.start,ob.start,ob.end,ob.end)},_b=function(e,t){return mb(e)===mb(t)&&gb(e)===gb(t)},bb=function(e,t,n,r,i,o){return md([Jv.findRootInline(t,n,r),Jv.findRootInline(t,n,i)],function(t,r){return t!==r&&Jv.hasSameParentBlock(n,t,r)?ob.after(e?t:r):o}).getOr(o)},wb=function(e,t){return e.fold(ye(!0),function(e){return!_b(e,t)})},xb=function(e,t,n,r,i){var o=Jv.normalizePosition(e,i),a=hg.fromPosition(e,n,o).map(be(Jv.normalizePosition,e)),s=a.fold(function(){return r.map(vb)},function(i){return pb(t,n,i).map(be(bb,e,t,n,o,i)).filter(be(wb,r))});return s.filter(hb)},Cb=function(e,t){return e?t.fold(ve(je.some,ob.start),je.none,ve(je.some,ob.after),je.none):t.fold(je.none,ve(je.some,ob.before),je.none,ve(je.some,ob.end))},kb=function(e,t,n,r){var i=Jv.normalizePosition(e,r),o=pb(t,n,i);return pb(t,n,i).bind(be(Cb,e)).orThunk(function(){return xb(e,t,n,o,r)})},Eb={readLocation:pb,findLocation:kb,prevLocation:be(kb,!1),nextLocation:be(kb,!0),getElement:gb,outside:vb,inside:yb},Tb=function(e){return Le(e.selection.getSel().modify)},Sb=function(e,t,n){var r=e?1:-1;return t.setRng(Ld(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Nb=function(e,t){var n=t.selection.getRng(),r=e?Ld.fromRangeEnd(n):Ld.fromRangeStart(n);return!!Tb(t)&&(e&&Du(r)?Sb(!0,t.selection,r):!(e||!Ou(r))&&Sb(!1,t.selection,r))},Ab={hasSelectionModifyApi:Tb,moveByWord:Nb},jb=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Db=function(e){return e.settings.inline_boundaries!==!1},Ob=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Rb=function(e,t,n){return nb.renderCaret(t,n).map(function(t){return jb(e,t),n})},Bb=function(e,t,n){var r=e.getBody(),i=Ld.fromRangeStart(e.selection.getRng()),o=be(Jv.isInlineTarget,e),a=Eb.findLocation(n,o,r,i);return a.bind(function(n){return Rb(e,t,n)})},Pb=function(e,t,n){var r=Xe(t.select('*[data-mce-selected="inline-boundary"]'),e),i=Xe(n,e);ze(at(r,i),be(Ob,!1)),ze(at(i,r),be(Ob,!0))},Fb=function(e,t){if(e.selection.isCollapsed()&&e.composing!==!0&&t.get()){var n=Ld.fromRangeStart(e.selection.getRng());Ld.isTextPosition(n)&&Jv.isAtZwsp(n)===!1&&(jb(e,Rf.removeAndReposition(t.get(),n)),t.set(null))}},Ib=function(e,t,n,r){if(t.selection.isCollapsed()){var i=Xe(r,e);ze(i,function(r){var i=Ld.fromRangeStart(t.selection.getRng());Eb.readLocation(e,t.getBody(),i).bind(function(e){return Rb(t,n,e)})})}},Lb=function(e,t,n){return function(){return!!Db(e)&&Bb(e,t,n).isSome()}},Mb=function(e,t,n){return function(){return!!Db(t)&&Ab.moveByWord(e,t)}},Vb=function(e){var t=Xc(null),n=be(Jv.isInlineTarget,e);return e.on("NodeChange",function(r){Db(e)&&(Pb(n,e.dom,r.parents),Fb(e,t),Ib(n,e,t,r.parents))}),t},$b=be(Mb,!0),Ub=be(Mb,!1),qb={move:Lb,moveNextWord:$b,movePrevWord:Ub,setupSelectedState:Vb,setCaretPosition:jb},Hb=function(e){return e.settings.inline_boundaries!==!1},zb=function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},Wb=function(e){return md([hg.firstPositionIn(e),hg.lastPositionIn(e)],function(t,n){var r=Jv.normalizePosition(!0,t),i=Jv.normalizePosition(!1,n);return hg.nextPosition(e,r).map(function(e){return e.isEqual(i)}).getOr(!0)}).getOr(!0)},Kb=function(e,t){return function(n){return nb.renderCaret(t,n).map(function(t){return qb.setCaretPosition(e,t),!0}).getOr(!1)}},Xb=function(e,t,n,r){var i=e.getBody(),o=be(Jv.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(zb(n,r)),e.execCommand("Delete"),Eb.readLocation(o,i,Ld.fromRangeStart(e.selection.getRng())).map(Eb.inside).map(Kb(e,t))}),e.nodeChanged()},Yb=function(e,t){var n=Vp(t,e);return n?n:e},Jb=function(e,t,n,r){var i=Yb(e.getBody(),r.container()),o=be(Jv.isInlineTarget,e),a=Eb.readLocation(o,i,r);return a.bind(function(e){return n?e.fold(ye(je.some(Eb.inside(e))),je.none,ye(je.some(Eb.outside(e))),je.none):e.fold(je.none,ye(je.some(Eb.outside(e))),je.none,ye(je.some(Eb.inside(e))))}).map(Kb(e,t)).getOrThunk(function(){var s=hg.navigate(n,i,r),c=s.bind(function(e){return Eb.readLocation(o,i,e)});return a.isSome()&&c.isSome()?Jv.findRootInline(o,i,r).map(function(t){return!!Wb(t)&&(R_.deleteElement(e,n,Ji.fromDom(t)),!0)}).getOr(!1):c.bind(function(i){return s.map(function(i){return n?Xb(e,t,r,i):Xb(e,t,i,r),!0})}).getOr(!1)})},Gb=function(e,t,n){if(e.selection.isCollapsed()&&Hb(e)){var r=Ld.fromRangeStart(e.selection.getRng());return Jb(e,t,n,r)}return!1},Zb={backspaceDelete:Gb},Qb=Ko("start","end"),ew=Ko("rng","table","cells"),tw=i_.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),nw=function(e){return be(ga.eq,e)},rw=function(e,t){return Il.closest(Ji.fromDom(e),"td,th",t)},iw=function(e,t){return Il.ancestor(e,"table",t)},ow=function(e){return ga.eq(e.start(),e.end())===!1},aw=function(e,t){return iw(e.start(),t).bind(function(n){return iw(e.end(),t).bind(function(e){return ga.eq(n,e)?je.some(n):je.none()})})},sw=function(e){return Cl.descendants(e,"td,th")},cw=function(e,t){return iw(e.start(),t).bind(function(t){return ut(sw(t)).map(function(t){return Qb(e.start(),t)})})},lw=function(e,t){var n=rw(t.startContainer,e),r=rw(t.endContainer,e);return t.collapsed?je.none():md([n,r],Qb).fold(function(){return n.fold(function(){return r.bind(function(t){return iw(t,e).bind(function(e){return lt(sw(e)).map(function(e){return Qb(e,t)})})})},function(t){return iw(t,e).bind(function(e){return ut(sw(e)).map(function(e){return Qb(t,e)})})})},function(t){return uw(e,t)?je.none():cw(t,e)})},uw=function(e,t){return aw(t,e).isSome()},dw=function(e,t){var n=rw(e.startContainer,t),r=rw(e.endContainer,t);return md([n,r],Qb).filter(ow).filter(function(e){return uw(t,e)}).orThunk(function(){return lw(t,e)})},fw=function(e,t){return aw(e,t).map(function(t){return ew(e,t,sw(t))})},hw=function(e,t){var n=nw(e);return dw(t,n).bind(function(e){return fw(e,n)})},pw=function(e,t){return Ze(e,function(e){return ga.eq(e,t)})},gw=function(e){return md([pw(e.cells(),e.rng().start()),pw(e.cells(),e.rng().end())],function(t,n){return e.cells().slice(t,n+1)})},mw=function(e){return gw(e).map(function(t){var n=e.cells();return t.length===n.length?tw.removeTable(e.table()):tw.emptyCells(t)})},vw=function(e){return tw.emptyCells(e)},yw=function(e,t){return hw(e,t).bind(mw)},_w={getActionFromRange:yw,getActionFromCells:vw},bw=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},ww=function(e){return nt(e,function(e){var t=fd(e);return t?[Ji.fromDom(t)]:[]})},xw=function(e){return bw(e).length>1},Cw={getRanges:bw,getSelectedNodes:ww,hasMultipleRanges:xw},kw=function(e){return Xe(Cw.getSelectedNodes(e),_s)},Ew=function(e){var t=Cl.descendants(e,"td[data-mce-selected],th[data-mce-selected]");return t},Tw=function(e,t){var n=Ew(t),r=kw(e);return n.length>0?n:r},Sw=function(e){return Tw(Cw.getRanges(e.selection.getSel()),Ji.fromDom(e.getBody()))},Nw={getCellsFromRanges:kw,getCellsFromElement:Ew,getCellsFromElementOrRanges:Tw,getCellsFromEditor:Sw},Aw=function(e,t){return ze(t,iv.fillWithPaddingBr),e.selection.setCursorLocation(t[0].dom(),0),!0},jw=function(e,t){return R_.deleteElement(e,!1,t),!0},Dw=function(e,t,n){return _w.getActionFromRange(t,n).map(function(t){return t.fold(be(jw,e),be(Aw,e))})},Ow=function(e,t){return Lw(e,t)},Rw=function(e,t,n,r){return Fw(t,r).fold(function(){return Dw(e,t,n)},function(t){return Ow(e,t)}).getOr(!1)},Bw=function(e,t){var n=Ji.fromDom(e.getBody()),r=e.selection.getRng(),i=Nw.getCellsFromEditor(e);return 0!==i.length?Aw(e,i):Rw(e,n,r,t)},Pw=function(e,t){return Ge(By.parentsAndSelf(t,e),_s)},Fw=function(e,t){return Ge(By.parentsAndSelf(t,e),function(e){return"caption"===ao.name(e)})},Iw=function(e,t,n,r,i){return hg.navigate(n,e.getBody(),i).bind(function(e){return Pw(t,Ji.fromDom(e.getNode())).map(function(e){return ga.eq(e,r)===!1})})},Lw=function(e,t){return iv.fillWithPaddingBr(t),e.selection.setCursorLocation(t.dom(),0),je.some(!0)},Mw=function(e,t,n,r){return hg.firstPositionIn(e.dom()).bind(function(i){return hg.lastPositionIn(e.dom()).map(function(e){return t?n.isEqual(i)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(i)})}).getOr(!0)},Vw=function(e,t){return Lw(e,t)},$w=function(e,t,n){return Fw(e,Ji.fromDom(n.getNode())).map(function(e){return ga.eq(e,t)===!1})},Uw=function(e,t,n,r,i){return hg.navigate(n,e.getBody(),i).bind(function(o){return Mw(r,n,i,o)?Vw(e,r):$w(t,r,o)}).or(je.some(!0))},qw=function(e,t,n,r){var i=Ld.fromRangeStart(e.selection.getRng());return Pw(n,r).bind(function(r){return _y.isEmpty(r)?Lw(e,r):Iw(e,n,t,r,i)})},Hw=function(e,t,n,r){var i=Ld.fromRangeStart(e.selection.getRng());return _y.isEmpty(r)?Lw(e,r):Uw(e,n,t,r,i)},zw=function(e,t,n){var r=Ji.fromDom(e.getBody());return Fw(r,n).fold(function(){return qw(e,t,r,n)},function(n){return Hw(e,t,r,n)}).getOr(!1)},Ww=function(e,t){var n=Ji.fromDom(e.selection.getStart(!0)),r=Nw.getCellsFromEditor(e);return e.selection.isCollapsed()&&0===r.length?zw(e,t,n):Bw(e,n)},Kw={backspaceDelete:Ww},Xw=function(e,t){e.getDoc().execCommand(t,!1,null)},Yw=function(e){q_.backspaceDelete(e,!1)||Zb.backspaceDelete(e,!1)||Xy.backspaceDelete(e,!1)||Kw.backspaceDelete(e)||n_.backspaceDelete(e,!1)||(Xw(e,"Delete"),ny.paddEmptyBody(e))},Jw=function(e){q_.backspaceDelete(e,!0)||Zb.backspaceDelete(e,!0)||Xy.backspaceDelete(e,!0)||Kw.backspaceDelete(e)||n_.backspaceDelete(e,!0)||Xw(e,"ForwardDelete")},Gw={deleteCommand:Yw,forwardDeleteCommand:Jw},Zw=function(e,t,n){var r=function(t){return Wo.getRaw(t,e)},i=function(e){return ga.eq(Ji.fromDom(t),e)};return jl.closest(Ji.fromDom(n),function(e){return r(e).isSome()},i).bind(r)},Qw=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},ex=function(e,t){return/[0-9.]+px$/.test(e)?Qw(72*parseInt(e,10)/96,t||0)+"pt":e},tx=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},nx=function(e,t){return je.from(Cc.DOM.getStyle(t,e,!0))},rx=function(e){return function(t,n){return je.from(n).map(Ji.fromDom).filter(ao.isElement).bind(function(n){return Zw(e,t,n.dom()).or(nx(e,n.dom()))}).getOr("")}},ix={getFontSize:rx("font-size"),getFontFamily:ve(tx,rx("font-family")),toPt:ex},ox=function(e){return hg.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return Ls.isText(t)?t.parentNode:t})},ax=function(e,t){return e.startContainer===t&&0===e.startOffset},sx=function(e){return je.from(e.selection.getRng()).bind(function(t){var n=e.getBody();return ax(t,n)?je.none():je.from(e.selection.getStart(!0))})},cx=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var r=rp.getFontStyleValues(e),i=rp.getFontSizeClasses(e);return i?i[n-1]||t:r[n-1]||t}return t}return t},lx=function(e,t){e.formatter.toggle("fontname",{value:cx(e,t)}),e.nodeChanged()},ux=function(e){return sx(e).fold(function(){return ox(e).map(function(t){return ix.getFontFamily(e.getBody(),t)}).getOr("")},function(t){return ix.getFontFamily(e.getBody(),t)})},dx=function(e,t){e.formatter.toggle("fontsize",{value:cx(e,t)}),e.nodeChanged()},fx=function(e){return sx(e).fold(function(){return ox(e).map(function(t){return ix.getFontSize(e.getBody(),t)}).getOr("")},function(t){return ix.getFontSize(e.getBody(),t)})},hx=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},px={isEq:hx},gx=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},mx=function(e,t,n){return null!==gx(e,t,n)},vx=function(e,t,n){return mx(e,t,function(e){return e.nodeName===n})},yx=function(e){return e&&"TABLE"===e.nodeName},_x=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},bx=function(e,t){return Nu(e)&&mx(e,t,yf)===!1},wx=function(e,t,n){for(var r=new b(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(Ls.isBr(t))return!0},xx=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t},Cx=function(e,t){for(;t&&t!==e;){if(Ls.isContentEditableFalse(t))return!0;t=t.parentNode}return!1},kx=function(e,t,n,r,i){var o,a,s,c,l=e.getRoot(),u=e.schema.getNonEmptyElements();if(s=e.getParent(i.parentNode,e.isBlock)||l,r&&Ls.isBr(i)&&t&&e.isEmpty(s))return je.some(S(i.parentNode,e.nodeIndex(i)));for(o=new b(i,s);c=o[r?"prev":"next"]();){if("false"===e.getContentEditableParent(c)||bx(c,l))return je.none();if(Ls.isText(c)&&c.nodeValue.length>0)return vx(c,l,"A")===!1?je.some(S(c,r?c.nodeValue.length:0)):je.none();if(e.isBlock(c)||u[c.nodeName.toLowerCase()])return je.none();a=c}return n&&a?je.some(S(a,0)):je.none()},Ex=function(e,t,n,r){var i,o,a,s,c,l,u,d=e.getRoot(),f=!1;if(i=r[(n?"start":"end")+"Container"],o=r[(n?"start":"end")+"Offset"],u=Ls.isElement(i)&&o===i.childNodes.length,c=e.schema.getNonEmptyElements(),l=n,Nu(i))return je.none();if(Ls.isElement(i)&&o>i.childNodes.length-1&&(l=!1),Ls.isDocument(i)&&(i=d,o=0),i===d){if(l&&(s=i.childNodes[o>0?o-1:0])){if(Nu(s))return je.none();if(c[s.nodeName]||yx(s))return je.none()}if(i.hasChildNodes()){if(o=Math.min(!l&&o>0?o-1:o,i.childNodes.length-1),i=i.childNodes[o],o=Ls.isText(i)&&u?i.data.length:0,!t&&i===d.lastChild&&yx(i))return je.none();if(Cx(d,i)||Nu(i))return je.none();if(i.hasChildNodes()&&yx(i)===!1){s=i,a=new b(i,d);do{if(Ls.isContentEditableFalse(s)||Nu(s)){f=!1;break}if(Ls.isText(s)&&s.nodeValue.length>0){o=l?0:s.nodeValue.length,i=s,f=!0;break}if(c[s.nodeName.toLowerCase()]&&!_x(s)){o=e.nodeIndex(s),i=s.parentNode,l||o++,f=!0;break}}while(s=l?a.next():a.prev())}}}return t&&(Ls.isText(i)&&0===o&&kx(e,u,t,!0,i).each(function(e){i=e.container(),o=e.offset(),f=!0}),Ls.isElement(i)&&(s=i.childNodes[o],s||(s=i.childNodes[o-1]),!s||!Ls.isBr(s)||xx(s,"A")||wx(e,s,!1)||wx(e,s,!0)||kx(e,u,t,!0,s).each(function(e){i=e.container(),o=e.offset(),f=!0}))),l&&!t&&Ls.isText(i)&&o===i.nodeValue.length&&kx(e,u,t,!1,i).each(function(e){i=e.container(),o=e.offset(),f=!0}),f?je.some(S(i,o)):je.none()},Tx=function(e,t){var n=t.collapsed,r=t.cloneRange(),i=S.fromRangeStart(t);return Ex(e,n,!0,r).each(function(e){n&&S.isAbove(i,e)||r.setStart(e.container(),e.offset())}),n||Ex(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),px.isEq(t,r)?je.none():je.some(r)},Sx={normalize:Tx},Nx=function(e,t,n){for(var r,i=new b(t,n),o=e.getNonEmptyElements();r=i.next();)if(o[r.nodeName.toLowerCase()]||r.length>0)return!0},Ax=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},jx=function(e,t,n,r){var i=e.createRng();r?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),t.setRng(i)},Dx=function(e,t){var n,r,i=e.selection,o=e.dom,a=i.getRng();Sx.normalize(o,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,c=a.startContainer;if(1===c.nodeType&&c.hasChildNodes()){var l=s>c.childNodes.length-1;c=c.childNodes[Math.min(s,c.childNodes.length-1)]||c,s=l&&3===c.nodeType?c.nodeValue.length:0}var u=o.getParent(c,o.isBlock),d=u?o.getParent(u.parentNode,o.isBlock):null,f=d?d.nodeName.toUpperCase():"",h=t&&t.ctrlKey;"LI"!==f||h||(u=d),c&&3===c.nodeType&&s>=c.nodeValue.length&&(Nx(e.schema,c,u)||(n=o.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=o.create("br"),a.insertNode(n),Ax(o,i,n),jx(o,i,n,r),e.undoManager.add()},Ox=function(e,t){var n=Ji.fromTag("br");Fc.before(Ji.fromDom(t),n),e.undoManager.add()},Rx=function(e,t){Px(e.getBody(),t)||Fc.after(Ji.fromDom(t),Ji.fromTag("br"));var n=Ji.fromTag("br");Fc.after(Ji.fromDom(t),n),Ax(e.dom,e.selection,n.dom()),jx(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},Bx=function(e){return Ls.isBr(e.getNode())},Px=function(e,t){return!!Bx(Ld.after(t))||hg.nextPosition(e,Ld.after(t)).map(function(e){return Ls.isBr(e.getNode())}).getOr(!1)},Fx=function(e){return e&&"A"===e.nodeName&&"href"in e},Ix=function(e){return e.fold(ye(!1),Fx,Fx,ye(!1))},Lx=function(e){var t=be(Jv.isInlineTarget,e),n=Ld.fromRangeStart(e.selection.getRng());return Eb.readLocation(t,e.getBody(),n).filter(Ix)},Mx=function(e,t){t.fold(me,be(Ox,e),be(Rx,e),me)},Vx=function(e,t){var n=Lx(e);n.isSome()?n.each(be(Mx,e)):Dx(e,t)},$x={insert:Vx},Ux=i_.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),qx=function(e,t,n,r){return e.fold(t,n,r)},Hx=function(e){return e.fold(_e,_e,_e)},zx={before:Ux.before,on:Ux.on,after:Ux.after,cata:qx,getStart:Hx},Wx=i_.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Kx=Ko("start","soffset","finish","foffset"),Xx=function(e){return Wx.exact(e.start(),e.soffset(),e.finish(),e.foffset());
},Yx=function(e){return e.match({domRange:function(e){return Ji.fromDom(e.startContainer)},relative:function(e,t){return zx.getStart(e)},exact:function(e,t,n,r){return e}})},Jx=function(e){var t=Yx(e);return Fa.defaultView(t)},Gx={domRange:Wx.domRange,relative:Wx.relative,exact:Wx.exact,exactFromRange:Xx,range:Kx,getWin:Jx},Zx=Hi.detect().browser,Qx=function(e,t){var n=ao.isText(t)?wm.get(t).length:Fa.children(t).length+1;return e>n?n:e<0?0:e},eC=function(e){return Gx.range(e.start(),Qx(e.soffset(),e.start()),e.finish(),Qx(e.foffset(),e.finish()))},tC=function(e,t){return ga.contains(e,t)||ga.eq(e,t)},nC=function(e){return function(t){return tC(e,t.start())&&tC(e,t.finish())}},rC=function(e){return e.inline===!0||Zx.isIE()},iC=function(e){return Gx.range(Ji.fromDom(e.startContainer),e.startOffset,Ji.fromDom(e.endContainer),e.endOffset)},oC=function(e){var t=e.getSelection(),n=t&&0!==t.rangeCount?je.from(t.getRangeAt(0)):je.none();return n.map(iC)},aC=function(e){var t=Fa.defaultView(e);return oC(t.dom()).filter(nC(e))},sC=function(e,t){return je.from(t).filter(nC(e)).map(eC)},cC=function(e){var t=document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),je.some(t)}catch(e){return je.none()}},lC=function(e){var t=rC(e)?aC(Ji.fromDom(e.getBody())):je.none();e.bookmark=t.isSome()?t:e.bookmark},uC=function(e,t){var n=Ji.fromDom(e.getBody()),r=rC(e)?je.from(t):je.none(),i=r.map(iC).filter(nC(n));e.bookmark=i.isSome()?i:e.bookmark},dC=function(e){var t=e.bookmark?e.bookmark:je.none();return t.bind(be(sC,Ji.fromDom(e.getBody()))).bind(cC)},fC=function(e){dC(e).each(function(t){e.selection.setRng(t)})},hC={store:lC,storeNative:uC,readRange:oC,restore:fC,getRng:dC,getBookmark:aC,validate:sC},pC=function(e,t,n,r,i,o){if("false"!==e.getContentEditable(o)&&"LI"!==o.nodeName){var a=n?"margin":"padding";if(a="TABLE"===o.nodeName?"margin":a,a+="rtl"===e.getStyle(o,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(o.style[a]||0,10)-r);e.setStyle(o,a,s?s+i:"")}else{var s=parseInt(o.style[a]||0,10)+r+i;e.setStyle(o,a,s)}}},gC=function(e,t){var n=e.settings,r=e.dom,i=e.selection,o=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),c=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||(n.forced_root_block||r.getParent(i.getNode(),r.isBlock)||o.apply("div"),ze(i.getSelectedBlocks(),function(e){return pC(r,t,c,s,a,e)}))},mC=xr.each,vC=xr.extend,yC=xr.map,_C=xr.inArray,bC=xr.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),wC=function(e){var t,n,r=this,i={},o=function(){return!1},a=function(){return!0};e=e||{},t=e.scope||r,n=e.toggleEvent||o;var s=function(n,r){var s,c,u,d;if(n=n.toLowerCase(),r=r||{},r.type=n,r.target||(r.target=t),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=a},r.stopPropagation=function(){r.isPropagationStopped=a},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=a},r.isDefaultPrevented=o,r.isPropagationStopped=o,r.isImmediatePropagationStopped=o),e.beforeFire&&e.beforeFire(r),s=i[n])for(c=0,u=s.length;c<u;c++){if(d=s[c],d.once&&l(n,d.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(d.func.call(t,r)===!1)return r.preventDefault(),r}return r},c=function(e,t,a,s){var c,l,u;if(t===!1&&(t=o),t)for(t={func:t},s&&xr.extend(t,s),l=e.toLowerCase().split(" "),u=l.length;u--;)e=l[u],c=i[e],c||(c=i[e]=[],n(e,!0)),a?c.unshift(t):c.push(t);return r},l=function(e,t){var o,a,s,c,l;if(e)for(c=e.toLowerCase().split(" "),o=c.length;o--;){if(e=c[o],a=i[e],!e){for(s in i)n(s,!1),delete i[s];return r}if(a){if(t)for(l=a.length;l--;)a[l].func===t&&(a=a.slice(0,l).concat(a.slice(l+1)),i[e]=a);else a.length=0;a.length||(n(e,!1),delete i[e])}}else{for(e in i)n(e,!1);i={}}return r},u=function(e,t,n){return c(e,t,n,{once:!0})},d=function(e){return e=e.toLowerCase(),!(!i[e]||0===i[e].length)};r.fire=s,r.on=c,r.off=l,r.once=u,r.has=d};wC.isNative=function(e){return!!bC[e.toLowerCase()]};var xC,CC=function(e){return e._eventDispatcher||(e._eventDispatcher=new wC({scope:e,toggleEvent:function(t,n){wC.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},kC={fire:function(e,t,n){var r=this;if(r.removed&&"remove"!==e)return t;if(t=CC(r).fire(e,t,n),n!==!1&&r.parent)for(var i=r.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},on:function(e,t,n){return CC(this).on(e,t,n)},off:function(e,t){return CC(this).off(e,t)},once:function(e,t){return CC(this).once(e,t)},hasEventListeners:function(e){return CC(this).has(e)}},EC=function(e,t){return e.fire("PreProcess",t)},TC=function(e,t){return e.fire("PostProcess",t)},SC=function(e){return e.fire("remove")},NC=function(e,t){return e.fire("SwitchMode",{mode:t})},AC=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},jC=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},DC={firePreProcess:EC,firePostProcess:TC,fireRemove:SC,fireSwitchMode:NC,fireObjectResizeStart:AC,fireObjectResized:jC},OC=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},RC=function(e,t,n){dl.has(e,t)&&n===!1?dl.remove(e,t):n&&dl.add(e,t)},BC=function(e,t){RC(Ji.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",OC(e,"StyleWithCSS",!1),OC(e,"enableInlineTableEditing",!1),OC(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},PC=function(e,t){t!==FC(e)&&(e.initialized?BC(e,"readonly"===t):e.on("init",function(){BC(e,"readonly"===t)}),DC.fireSwitchMode(e,t))},FC=function(e){return e.readonly?"readonly":"design"},IC=function(e){return e.readonly===!0},LC=Cc.DOM,MC=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=LC.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},VC=function(e){return!e.hidden&&!e.readonly},$C=function(e,t,n){VC(e)?e.fire(t,n):IC(e)&&n.preventDefault()},UC=function(e,t){var n,r;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=MC(e,t),e.settings.event_root){if(xC||(xC={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&xC){for(t in xC)e.dom.unbind(MC(e,t));xC=null}})),xC[t])return;r=function(n){for(var r=n.target,i=e.editorManager.get(),o=i.length;o--;){var a=i[o].getBody();(a===r||LC.isChildOf(r,a))&&$C(i[o],t,n)}},xC[t]=r,LC.bind(n,t,r)}else r=function(n){$C(e,t,n)},LC.bind(n,t,r),e.delegates[t]=r},qC={bindPendingEventDelegates:function(){var e=this;xr.each(e._pendingNativeEvents,function(t){UC(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?UC(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(MC(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(MC(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}};qC=xr.extend({},kC,qC);var HC,zC=qC,WC=xr.each,KC=xr.explode,XC={f9:120,f10:121,f11:122},YC=xr.makeMap("alt,ctrl,shift,meta,access"),JC=function(e){return jl.first(e).isSome()},GC=function(e,t,n){return jl.ancestor(e,t,n).isSome()},ZC=function(e,t,n){return jl.closest(e,t,n).isSome()},QC=function(e,t){return jl.sibling(e,t).isSome()},ek=function(e,t){return jl.child(e,t).isSome()},tk=function(e,t){return jl.descendant(e,t).isSome()},nk={any:JC,ancestor:GC,closest:ZC,sibling:QC,child:ek,descendant:tk},rk=function(e){e.dom().focus()},ik=function(e){e.dom().blur()},ok=function(e){var t=Fa.owner(e).dom();return e.dom()===t.activeElement},ak=function(e){var t=void 0!==e?e.dom():document;return je.from(t.activeElement).map(Ji.fromDom)},sk=function(e){var t=Fa.owner(e),n=ak(t).filter(function(t){return nk.closest(t,be(ga.eq,e))});n.fold(function(){rk(e)},me)},ck=function(e){return ak(Fa.owner(e)).filter(function(t){return e.dom().contains(t.dom())})},lk={hasFocus:ok,focus:rk,blur:ik,active:ak,search:ck,focusInside:sk},uk=function(e,t){return e.dom.getParent(t,function(t){return"true"===e.dom.getContentEditable(t)})},dk=function(e){return e.collapsed?je.from(hd(e.startContainer,e.startOffset)).map(Ji.fromDom):je.none()},fk=function(e,t){return dk(t).bind(function(t){return ys(t)?je.some(t):ga.contains(e,t)===!1?je.some(e):je.none()})},hk=function(e,t){fk(Ji.fromDom(e.getBody()),t).bind(function(e){return hg.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},pk=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},gk=function(e){return lk.hasFocus(e)||lk.search(e).isSome()},mk=function(e){return e.iframeElement&&lk.hasFocus(Ji.fromDom(e.iframeElement))},vk=function(e){var t=e.getBody();return t&&gk(Ji.fromDom(t))},yk=function(e){return e.inline?vk(e):mk(e)},_k=function(e){var t=e.selection,n=e.settings.content_editable,r=e.getBody(),i=t.getRng();e.quirks.refreshContentEditable();var o=uk(e,t.getNode());return e.$.contains(r,o)?(pk(o),hk(e,i),void bk(e)):(void 0!==e.bookmark&&yk(e)===!1&&hC.getRng(e).each(function(t){e.selection.setRng(t),i=t}),n||(St.opera||pk(r),e.getWin().focus()),(St.gecko||n)&&(pk(r),hk(e,i)),void bk(e))},bk=function(e){return e.editorManager.setActive(e)},wk=function(e,t){e.removed||(t?bk(e):_k(e))},xk={focus:wk,hasFocus:yk},Ck=function(e,t){var n=t.dom();return n[e]},kk=function(e,t){return parseInt(Wo.get(t,e),10)},Ek=be(Ck,"clientWidth"),Tk=be(Ck,"clientHeight"),Sk=be(kk,"margin-top"),Nk=be(kk,"margin-left"),Ak=function(e){return e.dom().getBoundingClientRect()},jk=function(e,t,n){var r=Ek(e),i=Tk(e);return t>=0&&n>=0&&t<=r&&n<=i},Dk=function(e,t,n,r){var i=Ak(t),o=e?i.left+t.dom().clientLeft+Nk(t):0,a=e?i.top+t.dom().clientTop+Sk(t):0,s=n-o,c=r-a;return{x:s,y:c}},Ok=function(e,t,n){var r=Ji.fromDom(e.getBody()),i=e.inline?r:Fa.documentElement(r),o=Dk(e.inline,i,t,n);return jk(i,o.x,o.y)},Rk=function(e){return je.from(e).map(Ji.fromDom)},Bk=function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return Rk(t).map(function(e){return ga.contains(Fa.owner(e),e)}).getOr(!1)},Pk={isXYInContentArea:Ok,isEditorAttachedToDom:Bk},Fk=k.PluginManager,Ik=function(e,t){for(var n in Fk.urls){var r=Fk.urls[n]+"/plugin"+t+".js";if(r===e)return n}return null},Lk=function(e,t){var n=Ik(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t},Mk=function(e,t){e.notificationManager.open({type:"error",text:t})},Vk=function(e,t){e._skinLoaded?Mk(e,t):e.on("SkinLoaded",function(){Mk(e,t)})},$k=function(e,t){Vk(e,"Failed to upload image: "+t)},Uk=function(e,t){Vk(e,Lk(e,t))},qk=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,arguments):r.log.apply(r,arguments))},Hk={pluginLoadError:Uk,uploadError:$k,displayError:Vk,initError:qk},zk=k.PluginManager,Wk=k.ThemeManager,Kk=function(e){var t=vt.getOrDie("requestAnimationFrame");t(e)},Xk=function(e){var t=vt.getOrDie("atob");return t(e)},Yk={atob:Xk,requestAnimationFrame:Kk},Jk=function(e){return new At(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var i=new L;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){200===this.status?t(this.response):r()},i.onerror=r,i.send()}catch(e){r()}})},Gk=function(e){var t,n,r=decodeURIComponent(e).split(",");return n=/data:([^;]+)/.exec(r[0]),n&&(t=n[1]),{type:t,data:r[1]}},Zk=function(e){return new At(function(t){var n,r,i,o=Gk(e);try{n=Yk.atob(o.data)}catch(e){return void t(new Blob([]))}for(r=new $(n.length),i=0;i<r.length;i++)r[i]=n.charCodeAt(i);t(new Blob([r],{type:o.type}))})},Qk=function(e){return 0===e.indexOf("blob:")?Jk(e):0===e.indexOf("data:")?Zk(e):null},eE=function(e){return new At(function(t){var n=new V;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})},tE={uriToBlob:Qk,blobToDataUri:eE,parseDataUri:Gk},nE=0,rE=function(e){return(e||"blobid")+nE++},iE=function(e,t,n,r){var i,o;return 0===t.src.indexOf("blob:")?(o=e.getByUri(t.src),void(o?n({image:t,blobInfo:o}):tE.uriToBlob(t.src).then(function(r){tE.blobToDataUri(r).then(function(a){i=tE.parseDataUri(a).data,o=e.create(rE(),r,i),e.add(o),n({image:t,blobInfo:o})})},function(e){r(e)}))):(i=tE.parseDataUri(t.src).data,o=e.findFirst(function(e){return e.base64()===i}),void(o?n({image:t,blobInfo:o}):tE.uriToBlob(t.src).then(function(r){o=e.create(rE(),r,i),e.add(o),n({image:t,blobInfo:o})},function(e){r(e)})))},oE=function(e){return e?e.getElementsByTagName("img"):[]},aE=0,sE=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)},t=(new Date).getTime();return"s"+t.toString(36)+e()+e()+e()},cE=function(e){return e+aE++ +sE()},lE={uuid:cE},uE=function(e,t){return e.hasOwnProperty(t.nodeName)},dE=function(e,t){return!!Ls.isText(t)||!!Ls.isElement(t)&&!uE(e,t)&&!Ig.isBookmarkNode(t)},fE=function(e,t,n){return qe(By.parents(Ji.fromDom(n),Ji.fromDom(t)),function(t){return uE(e,t.dom())})},hE=function(e,t){if(Ls.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||uE(e,t.nextSibling)))return!0}return!1},pE=function(e){var t,n,r,i,o,a,s,c,l,u,d,f=e.settings,h=e.dom,p=e.selection,g=e.schema,m=g.getBlockElements(),v=p.getStart(),y=e.getBody();if(d=f.forced_root_block,v&&Ls.isElement(v)&&d&&(u=y.nodeName.toLowerCase(),g.isValidChild(u,d.toLowerCase())&&!fE(m,y,v))){for(t=p.getRng(),n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,l=xk.hasFocus(e),v=y.firstChild;v;)if(dE(m,v)){if(hE(m,v)){s=v,v=v.nextSibling,h.remove(s);continue}a||(a=h.create(d,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(a,v),c=!0),s=v,v=v.nextSibling,a.appendChild(s)}else a=null,v=v.nextSibling;c&&l&&(t.setStart(n,r),t.setEnd(i,o),p.setRng(t),e.nodeChanged())}},gE=function(e){e.settings.forced_root_block&&e.on("NodeChange",be(pE,e))},mE={setup:gE},vE=function(e){var t=e.startContainer,n=e.startOffset;return Ls.isText(t)?0===n?je.some(Ji.fromDom(t)):je.none():je.from(t.childNodes[n]).map(Ji.fromDom)},yE=function(e){var t=e.endContainer,n=e.endOffset;return Ls.isText(t)?n===t.data.length?je.some(Ji.fromDom(t)):je.none():je.from(t.childNodes[n-1]).map(Ji.fromDom)},_E=function(e){return Fa.firstChild(e).fold(ye([e]),function(t){return[e].concat(_E(t))})},bE=function(e){return Fa.lastChild(e).fold(ye([e]),function(t){return"br"===ao.name(t)?Fa.prevSibling(t).map(function(t){return[e].concat(bE(t))}).getOr([]):[e].concat(bE(t))})},wE=function(e,t){return md([vE(t),yE(t)],function(t,n){var r=Ge(_E(e),be(ga.eq,t)),i=Ge(bE(e),be(ga.eq,n));return r.isSome()&&i.isSome()}).getOr(!1)},xE=function(e,t,n,r){var i=n,o=new b(n,i),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==xr.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(St.ie&&St.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?o.next():o.prev());"BODY"===i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},CE=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0},kE=function(e){var t,n,r,i;return i=e.getBoundingClientRect(),t=e.ownerDocument,n=t.documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}},EE=function(e){return e.inline?kE(e.getBody()):{left:0,top:0}},TE=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},SE=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i},NE=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=kE(e.getContentAreaContainer()),r=SE(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}},AE=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},jE=function(e,t){return AE(EE(e),TE(e),NE(e,t))},DE={calc:jE},OE=Ls.isContentEditableFalse,RE=Ls.isContentEditableTrue,BE=function(e,t){return OE(t)&&t!==e},PE=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!OE(t)},FE=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},IE=function(e,t,n,r){var i=t.cloneNode(!0);e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null);var o=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o},LE=function(e,t){e.parentNode!==t&&t.appendChild(e)},ME=function(e,t,n,r,i,o){var a=0,s=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>i&&(a=t.pageX+n-i),t.pageY+r>o&&(s=t.pageY+r-o),e.style.width=n-a+"px",e.style.height=r-s+"px"},VE=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},$E=function(e){return 0===e.button},UE=function(e){return e.element},qE=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},HE=function(e,t){return function(n){if($E(n)){var r=lr.find(t.dom.getParents(n.target),_u.or(OE,RE));if(BE(t.getBody(),r)){var i=t.dom.getPos(r),o=t.getBody(),a=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?o.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?o.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-i.x,e.relY=n.pageY-i.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=IE(t,r,e.width,e.height)}}}},zE=function(e,t){var n=Ft.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(r){var i=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(UE(e)&&!e.dragging&&i>10){var o=t.fire("dragstart",{target:e.element});if(o.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var a=qE(e,DE.calc(t,r));LE(e.ghost,t.getBody()),ME(e.ghost,a,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}},WE=function(e){var t=e.getSel().getRangeAt(0),n=t.startContainer;return 3===n.nodeType?n.parentNode:n},KE=function(e,t){return function(n){if(e.dragging&&PE(t,WE(t.selection),e.element)){var r=FE(e.element),i=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});i.isDefaultPrevented()||(r=i.targetClone,t.undoManager.transact(function(){VE(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}YE(e)}},XE=function(e,t){return function(){e.dragging&&t.fire("dragend"),YE(e)}},YE=function(e){e.dragging=!1,e.element=null,VE(e.ghost)},JE=function(e){var t,n,r,i,o,a,s={};t=Cc.DOM,a=document,n=HE(s,e),r=zE(s,e),i=KE(s,e),o=XE(s,e),e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",i),t.bind(a,"mousemove",r),t.bind(a,"mouseup",o),e.on("remove",function(){t.unbind(a,"mousemove",r),t.unbind(a,"mouseup",o)})},GE=function(e){e.on("drop",function(t){var n="undefined"!=typeof t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(OE(n)||OE(e.dom.getContentEditableParent(n)))&&t.preventDefault()})},ZE=function(e){JE(e),GE(e)},QE={init:ZE},eT=function(e){var t=function(t){return lr.map(t,function(t){return t=nd(t),t.node=e,t})};if(Ls.isElement(e))return t(e.getClientRects());if(Ls.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}},tT=function(e){return lr.reduce(e,function(e,t){return e.concat(eT(t))},[])};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(HC||(HC={}));var nT=function(e,t,n,r){for(;r=Mp(r,e,ed,t);)if(n(r))return},rT=function(e,t,n,r,i,o){var a,s,c=0,l=[],u=function(r){var o,a,u;for(u=tT([r]),e===-1&&(u=u.reverse()),o=0;o<u.length;o++)if(a=u[o],!n(a,s)){if(l.length>0&&t(a,lr.last(l))&&c++,a.line=c,i(a))return!0;l.push(a)}};return(s=lr.last(o.getClientRects()))?(a=o.getNode(),u(a),nT(e,r,u,a),l):l},iT=function(e,t){return t.line>e},oT=function(e,t){return t.line===e},aT=be(rT,HC.Up,ad,sd),sT=be(rT,HC.Down,sd,ad),cT=function(e,t,n,r){var i,o,a,s,c,l,u=eh(t),d=[],f=0,h=function(t){return 1===e?lr.last(t.getClientRects()):lr.last(t.getClientRects())};1===e?(i=u.next,o=sd,a=ad,s=Ld.after(r)):(i=u.prev,o=ad,a=sd,s=Ld.before(r)),l=h(s);do if(s.isVisible()&&(c=h(s),!a(c,l))){if(d.length>0&&o(c,lr.last(d))&&f++,c=nd(c),c.position=s,c.line=f,n(c))return d;d.push(c)}while(s=i(s));return d},lT=function(e){return function(t){return iT(e,t)}},uT=function(e){return function(t){return oT(e,t)}},dT=Ls.isContentEditableFalse,fT=Mp,hT=function(e,t){return Math.abs(e.left-t)},pT=function(e,t){return Math.abs(e.right-t)},gT=function(e,t){return e>=t.left&&e<=t.right},mT=function(e,t){return lr.reduce(e,function(e,n){var r,i;return r=Math.min(hT(e,t),pT(e,t)),i=Math.min(hT(n,t),pT(n,t)),gT(t,n)?n:gT(t,e)?e:i===r&&dT(n.node)?n:i<r?n:e})},vT=function(e,t,n,r){for(;r=fT(r,e,ed,t);)if(n(r))return},yT=function(e,t){var n=[],r=function(e,r){var i;return i=lr.filter(tT([r]),function(n){return!e(n,t)}),n=n.concat(i),0===i.length};return n.push(t),vT(HC.Up,e,be(r,ad),t.node),vT(HC.Down,e,be(r,sd),t.node),n},_T=function(e){return lr.filter(lr.toArray(e.getElementsByTagName("*")),Np)},bT=function(e,t){return{node:e.node,before:hT(e,t)<pT(e,t)}},wT=function(e,t,n){var r,i=tT(_T(e)),o=lr.filter(i,function(e){return n>=e.top&&n<=e.bottom});return r=mT(o,t),r&&(r=mT(yT(e,r),t),r&&Np(r.node))?bT(r,t):null},xT=function(e,t,n){return!n.collapsed&&Je(n.getClientRects(),function(n,r){return n||cd(r,e,t)},!1)},CT={isXYWithinRange:xT},kT=function(e){var t=Wc(function(){if(!e.removed){var t=e.selection.getRng();if(t.collapsed){var n=Vf(e,e.selection.getRng(),!1);e.selection.setRng(n)}}},0);e.on("focus",function(){t.throttle()}),e.on("blur",function(){t.cancel()})},ET={setup:kT},TT={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return St.mac?e.metaKey:e.ctrlKey&&!e.altKey}},ST=Ls.isContentEditableTrue,NT=Ls.isContentEditableFalse,AT=eg,jT=Qp,DT=function(e,t){for(var n=e.getBody();t&&t!==n;){if(ST(t)||NT(t))return t;t=t.parentNode}return null},OT=function(e){var t,n=function(t){return e.dom.isBlock(t)},r=e.getBody(),i=Sp(e.getBody(),n,function(){return xk.hasFocus(e)}),o="sel-"+e.dom.uniqueId(),a=function(t){return e.dom.hasClass(t,"mce-offscreen-selection")},s=function(){var t=e.dom.get(o);return t?t.getElementsByTagName("*")[0]:t},c=function(t){t&&e.selection.setRng(t)},l=function(){return e.selection.getRng()},u=function(t,n,r,o){void 0===o&&(o=!0);var a;return a=e.fire("ShowCaret",{target:n,direction:t,before:r}),a.isDefaultPrevented()?null:(o&&e.selection.scrollIntoView(n,t===-1),i.show(r,n))},d=function(e,t){return t=Xp(e,r,t),e===-1?Ld.fromRangeStart(t):Ld.fromRangeEnd(t)},f=function(t){t.hasAttribute("data-mce-caret")&&(Lu(t),c(l()),e.selection.scrollIntoView(t[0]))},h=function(){e.on("mouseup",function(t){var n=l();n.collapsed&&Pk.isXYInContentArea(e,t.clientX,t.clientY)&&c(Mf(e,n,!1))}),e.on("click",function(t){var n;n=DT(e,t.target),n&&(NT(n)&&(t.preventDefault(),e.focus()),ST(n)&&e.dom.isChildOf(n,e.selection.getNode())&&y())}),e.on("blur NewBlock",function(){y()}),e.on("ResizeWindow FullscreenStateChanged",function(){return i.reposition()});var n=function(e){var t=!1;e.on("touchstart",function(){t=!1}),e.on("touchmove",function(){t=!0}),e.on("touchend",function(n){var r=DT(e,n.target);NT(r)&&(t||(n.preventDefault(),v(Lf(e,r))))})},o=function(e){var t=eh(e);if(!e.firstChild)return!1;var n=Ld.before(e.firstChild),r=t.next(n);return r&&!jT(r)&&!AT(r)},d=function(t,n){var r=e.dom.getParent(t,e.dom.isBlock),i=e.dom.getParent(n,e.dom.isBlock);return r===i},f=function(t,n){var r=e.dom.getParent(t,e.dom.isBlock),i=e.dom.getParent(n,e.dom.isBlock);return!(!r||!e.dom.isChildOf(r,i)||NT(DT(e,r))!==!1)||r&&!d(r,i)&&o(r)};n(e),e.on("mousedown",function(t){var n,i=t.target;if((i===r||"HTML"===i.nodeName||e.dom.isChildOf(i,r))&&Pk.isXYInContentArea(e,t.clientX,t.clientY)!==!1)if(n=DT(e,i))NT(n)?(t.preventDefault(),v(Lf(e,n))):(y(),ST(n)&&t.shiftKey||CT.isXYWithinRange(t.clientX,t.clientY,e.selection.getRng())||(b(),e.selection.placeCaretAt(t.clientX,t.clientY)));else if(Np(i)===!1){y(),b();var o=wT(r,t.clientX,t.clientY);if(o&&!f(t.target,o.node)){t.preventDefault();var a=u(1,o.node,o.before,!1);e.getBody().focus(),c(a)}}}),e.on("keypress",function(t){if(!TT.modifierPressed(t))switch(t.keyCode){default:NT(e.selection.getNode())&&t.preventDefault()}}),e.on("getSelectionRange",function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);n=n.cloneRange(),n.selectNode(t),e.range=n}}),e.on("setSelectionRange",function(e){var t;t=v(e.range,e.forward),t&&(e.range=t)});var h=function(e){return"mcepastebin"===e.id};e.on("AfterSetSelectionRange",function(e){var t=e.range;m(t)||h(t.startContainer.parentNode)||b(),a(t.startContainer.parentNode)||y()}),e.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!St.ie){var n=s();n&&(e.preventDefault(),t.clearData(),t.setData("text/html",n.outerHTML),t.setData("text/plain",n.outerText))}}),QE.init(e),ET.setup(e)},p=function(){var t=e.contentStyles,n=".mce-content-body";t.push(i.getCss()),t.push(n+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+n+" *[contentEditable=false] {cursor: default;}"+n+" *[contentEditable=true] {cursor: text;}")},g=function(e){return Nu(e)||Pu(e)||Fu(e)},m=function(e){return g(e.startContainer)||g(e.endContainer)},v=function(n,r){var i,a,s,c,l,f,h,p,g,v,y=e.$,_=e.dom;if(!n)return null;if(n.collapsed){if(!m(n))if(r===!1){if(p=d(-1,n),Np(p.getNode(!0)))return u(-1,p.getNode(!0),!1,!1);if(Np(p.getNode()))return u(-1,p.getNode(),!p.isAtEnd(),!1)}else{if(p=d(1,n),Np(p.getNode()))return u(1,p.getNode(),!p.isAtEnd(),!1);if(Np(p.getNode(!0)))return u(1,p.getNode(!0),!1,!1)}return null}return c=n.startContainer,l=n.startOffset,f=n.endOffset,3===c.nodeType&&0===l&&NT(c.parentNode)&&(c=c.parentNode,l=_.nodeIndex(c),c=c.parentNode),1!==c.nodeType?null:(f===l+1&&(i=c.childNodes[l]),NT(i)?(g=v=i.cloneNode(!0),h=e.fire("ObjectSelected",{target:i,targetClone:g}),h.isDefaultPrevented()?null:(a=Il.descendant(Ji.fromDom(e.getBody()),"#"+o).fold(function(){return y([])},function(e){return y([e.dom()])}),g=h.targetClone,0===a.length&&(a=y('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",o),a.appendTo(e.getBody())),n=e.dom.createRng(),g===v&&St.ie?(a.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(g),n.setStartAfter(a[0].firstChild.firstChild),n.setEndAfter(g)):(a.empty().append("").append(g).append(""),n.setStart(a[0].firstChild,1),n.setEnd(a[0].lastChild,0)),a.css({top:_.getPos(i,e.getBody()).y}),a[0].focus(),s=e.selection.getSel(),s.removeAllRanges(),s.addRange(n),ze(Cl.descendants(Ji.fromDom(e.getBody()),"*[data-mce-selected]"),function(e){Co.remove(e,"data-mce-selected")}),i.setAttribute("data-mce-selected","1"),t=i,b(),n)):null)},y=function(){t&&(t.removeAttribute("data-mce-selected"),Il.descendant(Ji.fromDom(e.getBody()),"#"+o).each(zc.remove),t=null),Il.descendant(Ji.fromDom(e.getBody()),"#"+o).each(zc.remove),t=null},_=function(){i.destroy(),t=null},b=function(){i.hide()};return St.ceFalse&&(h(),p()),{showCaret:u,showBlockCaretContainer:f,hideFakeCaret:b,destroy:_}},RT=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},BT=function(e){return e.replace(/<!--|-->/g,"")},PT=function(e,t){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?e.allow_svg_data_urls===!1&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},FT=function(e,t,n){var r,i,o,a,s=1;for(a=e.getShortEndedElements(),o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,o.lastIndex=r=n;i=o.exec(t);){if(r=o.lastIndex,"/"===i[1])s--;else if(!i[1]){if(i[2]in a)continue;s++}if(0===s)break}return r};!function(e){e.findEndTag=FT}(K||(K={}));var IT=K,LT=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},MT=function(e,t){var n,r,i,o,a,s=t,c=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,l=e.schema;for(s=LT(e.getTempAttrs(),s),a=l.getShortEndedElements();o=c.exec(s);)r=c.lastIndex,i=o[0].length,n=a[o[1]]?r:IT.findEndTag(l,s,r),s=s.substring(0,r-i)+s.substring(n),c.lastIndex=r-i;return Cu.trim(s)},VT=MT,$T={trimExternal:VT,trimInternal:MT},UT=0,qT=1,HT=2,zT=function(e,t){var n=e.length+t.length+2,r=new Array(n),i=new Array(n),o=function(e,t,n){return{start:e,end:t,diag:n}},a=function(n,r,i,o,s){var l=c(n,r,i,o);if(null===l||l.start===r&&l.diag===r-o||l.end===n&&l.diag===n-i)for(var u=n,d=i;u<r||d<o;)u<r&&d<o&&e[u]===t[d]?(s.push([UT,e[u]]),++u,++d):r-n>o-i?(s.push([HT,e[u]]),++u):(s.push([qT,t[d]]),++d);else{a(n,l.start,i,l.start-l.diag,s);for(var f=l.start;f<l.end;++f)s.push([UT,e[f]]);a(l.end,r,l.end-l.diag,o,s)}},s=function(n,r,i,a){for(var s=n;s-r<a&&s<i&&e[s]===t[s-r];)++s;return o(n,s,r)},c=function(n,o,a,c){var l=o-n,u=c-a;if(0===l||0===u)return null;var d=l-u,f=u+l,h=(f%2===0?f:f+1)/2;r[1+h]=n,i[1+h]=o+1;var p,g,m,v,y;for(p=0;p<=h;++p){for(g=-p;g<=p;g+=2){for(m=g+h,g===-p||g!==p&&r[m-1]<r[m+1]?r[m]=r[m+1]:r[m]=r[m-1]+1,v=r[m],y=v-n+a-g;v<o&&y<c&&e[v]===t[y];)r[m]=++v,++y;if(d%2!==0&&d-p<=g&&g<=d+p&&i[m-d]<=r[m])return s(i[m-d],g+n-a,o,c)}for(g=d-p;g<=d+p;g+=2){for(m=g+h-d,g===d-p||g!==d+p&&i[m+1]<=i[m-1]?i[m]=i[m+1]-1:i[m]=i[m-1],v=i[m]-1,y=v-n+a-g;v>=n&&y>=a&&e[v]===t[y];)i[m]=v--,y--;if(d%2===0&&-p<=g&&g<=p&&i[m]<=r[m+d])return s(i[m],g+n-a,o,c)}}},l=[];return a(0,e.length,0,t.length,l),l},WT={KEEP:UT,DELETE:HT,INSERT:qT,diff:zT},KT=function(e){return Ls.isElement(e)?e.outerHTML:Ls.isText(e)?rc.encodeRaw(e.data,!1):Ls.isComment(e)?"<!--"+e.data+"-->":""},XT=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},YT=function(e,t,n){var r=XT(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else e.appendChild(r)},JT=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},GT=function(e,t){var n=0;lr.each(e,function(e){e[0]===WT.KEEP?n++:e[0]===WT.INSERT?(YT(t,e[1],n),n++):e[0]===WT.DELETE&&JT(t,n)})},ZT=function(e){return lr.filter(lr.map(e.childNodes,KT),function(e){return e.length>0})},QT=function(e,t){var n=lr.map(t.childNodes,KT);return GT(WT.diff(n,e),t),t},eS={read:ZT,write:QT},tS=function(e,t){var n=t||document,r=n.createElement("div");return r.innerHTML=e,Fa.children(Ji.fromDom(r))},nS=function(e,t){return He(e,function(e){return Ji.fromTag(e,t)})},rS=function(e,t){return He(e,function(e){return Ji.fromText(e,t)})},iS=function(e){return He(e,Ji.fromDom)},oS={fromHtml:tS,fromTags:nS,fromText:rS,fromDom:iS},aS=function(e){return e.dom().innerHTML},sS=function(e,t){var n=Fa.owner(e),r=n.dom(),i=Ji.fromDom(r.createDocumentFragment()),o=oS.fromHtml(t,r);$c.append(i,o),zc.empty(e),Fc.append(e,i)},cS=function(e){var t=Ji.fromTag("div"),n=Ji.fromDom(e.dom().cloneNode(!0));
return Fc.append(t,n),aS(t)},lS={get:aS,set:sS,getOuter:cS},uS=Xc(je.none()),dS=function(){return uS.get().getOrThunk(function(){var e=document.implementation.createHTMLDocument("undo");return uS.set(je.some(e)),e})},fS=function(e){return e.indexOf("</iframe>")!==-1},hS=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},pS=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},gS=function(e){var t,n,r;return t=eS.read(e.getBody()),r=nt(t,function(t){var n=$T.trimInternal(e.serializer,t);return n.length>0?[n]:[]}),n=r.join(""),fS(n)?hS(r):pS(n)},mS=function(e,t,n){"fragmented"===t.type?eS.write(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},vS=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},yS=function(e){var t=Ji.fromTag("body",dS());return lS.set(t,vS(e)),ze(Cl.descendants(t,"*[data-mce-bogus]"),zc.unwrap),lS.get(t)},_S=function(e,t){return vS(e)===vS(t)},bS=function(e,t){return yS(e)===yS(t)},wS=function(e,t){return!(!e||!t)&&(!!_S(e,t)||bS(e,t))},xS={createFragmentedLevel:hS,createCompleteLevel:pS,createFromEditor:gS,applyToEditor:mS,isEq:wS},CS=Jg.isEq,kS=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++)if(r[i].inherit===!1&&e.dom.is(t,r[i].selector))return!0;return!1},ES=function(e,t,n,r){var i=e.dom.getRoot();return t!==i&&(t=e.dom.getParent(t,function(t){return!!kS(e,t,n)||t.parentNode===i||!!NS(e,t,n,r,!0)}),NS(e,t,n,r))},TS=function(e,t,n){return!!CS(t,n.inline)||!!CS(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},SS=function(e,t,n,r,i,o){var a,s,c,l=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(l)if("undefined"==typeof l.length){for(a in l)if(l.hasOwnProperty(a)){if(s="attributes"===r?e.getAttrib(t,a):Jg.getStyle(e,t,a),i&&!s&&!n.exact)return;if((!i||n.exact)&&!CS(s,Jg.normalizeStyleValue(e,Jg.replaceVars(l[a],o),a)))return}}else for(c=0;c<l.length;c++)if("attributes"===r?e.getAttrib(t,l[c]):Jg.getStyle(e,t,l[c]))return n;return n},NS=function(e,t,n,r,i){var o,a,s,c,l=e.formatter.get(n),u=e.dom;if(l&&t)for(a=0;a<l.length;a++)if(o=l[a],TS(e.dom,t,o)&&SS(u,t,o,"attributes",i,r)&&SS(u,t,o,"styles",i,r)){if(c=o.classes)for(s=0;s<c.length;s++)if(!e.dom.hasClass(t,c[s]))return;return o}},AS=function(e,t,n,r){var i;return r?ES(e,r,t,n):(r=e.selection.getNode(),!(!ES(e,r,t,n)&&(i=e.selection.getStart(),i===r||!ES(e,i,t,n))))},jS=function(e,t,n){var r,i=[],o={};return r=e.selection.getStart(),e.dom.getParent(r,function(r){var a,s;for(a=0;a<t.length;a++)s=t[a],!o[s]&&NS(e,r,s,n)&&(o[s]=!0,i.push(s))},e.dom.getRoot()),i},DS=function(e,t){var n,r,i,o,a,s=e.formatter.get(t),c=e.dom;if(s)for(n=e.selection.getStart(),r=Jg.getParents(c,n),o=s.length-1;o>=0;o--){if(a=s[o].selector,!a||s[o].defaultBlock)return!0;for(i=r.length-1;i>=0;i--)if(c.is(r[i],a))return!0}return!1},OS={matchNode:NS,matchName:TS,match:AS,matchAll:jS,canApply:DS,matchesUnInheritedFormatSelector:kS},RS=function(e,t){return e.splitText(t)},BS=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t===r&&Ls.isText(t)?n>0&&n<t.nodeValue.length&&(r=RS(t,n),t=r.previousSibling,i>n?(i-=n,t=r=RS(r,i).previousSibling,i=r.nodeValue.length,n=0):i=0):(Ls.isText(t)&&n>0&&n<t.nodeValue.length&&(t=RS(t,n),n=0),Ls.isText(r)&&i>0&&i<r.nodeValue.length&&(r=RS(r,i).previousSibling,i=r.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}},PS={split:BS},FS=Cu.ZWSP,IS="_mce_caret",LS=function(e,t){return e.importNode(t,!0)},MS=function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==FS||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t},VS=function(e){return MS(e).length>0},$S=function(e){var t;if(e)for(t=new b(e,e),e=t.current();e;e=t.next())if(3===e.nodeType)return e;return null},US=function(e){var t=Ji.fromTag("span");return Co.setAll(t,{id:IS,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Fc.append(t,Ji.fromText(FS)),t},qS=function(e){var t=$S(e);return t&&t.nodeValue.charAt(0)===FS&&t.deleteData(0,1),t},HS=function(e,t,n,r){var i,o,a;i=t.getRng(!0),o=e.getParent(n,e.isBlock),VS(n)?(r!==!1&&(i.setStartBefore(n),i.setEndBefore(n)),e.remove(n)):(a=qS(n),i.startContainer===a&&i.startOffset>0&&i.setStart(a,i.startOffset-1),i.endContainer===a&&i.endOffset>0&&i.setEnd(a,i.endOffset-1),e.remove(n,!0)),o&&e.isEmpty(o)&&iv.fillWithPaddingBr(Ji.fromDom(o)),t.setRng(i)},zS=function(e,t,n,r,i){if(r)HS(t,n,r,i);else if(r=_f(e,n.getStart()),!r)for(;r=t.get(IS);)HS(t,n,r,!1)},WS=function(e,t,n){var r=e.dom,i=r.getParent(n,_u.curry(Jg.isTextBlock,e));i&&r.isEmpty(i)?n.parentNode.replaceChild(t,n):(iv.removeTrailingBr(Ji.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},KS=function(e,t){return e.appendChild(t),t},XS=function(e,t){var n=Ye(e,function(e,t){return KS(e,t.cloneNode(!1))},t);return KS(n,n.ownerDocument.createTextNode(FS))},YS=function(e,t,n){var r,i,o,a,s,c,l,u=e.selection;r=u.getRng(!0),a=r.startOffset,c=r.startContainer,l=c.nodeValue,i=_f(e.getBody(),u.getStart()),i&&(o=$S(i));var d=/[^\s\u00a0\u00ad\u200b\ufeff]/;l&&a>0&&a<l.length&&d.test(l.charAt(a))&&d.test(l.charAt(a-1))?(s=u.getBookmark(),r.collapse(!0),r=dm.expandRng(e,r,e.formatter.get(t)),r=PS.split(r),e.formatter.apply(t,n,r),u.moveToBookmark(s)):(i&&o.nodeValue===FS?e.formatter.apply(t,n,i):(i=LS(e.getDoc(),US(!0).dom()),o=i.firstChild,r.insertNode(i),a=1,e.formatter.apply(t,n,i)),u.setCursorLocation(o,a))},JS=function(e,t,n,r){var i,o,a,s,c,l,u,d=e.dom,f=e.selection,h=[],p=f.getRng();for(i=p.startContainer,o=p.startOffset,c=i,3===i.nodeType&&(o!==i.nodeValue.length&&(s=!0),c=c.parentNode);c;){if(OS.matchNode(e,c,t,n,r)){l=c;break}c.nextSibling&&(s=!0),h.push(c),c=c.parentNode}if(l)if(s){a=f.getBookmark(),p.collapse(!0);var g=dm.expandRng(e,p,e.formatter.get(t),!0);g=PS.split(g),e.formatter.remove(t,n,g),f.moveToBookmark(a)}else{u=_f(e.getBody(),l);var m=US(!1).dom(),v=XS(h,m);u?WS(e,m,u):WS(e,m,l),HS(d,f,u,!1),f.setCursorLocation(v,1),d.isEmpty(l)&&d.remove(l)}},GS=function(e,t,n,r){zS(e,t,n,null,!1),8===r&&n.isCollapsed()&&n.getStart().innerHTML===FS&&zS(e,t,n,_f(e,n.getStart())),37!==r&&39!==r||zS(e,t,n,_f(e,n.getStart()))},ZS=function(e){var t=e.dom,n=e.selection,r=e.getBody();e.on("mouseup keydown",function(e){GS(r,t,n,e.keyCode)})},QS=function(e,t){var n=US(!1),r=XS(t,n.dom());return Fc.before(Ji.fromDom(e),n),zc.remove(Ji.fromDom(e)),Ld(r,0)},eN=function(e,t){var n=e.schema.getTextInlineElements();return n.hasOwnProperty(ao.name(t))&&!yf(t.dom())&&!Ls.isBogus(t.dom())},tN={},nN=lr.filter,rN=lr.each,iN=function(e,t){var n=tN[e];n||(tN[e]=n=[]),tN[e].push(t)},oN=function(e,t){rN(tN[e],function(e){e(t)})};iN("pre",function(e){var t,n,r=e.selection.getRng(),i=function(e){return t(e.previousSibling)&&lr.indexOf(n,e.previousSibling)!==-1},o=function(e,t){Ur(t).remove(),Ur(e).append("<br><br>").append(t.childNodes)};t=Ls.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),rN(nN(nN(n,t),i),function(e){o(e.previousSibling,e)}))});var aN={postProcess:oN},sN=/^(src|href|style)$/,cN=xr.each,lN=Jg.isEq,uN=function(e){return/^(TH|TD)$/.test(e.nodeName)},dN=function(e,t,n){var r,i,o;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],Ls.isElement(r)&&(o=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>o?o:i]),Ls.isText(r)&&n&&i>=r.nodeValue.length&&(r=new b(r,e.getBody()).next()||r),Ls.isText(r)&&!n&&0===i&&(r=new b(r,e.getBody()).prev()||r),r},fN=function(e,t,n,r){var i=e.create(n,r);return t.parentNode.insertBefore(i,t),i.appendChild(t),i},hN=function(e,t,n,r,i){var o=(r?"next":"previous")+"Sibling",a=e.create(n,i);t.parentNode.insertBefore(a,t);for(var s=[t],c=t;c=c[o];)s.push(c);return s.forEach(function(e){return a.appendChild(e)}),a},pN=function(e,t,n){return!!lN(t,n.inline)||!!lN(t,n.block)||(n.selector?Ls.isElement(t)&&e.is(t,n.selector):void 0)},gN=function(e,t){return t.links&&"A"===e.tagName},mN=function(e,t,n,r){return t=Jg.getNonWhiteSpaceSibling(t,n,r),!t||"BR"===t.nodeName||e.isBlock(t)},vN=function(e,t,n){var r,i=t.parentNode,o=e.dom,a=e.settings.forced_root_block;n.block&&(a?i===o.getRoot()&&(n.list_block&&lN(t,n.list_block)||cN(xr.grep(t.childNodes),function(t){Jg.isValid(e,a,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=fN(o,t,a),o.setAttribs(r,e.settings.forced_root_block_attrs)):r=0})):o.isBlock(t)&&!o.isBlock(i)&&(mN(o,t,!1)||mN(o,t.firstChild,!0,1)||t.insertBefore(o.create("br"),t.firstChild),mN(o,t,!0)||mN(o,t.lastChild,!1,1)||t.appendChild(o.create("br")))),n.selector&&n.inline&&!lN(n.inline,t)||o.remove(t,1)},yN=function(e,t,n,r,i){var o,a,s,c=e.dom;if(!pN(c,r,t)&&!gN(r,t))return!1;if("all"!==t.remove)for(cN(t.styles,function(e,o){e=Jg.normalizeStyleValue(c,Jg.replaceVars(e,n),o),"number"==typeof o&&(o=e,i=0),(t.remove_similar||!i||lN(Jg.getStyle(c,i,o),e))&&c.setStyle(r,o,""),s=1}),s&&""===c.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),cN(t.attributes,function(e,t){var o;if(e=Jg.replaceVars(e,n),"number"==typeof t&&(t=e,i=0),!i||lN(c.getAttrib(i,t),e)){if("class"===t&&(e=c.getAttrib(r,t),e&&(o="",cN(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}),o)))return void c.setAttrib(r,t,o);"class"===t&&r.removeAttribute("className"),sN.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}}),cN(t.classes,function(e){e=Jg.replaceVars(e,n),i&&!c.hasClass(i,e)||c.removeClass(r,e)}),a=c.getAttribs(r),o=0;o<a.length;o++){var l=a[o].nodeName;if(0!==l.indexOf("_")&&0!==l.indexOf("data-"))return!1}return"none"!==t.remove?(vN(e,r,t),!0):void 0},_N=function(e,t,n,r,i){var o;return cN(Jg.getParents(e.dom,t.parentNode).reverse(),function(t){var a;o||"_start"===t.id||"_end"===t.id||(a=OS.matchNode(e,t,n,r,i),a&&a.split!==!1&&(o=t))}),o},bN=function(e,t,n,r,i,o,a,s){var c,l,u,d,f,h,p=e.dom;if(n){for(h=n.parentNode,c=r.parentNode;c&&c!==h;c=c.parentNode){for(l=p.clone(c,!1),f=0;f<t.length;f++)if(yN(e,t[f],s,l,l)){l=0;break}l&&(u&&l.appendChild(u),d||(d=l),u=l)}!o||a.mixed&&p.isBlock(n)||(r=p.split(n,r)),u&&(i.parentNode.insertBefore(u,i),d.appendChild(i))}return r},wN=function(e,t,n,r,i){var o,a,s=e.formatter.get(t),c=s[0],l=!0,u=e.dom,d=e.selection,f=function(r){var o=_N(e,r,t,n,i);return bN(e,s,o,r,r,!0,c,n)},h=function(t){var r,i,o,a,d;if(Ls.isElement(t)&&u.getContentEditable(t)&&(a=l,l="true"===u.getContentEditable(t),d=!0),r=xr.grep(t.childNodes),l&&!d)for(i=0,o=s.length;i<o&&!yN(e,s[i],n,t,t);i++);if(c.deep&&r.length){for(i=0,o=r.length;i<o;i++)h(r[i]);d&&(l=a)}},p=function(e){var t=u.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return Ig.isBookmarkNode(n)&&(n=n[e?"firstChild":"lastChild"]),Ls.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),u.remove(t,!0),n},g=function(t){var n,r,i=t.commonAncestorContainer;if(t=dm.expandRng(e,t,s,!0),c.split){if(t=PS.split(t),n=dN(e,t,!0),r=dN(e,t),n!==r){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&uN(r)&&r.firstChild&&(r=r.firstChild||r),u.isChildOf(n,r)&&n!==r&&!u.isBlock(r)&&!uN(n)&&!uN(r)){var o=hN(u,n,"span",!0,{id:"_start","data-mce-type":"bookmark"});return f(o),void(n=p(!0))}n=fN(u,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=fN(u,r,"span",{id:"_end","data-mce-type":"bookmark"}),f(n),f(r),n=p(!0),r=p()}else n=r=f(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=u.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=u.nodeIndex(r)+1}gm.walk(u,t,function(t){cN(t,function(t){h(t),Ls.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===Jg.getTextDecoration(u,t.parentNode)&&yN(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(r)return void(r.nodeType?(a=u.createRng(),a.setStartBefore(r),a.setEndAfter(r),g(a)):g(r));if("false"!==u.getContentEditable(d.getNode()))d.isCollapsed()&&c.inline&&!u.select("td[data-mce-selected],th[data-mce-selected]").length?JS(e,t,n,i):(o=mf.getPersistentBookmark(e.selection,!0),g(d.getRng()),d.moveToBookmark(o),c.inline&&OS.match(e,t,n,d.getStart())&&Jg.moveStart(u,d,d.getRng()),e.nodeChanged());else{r=d.getNode();for(var m=0,v=s.length;m<v&&(!s[m].ceFalseOverride||!yN(e,s[m],n,r,r));m++);}},xN={removeFormat:yN,remove:wN},CN=xr.each,kN=function(e){return e&&1===e.nodeType&&!Ig.isBookmarkNode(e)&&!yf(e)&&!Ls.isBogus(e)},EN=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!Ig.isBookmarkNode(n))return n}return e},TN=function(e,t,n){var r,i,o=new Gm(e);if(t&&n&&(t=EN(t,"previousSibling"),n=EN(n,"nextSibling"),o.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)i=r,r=r.nextSibling,t.appendChild(i);return e.remove(n),xr.each(xr.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},SN=function(e,t,n){CN(e.childNodes,function(e){kN(e)&&(t(e)&&n(e),e.hasChildNodes()&&SN(e,t,n))})},NN=function(e,t){return be(function(t,n){return!(!n||!Jg.getStyle(e,n,t))},t)},AN=function(e,t,n){return be(function(t,n,r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),jN(e,r)},t,n)},jN=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},DN=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=Jg.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},ON=function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(xr.walk(r,be(DN,e),"childNodes"),DN(e,r))},RN=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&SN(r,NN(e,"fontSize"),AN(e,"backgroundColor",Jg.replaceVars(t.styles.backgroundColor,n)))},BN=function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(SN(r,NN(e,"fontSize"),AN(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},PN=function(e,t,n,r){r&&t.merge_siblings!==!1&&(r=TN(e,Jg.getNonWhiteSpaceSibling(r),r),r=TN(e,r,Jg.getNonWhiteSpaceSibling(r,!0)))},FN=function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";CN(e.select(r,n),function(n){kN(n)&&CN(t.styles,function(t,r){e.setStyle(n,r,"")})})}},IN=function(e,t,n,r){CN(t,function(t){CN(e.dom.select(t.inline,r),function(r){kN(r)&&xN.removeFormat(e,t,n,r,t.exact?r:null)}),FN(e.dom,t,r)})},LN=function(e,t,n,r,i){OS.matchNode(e,i.parentNode,n,r)&&xN.removeFormat(e,t,r,i)||t.merge_with_parents&&e.dom.getParent(i.parentNode,function(o){if(OS.matchNode(e,o,n,r))return xN.removeFormat(e,t,r,i),!0})},MN={mergeWithChildren:IN,mergeUnderlineAndColor:ON,mergeBackgroundColorAndFontSize:RN,mergeSubSup:BN,mergeSiblings:PN,mergeWithParents:LN},VN=xr.each,$N=function(e){return e&&1===e.nodeType&&!Ig.isBookmarkNode(e)&&!yf(e)&&!Ls.isBogus(e)},UN=function(e,t,n,r){var i,o,a=e.formatter.get(t),s=a[0],c=!r&&e.selection.isCollapsed(),l=e.dom,u=e.selection,d=function(e,t){if(t=t||s,e){if(t.onformat&&t.onformat(e,t,n,r),VN(t.styles,function(t,r){l.setStyle(e,r,Jg.replaceVars(t,n))}),t.styles){var i=l.getAttrib(e,"style");i&&e.setAttribute("data-mce-style",i)}VN(t.attributes,function(t,r){l.setAttrib(e,r,Jg.replaceVars(t,n))}),VN(t.classes,function(t){t=Jg.replaceVars(t,n),l.hasClass(e,t)||l.addClass(e,t)})}},f=function(e,t){var n=!1;return!!s.selector&&(VN(e,function(e){if(!("collapsed"in e&&e.collapsed!==c))return l.is(t,e.selector)&&!yf(t)?(d(t,e),n=!0,!1):void 0}),n)},h=function(r,i,o,c){var l,u,h=[],p=!0;l=s.inline||s.block,u=r.create(l),d(u),gm.walk(r,i,function(i){var o,g=function(i){var m,v,y,_;if(_=p,m=i.nodeName.toLowerCase(),v=i.parentNode.nodeName.toLowerCase(),1===i.nodeType&&r.getContentEditable(i)&&(_=p,p="true"===r.getContentEditable(i),y=!0),Jg.isEq(m,"br"))return o=0,void(s.block&&r.remove(i));if(s.wrapper&&OS.matchNode(e,i,t,n))return void(o=0);if(p&&!y&&s.block&&!s.wrapper&&Jg.isTextBlock(e,m)&&Jg.isValid(e,v,l))return i=r.rename(i,l),d(i),h.push(i),void(o=0);if(s.selector){var b=f(a,i);if(!s.inline||b)return void(o=0)}!p||y||!Jg.isValid(e,l,m)||!Jg.isValid(e,v,l)||!c&&3===i.nodeType&&1===i.nodeValue.length&&65279===i.nodeValue.charCodeAt(0)||yf(i)||s.inline&&r.isBlock(i)?(o=0,VN(xr.grep(i.childNodes),g),y&&(p=_),o=0):(o||(o=r.clone(u,!1),i.parentNode.insertBefore(o,i),h.push(o)),o.appendChild(i))};VN(i,g)}),s.links===!0&&VN(h,function(e){var t=function(e){"A"===e.nodeName&&d(e,s),VN(xr.grep(e.childNodes),t)};t(e)}),VN(h,function(i){var o,c=function(e){var t=0;return VN(e.childNodes,function(e){Jg.isWhiteSpaceNode(e)||Ig.isBookmarkNode(e)||t++}),t},l=function(e){var t=!1;return VN(e.childNodes,function(e){if($N(e))return t=e,!1}),t},u=function(e){var t,n;return t=l(e),t&&!Ig.isBookmarkNode(t)&&OS.matchName(r,t,s)&&(n=r.clone(t,!1),d(n),r.replace(n,e,!0),r.remove(t,1)),n||e};return o=c(i),(h.length>1||!r.isBlock(i))&&0===o?void r.remove(i,1):void((s.inline||s.wrapper)&&(s.exact||1!==o||(i=u(i)),MN.mergeWithChildren(e,a,n,i),MN.mergeWithParents(e,s,t,n,i),MN.mergeBackgroundColorAndFontSize(r,s,n,i),MN.mergeSubSup(r,s,n,i),MN.mergeSiblings(r,s,n,i)))})};if("false"!==l.getContentEditable(u.getNode())){if(s){if(r)r.nodeType?f(a,r)||(o=l.createRng(),o.setStartBefore(r),o.setEndAfter(r),h(l,dm.expandRng(e,o,a),null,!0)):h(l,r,null,!0);else if(c&&s.inline&&!l.select("td[data-mce-selected],th[data-mce-selected]").length)YS(e,t,n);else{var p=e.selection.getNode();e.settings.forced_root_block||!a[0].defaultBlock||l.getParent(p,l.isBlock)||UN(e,a[0].defaultBlock),e.selection.setRng(lv.normalize(e.selection.getRng())),i=mf.getPersistentBookmark(e.selection,!0),h(l,dm.expandRng(e,u.getRng(),a),i),s.styles&&MN.mergeUnderlineAndColor(l,s,n,p),u.moveToBookmark(i),Jg.moveStart(l,u,u.getRng()),e.nodeChanged()}aN.postProcess(t,e)}}else{r=u.getNode();for(var g=0,m=a.length;g<m;g++)if(a[g].ceFalseOverride&&l.is(r,a[g].selector))return void d(r,a[g])}},qN={applyFormat:UN},HN=xr.each,zN=function(e,t){var n={};e.set({}),t.on("NodeChange",function(r){var i=Jg.getParents(t.dom,r.element),o={};i=xr.grep(i,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),HN(e.get(),function(e,r){HN(i,function(a){return t.formatter.matchNode(a,r,{},e.similar)?(n[r]||(HN(e,function(e){e(!0,{node:a,format:r,parents:i})}),n[r]=e),o[r]=e,!1):!OS.matchesUnInheritedFormatSelector(t,a,r)&&void 0})}),HN(n,function(e,t){o[t]||(delete n[t],HN(e,function(e){e(!1,{node:r.element,format:t,parents:i})}))})})},WN=function(e,t,n,r){var i=e.get();HN(t.split(","),function(e){i[e]||(i[e]=[],i[e].similar=r),i[e].push(n)}),e.set(i)},KN=function(e,t,n,r,i){null===t.get()&&zN(t,e),WN(t,n,r,i)},XN={formatChanged:KN},YN=function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,r){xr.each(r,function(n,r){e.setAttrib(t,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return xr.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t},JN={get:YN},GN=xr.each,ZN=Cc.DOM,QN=function(e,t){var n,r,i,o=t&&t.schema||w({}),a=function(e,t){t.classes.length&&ZN.addClass(e,t.classes.join(" ")),ZN.setAttribs(e,t.attrs)},s=function(e){var t;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=ZN.create(r.name),a(t,r),t},c=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=o.getElementRule(n),i=r&&r.parentsRequired;return!(!i||!i.length)&&(t&&xr.inArray(i,t)!==-1?t:i[0])},l=function(e,t,n){var r,i,o,a=t.length>0&&t[0],u=a&&a.name;if(o=c(e,u))u===o?(i=t[0],t=t.slice(1)):i=o;else if(a)i=t[0],t=t.slice(1);else if(!n)return e;return i&&(r=s(i),r.appendChild(e)),n&&(r||(r=ZN.create("div"),r.appendChild(e)),xr.each(n,function(t){var n=s(t);r.insertBefore(n,e)})),l(r,t,i&&i.siblings)};return e&&e.length?(r=e[0],n=s(r),i=ZN.create("div"),i.appendChild(l(n,e.slice(1),r.siblings)),i):""},eA=function(e,t){return QN(nA(e),t)},tA=function(e){var t,n={classes:[],attrs:{}};return e=n.selector=xr.trim(e),"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,r,i,o){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":xr.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r)}if("["===i){var a=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})),n.name=t||"div",n},nA=function(e){return e&&"string"==typeof e?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),xr.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=xr.map(e.split(/(?:~\+|~|\+)/),tA),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]},rA=function(e,t){var n,r,i,o,a,s,c="";if(s=e.settings.preview_styles,s===!1)return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var l=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return"preview"in t&&(s=t.preview,s===!1)?"":(n=t.block||t.inline||"span",o=nA(t.selector),o.length?(o[0].name||(o[0].name=n),n=t.selector,r=QN(o,e)):r=QN([n],e),i=ZN.select(n,r)[0]||r.firstChild,GN(t.styles,function(e,t){e=l(e),e&&ZN.setStyle(i,t,e)}),GN(t.attributes,function(e,t){e=l(e),e&&ZN.setAttrib(i,t,e)}),GN(t.classes,function(e){e=l(e),ZN.hasClass(i,e)||ZN.addClass(i,e)}),e.fire("PreviewFormats"),ZN.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=ZN.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,GN(s.split(" "),function(t){var n=ZN.getStyle(i,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=ZN.getStyle(e.getBody(),t,!0),"#ffffff"===ZN.toHex(n).toLowerCase())||"color"===t&&"#000000"===ZN.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;var r=parseFloat(n)/(/%$/.test(n)?100:1);n=r*a+"px"}"border"===t&&n&&(c+="padding:0 2px;"),c+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),ZN.remove(r),c)},iA={getCssText:rA,parseSelector:nA,selectorToHtml:eA},oA=function(e,t,n,r,i){var o=t.get(n);!OS.match(e,n,r,i)||"toggle"in o[0]&&!o[0].toggle?qN.applyFormat(e,n,r,i):xN.remove(e,n,r,i)},aA={toggle:oA},sA=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},cA={setup:sA},lA=Object.prototype.hasOwnProperty,uA=function(e,t){return t},dA=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)lA.call(o,a)&&(r[a]=e(r[a],o[a]))}return r}},fA=dA(uA),hA=function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)n=e[r],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,r){for(var i,o,a=e.length,s="data-mce-"+r,c=t.url_converter,l=t.url_converter_scope;a--;)i=e[a],o=i.attributes.map[s],void 0!==o?(i.attr(r,o.length>0?o:null),i.attr(s,null)):(o=i.attributes.map[r],"style"===r?o=n.serializeStyle(n.parseStyle(o),i.name):c&&(o=c.call(l,o,r,i.name)),i.attr(r,o.length>0?o:null))}),e.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("class"),n&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)r=e[i],"bookmark"!==r.attributes.map["data-mce-type"]||n.cleanup||r.remove()}),e.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)t=e[n].firstChild,t&&(t.value=rc.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var r,i,o,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)r=e[a],i=r.firstChild?r.firstChild.value:"","script"===n?(o=r.attr("type"),o&&r.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===t.element_format&&i.length>0&&(r.firstChild.value="// <![CDATA[\n"+s(i)+"\n// ]]>")):"xhtml"===t.element_format&&i.length>0&&(r.firstChild.value="<!--\n"+s(i)+"\n-->")}),e.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)n=e[r],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){ze(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},pA=function(e){var t,n,r=function(e){return e&&"br"===e.name};t=e.lastChild,r(t)&&(n=t.prev,r(n)&&(t.remove(),n.remove()))},gA={register:hA,trimTrailingBr:pA},mA=function(e,t,n){var r,i,o,a=e.dom;return t=t.cloneNode(!0),r=document.implementation,r.createHTMLDocument&&(i=r.createHTMLDocument(""),xr.each("BODY"===t.nodeName?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,!0))}),t="BODY"!==t.nodeName?i.body.firstChild:i.body,o=a.doc,a.doc=i),DC.firePreProcess(e,fA(n,{node:t})),o&&(a.doc=o),t},vA=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events},yA=function(e,t,n){return vA(e,n)?mA(e,t,n):t},_A={process:yA},bA=function(e,t){ze(t,function(t){e.attr(t,null)})},wA=function(e,t,n){e.addNodeFilter("font",function(e){ze(e,function(e){var r=t.parse(e.attr("style")),i=e.attr("color"),o=e.attr("face"),a=e.attr("size");i&&(r.color=i),o&&(r["font-family"]=o),a&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),bA(e,["color","face","size"])})})},xA=function(e,t){e.addNodeFilter("strike",function(e){ze(e,function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))})})},CA=function(e,t){var n=x();t.convert_fonts_to_spans&&wA(e,n,xr.explode(t.font_size_legacy_values)),xA(e,n)},kA=function(e,t){t.inline_styles&&CA(e,t)},EA={register:kA},TA=/^[ \t\r\n]*$/,SA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},NA=function(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}},AA=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r,i;if(r=new e(t,SA[t]||1),n)for(i in n)r.attr(i,n[i]);return r},e.prototype.replace=function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},e.prototype.attr=function(e,t){var n,r,i=this;if("string"!=typeof e){for(r in e)i.attr(r,e[r]);return i}if(n=i.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),i;return i}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,i}return n.map[e]}},e.prototype.clone=function(){var t,n,r,i,o,a=this,s=new e(a.name,a.type);if(r=a.attributes){for(o=[],o.map={},t=0,n=r.length;t<n;t++)i=r[t],"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value);s.attributes=o}return s.value=a.value,s.shortEnded=a.shortEnded,s},e.prototype.wrap=function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},e.prototype.unwrap=function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},e.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},e.prototype.append=function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},e.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},e.prototype.getAll=function(e){
var t,n=this,r=[];for(t=n.firstChild;t;t=NA(t,n))t.name===e&&r.push(t);return r},e.prototype.empty=function(){var e,t,n,r=this;if(r.firstChild){for(e=[],n=r.firstChild;n;n=NA(n,r))e.push(n);for(t=e.length;t--;)n=e[t],n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}return r.firstChild=r.lastChild=null,r},e.prototype.isEmpty=function(e,t,n){var r,i,o=this,a=o.firstChild;if(t=t||{},a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(e[a.name])return!1;for(r=a.attributes.length;r--;)if(i=a.attributes[r].name,"name"===i||0===i.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!TA.test(a.value))return!1;if(3===a.type&&a.parent&&t[a.parent.name]&&TA.test(a.value))return!1;if(n&&n(a))return!1}while(a=NA(a,o));return!0},e.prototype.walk=function(e){return NA(this,null,e)},e}(),jA=function(e,t,n,r){var i=e.padd_empty_with_br||t.insert;i&&n[r.name]?r.empty().append(new AA("br",1)).shortEnded=!0:r.empty().append(new AA("#text",3)).value=""},DA=function(e){return OA(e,"#text")&&""===e.firstChild.value},OA=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},RA=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty},BA=function(e,t,n,r){return r.isEmpty(t,n,function(t){return RA(e,t)})},PA=function(e,t){return e&&(t[e.name]||"br"===e.name)},FA=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,r,i){var o,a,s,c,l,u,d,f,h=e.length,p=xr.extend({},n.getBlockElements()),g=n.getNonEmptyElements(),m=n.getNonEmptyElements();for(p.body=1,o=0;o<h;o++)if(a=e[o],s=a.parent,p[a.parent.name]&&a===s.lastChild){for(l=a.prev;l;){if(u=l.name,"span"!==u||"bookmark"!==l.attr("data-mce-type")){if("br"!==u)break;if("br"===u){a=null;break}}l=l.prev}a&&(a.remove(),BA(n,g,m,s)&&(d=n.getElementRule(s.name),d&&(d.removeEmpty?s.remove():d.paddEmpty&&jA(t,i,p,s))))}else{for(c=a;s&&s.firstChild===c&&s.lastChild===c&&(c=s,!p[s.name]);)s=s.parent;c===s&&t.padd_empty_with_br!==!0&&(f=new AA("#text",3),f.value="",a.replace(f))}}),e.addAttributeFilter("href",function(e){var n,r=e.length,i=function(e){var t=e.split(" ").filter(function(e){return e.length>0});return t.concat(["noopener"]).sort().join(" ")},o=function(e){var t=e?xr.trim(e):"";return/\b(noopener)\b/g.test(t)?t:i(t)};if(!t.allow_unsafe_link_target)for(;r--;)n=e[r],"a"===n.name&&"_blank"===n.attr("target")&&n.attr("rel",o(n.attr("rel")))}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if(i=e[o],"a"===i.name&&i.firstChild&&!i.attr("href")){r=i.parent,t=i.lastChild;do n=t.prev,r.insert(t,i),t=n;while(t)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)if(t=e[r],n=t.parent,"ul"===n.name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var i=new AA("li",1);i.attr("style","list-style-type: none"),t.wrap(i)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,r,i,o,a,s,c,l=e.length,u=n.getValidClasses();l--;){for(t=e[l],r=t.attr("class").split(" "),a="",i=0;i<r.length;i++)o=r[i],c=!1,s=u["*"],s&&s[o]&&(c=!0),s=u[t.name],!c&&s&&s[o]&&(c=!0),c&&(a&&(a+=" "),a+=o);a.length||(a=null),t.attr("class",a)}})},IA=xr.makeMap,LA=xr.each,MA=xr.explode,VA=xr.extend,$A=function(e,t,n){xr.inArray(t,n)===-1&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},UA=function(e,t,n){if(!t.no_events&&e){var r=DC.firePostProcess(e,fA(t,{content:n}));return r.content}return n},qA=function(e,t,n){var r=Cu.trim(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||bs(Ji.fromDom(t))?r:xr.trim(r)},HA=function(e,t,n){var r=n.selection?fA({forced_root_block:!1},n):n,i=e.parse(t,r);return gA.trimTrailingBr(i),i},zA=function(e,t,n){var r=D(e,t);return r.serialize(n)},WA=function(e,t,n,r,i){var o=zA(t,n,r);return UA(e,i,o)};!function(e){e.isBookmarkNode=Ig.isBookmarkNode}(ee||(ee={}));var KA=ee,XA=Ls.isContentEditableFalse,YA=Ls.isContentEditableTrue,JA=function(e,t){for(;t&&t!==e;){if(YA(t)||XA(t))return t;t=t.parentNode}return null},GA=function(e,t){var n,r,i,o,a,s,c,l,u,d,f,h,p,g,m,v,y,_=t.dom,b=xr.each,w=t.getDoc(),x=document,C=Math.abs,k=Math.round,E=t.getBody();o={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var T=".mce-content-body";t.contentStyles.push(T+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+T+" .mce-resizehandle:hover {background: #000}"+T+" img[data-mce-selected],"+T+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+T+" .mce-clonedresizable {position: absolute;"+(St.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+T+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var S=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},N=function(e,t){return S(e.target)&&!CT.isXYWithinRange(e.clientX,e.clientY,t)},A=function(e){var n=e.target;N(e,t.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),t.selection.select(n))},j=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},D=function(e){var n=t.settings.object_resizing;return n!==!1&&!St.iOS&&("string"!=typeof n&&(n="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&sa.is(Ji.fromDom(e),n))},O=function(e){var o,b,w,x,T;o=e.screenX-s,b=e.screenY-c,g=o*a[2]+d,m=b*a[3]+f,g=g<5?5:g,m=m<5?5:m,w=S(n)&&t.settings.resize_img_proportional!==!1?!TT.modifierPressed(e):TT.modifierPressed(e)||S(n)&&a[2]*a[3]!==0,w&&(C(o)>C(b)?(m=k(g*h),g=k(m/h)):(g=k(m/h),m=k(g*h))),_.setStyles(j(r),{width:g,height:m}),x=a.startPos.x+o,T=a.startPos.y+b,x=x>0?x:0,T=T>0?T:0,_.setStyles(i,{left:x,top:T,display:"block"}),i.innerHTML=g+" &times; "+m,a[2]<0&&r.clientWidth<=g&&_.setStyle(r,"left",l+(d-g)),a[3]<0&&r.clientHeight<=m&&_.setStyle(r,"top",u+(f-m)),o=E.scrollWidth-v,b=E.scrollHeight-y,o+b!==0&&_.setStyles(i,{left:x-o,top:T-b}),p||(DC.fireObjectResizeStart(t,n,d,f),p=!0)},R=function(){p=!1;var e=function(e,r){r&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?_.setStyle(j(n),e,r):_.setAttrib(j(n),e,r))};e("width",g),e("height",m),_.unbind(w,"mousemove",O),_.unbind(w,"mouseup",R),x!==w&&(_.unbind(x,"mousemove",O),_.unbind(x,"mouseup",R)),_.remove(r),_.remove(i),B(n),DC.fireObjectResized(t,n,g,m),_.setAttrib(n,"style",_.getAttrib(n,"style")),t.nodeChanged()},B=function(e){var p,C,k,T,S;P(),L(),p=_.getPos(e,E),l=p.x,u=p.y,S=e.getBoundingClientRect(),C=S.width||S.right-S.left,k=S.height||S.bottom-S.top,n!==e&&(n=e,g=m=0),T=t.fire("ObjectSelected",{target:e}),D(e)&&!T.isDefaultPrevented()?b(o,function(e,t){var o,p=function(t){s=t.screenX,c=t.screenY,d=j(n).clientWidth,f=j(n).clientHeight,h=f/d,a=e,e.startPos={x:C*e[0]+l,y:k*e[1]+u},v=E.scrollWidth,y=E.scrollHeight,r=n.cloneNode(!0),_.addClass(r,"mce-clonedresizable"),_.setAttrib(r,"data-mce-bogus","all"),r.contentEditable=!1,r.unSelectabe=!0,_.setStyles(r,{left:l,top:u,margin:0}),r.removeAttribute("data-mce-selected"),E.appendChild(r),_.bind(w,"mousemove",O),_.bind(w,"mouseup",R),x!==w&&(_.bind(x,"mousemove",O),_.bind(x,"mouseup",R)),i=_.add(E,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+f)};o=_.get("mceResizeHandle"+t),o&&_.remove(o),o=_.add(E,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===St.ie&&(o.contentEditable=!1),_.bind(o,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),p(e)}),e.elm=o,_.setStyles(o,{left:C*e[0]+l-o.offsetWidth/2,top:k*e[1]+u-o.offsetHeight/2})}):P(),n.setAttribute("data-mce-selected","1")},P=function(){var e,t;L(),n&&n.removeAttribute("data-mce-selected");for(e in o)t=_.get("mceResizeHandle"+e),t&&(_.unbind(t),_.remove(t))},F=function(n){var r,i,o=function(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)};if(!p&&!t.removed)return b(_.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),i="mousedown"===n.type?n.target:e.getNode(),i=_.$(i).closest("table,img,figure.image,hr")[0],o(i,E)&&(M(),r=e.getStart(!0),o(r,i)&&o(e.getEnd(!0),i))?void B(i):void P()},I=function(e){return XA(JA(t.getBody(),e))},L=function(){for(var e in o){var t=o[e];t.elm&&(_.unbind(t.elm),delete t.elm)}},M=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};t.on("init",function(){M(),St.ie&&St.ie>=11&&(t.on("mousedown click",function(e){var n=e.target,r=n.nodeName;p||!/^(TABLE|IMG|HR)$/.test(r)||I(n)||(2!==e.button&&t.selection.select(n,"TABLE"===r),"mousedown"===e.type&&t.nodeChanged())}),t.dom.bind(E,"mscontrolselect",function(e){var n=function(e){Ft.setEditorTimeout(t,function(){t.selection.select(e)})};return I(e.target)?(e.preventDefault(),void n(e.target)):void(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target)))}));var e=Ft.throttle(function(e){t.composing||F(e)});t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),t.on("keyup compositionend",function(t){n&&"TABLE"===n.nodeName&&e(t)}),t.on("hide blur",P),t.on("contextmenu",A)}),t.on("remove",L);var V=function(){n=r=null};return{isResizable:D,showResizeRect:B,hideResizeRect:P,updateResizeRect:F,destroy:V}},ZA=function(e){return Ls.isContentEditableTrue(e)||Ls.isContentEditableFalse(e)},QA=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},ej=function(e,t,n){var r,i,o;if(r=n.elementFromPoint(e,t),i=n.body.createTextRange(),r&&"HTML"!==r.tagName||(r=n.body),i.moveToElementText(r),o=xr.toArray(i.getClientRects()),o=o.sort(function(e,n){return e=Math.abs(Math.max(e.top-t,e.bottom-t)),n=Math.abs(Math.max(n.top-t,n.bottom-t)),e-n}),o.length>0){t=(o[0].bottom+o[0].top)/2;try{return i.moveToPoint(e,t),i.collapse(!0),i}catch(e){}}return null},tj=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return Ls.isContentEditableFalse(QA(n,t,ZA))?null:e},nj=function(e,t,n){var r,i,o=n;if(o.caretPositionFromPoint)i=o.caretPositionFromPoint(e,t),i&&(r=n.createRange(),r.setStart(i.offsetNode,i.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(o.body.createTextRange){r=o.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(i){r=ej(e,t,n)}return tj(r,n.body)}return r},rj={fromPoint:nj},ij=function(e,t){return He(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})},oj={processRanges:ij},aj=function(e,t){var n=t||document,r=n.createDocumentFragment();return ze(e,function(e){r.appendChild(e.dom())}),Ji.fromDom(r)},sj={fromElements:aj},cj=Ko("element","width","rows"),lj=Ko("element","cells"),uj=Ko("x","y"),dj=function(e,t){var n=parseInt(Co.get(e,t),10);return isNaN(n)?1:n},fj=function(e,t,n,r,i){for(var o=dj(i,"rowspan"),a=dj(i,"colspan"),s=e.rows(),c=n;c<n+o;c++){s[c]||(s[c]=lj(uu.deep(r),[]));for(var l=t;l<t+a;l++){var u=s[c].cells();u[l]=c===n&&l===t?i:uu.shallow(i)}}},hj=function(e,t,n){var r=e.rows(),i=r[n]?r[n].cells():[];return!!i[t]},pj=function(e,t,n){for(;hj(e,t,n);)t++;return t},gj=function(e){return Je(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},mj=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var i=n[r].cells(),o=0;o<i.length;o++)if(ga.eq(i[o],t))return je.some(uj(o,r));return je.none()},vj=function(e,t,n,r,i){for(var o=[],a=e.rows(),s=n;s<=i;s++){var c=a[s].cells(),l=t<r?c.slice(t,r+1):c.slice(r,t+1);o.push(lj(a[s].element(),l))}return o},yj=function(e,t,n){var r=t.x(),i=t.y(),o=n.x(),a=n.y(),s=i<a?vj(e,r,i,o,a):vj(e,r,a,o,i);return cj(e.element(),gj(s),s)},_j=function(e,t){var n=uu.shallow(e.element()),r=Ji.fromTag("tbody");return $c.append(r,t),Fc.append(n,r),n},bj=function(e){return He(e.rows(),function(e){var t=He(e.cells(),function(e){var t=uu.deep(e);return Co.remove(t,"colspan"),Co.remove(t,"rowspan"),t}),n=uu.shallow(e.element());return $c.append(n,t),n})},wj=function(e){var t=cj(uu.shallow(e),0,[]);return ze(Cl.descendants(e,"tr"),function(e,n){ze(Cl.descendants(e,"td,th"),function(r,i){fj(t,pj(t,i,n),n,e,r)})}),cj(t.element(),gj(t.rows()),t.rows())},xj=function(e){return _j(e,bj(e))},Cj=function(e,t,n){return mj(e,t).bind(function(t){return mj(e,n).map(function(n){return yj(e,t,n)})})},kj={fromDom:wj,toDom:xj,subsection:Cj},Ej=function(e){return Ge(e,function(e){return"ul"===ao.name(e)||"ol"===ao.name(e)})},Tj=function(e,t){return Ge(e,function(e){return"li"===ao.name(e)&&wE(e,t)}).fold(ye([]),function(t){return Ej(e).map(function(e){return[Ji.fromTag("li"),Ji.fromTag(ao.name(e))]}).getOr([])})},Sj=function(e,t){var n=Je(t,function(e,t){return Fc.append(t,e),t},e);return t.length>0?sj.fromElements([n]):n},Nj=function(e){return ms(e)?Fa.parent(e).filter(gs).fold(ye([]),function(t){return[e,t]}):gs(e)?[e]:[]},Aj=function(e,t){var n=Ji.fromDom(t.commonAncestorContainer),r=By.parentsAndSelf(n,e),i=Xe(r,function(e){return fs(e)||us(e)}),o=Tj(r,t),a=i.concat(o.length?o:Nj(n));return He(a,uu.shallow)},jj=function(){return sj.fromElements([])},Dj=function(e,t){return Sj(Ji.fromDom(t.cloneContents()),Aj(e,t))},Oj=function(e,t){return Il.ancestor(t,"table",be(ga.eq,e))},Rj=function(e,t){return Oj(e,t[0]).bind(function(e){var n=t[0],r=t[t.length-1],i=kj.fromDom(e);return kj.subsection(i,n,r).map(function(e){return sj.fromElements([kj.toDom(e)])})}).getOrThunk(jj)},Bj=function(e,t){return t.length>0&&t[0].collapsed?jj():Dj(e,t[0])},Pj=function(e,t){var n=Nw.getCellsFromElementOrRanges(t,e);return n.length>0?Rj(e,n):Bj(e,t)},Fj={read:Pj},Ij=function(e,t){var n,r=e.selection.getRng(),i=e.dom.create("body"),o=e.selection.getSel(),a=oj.processRanges(e,Cw.getRanges(o));if(t=t||{},t.get=!0,t.format=t.format||"html",t.selection=!0,t=e.fire("BeforeGetContent",t),t.isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return e.selection.isCollapsed()?"":Cu.trim(r.text||(o.toString?o.toString():""));r.cloneContents?(n=t.contextual?Fj.read(Ji.fromDom(e.getBody()),a).dom():r.cloneContents(),n&&i.appendChild(n)):void 0!==r.item||void 0!==r.htmlText?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),t.getInner=!0;var s=e.selection.serializer.serialize(i,t);return"tree"===t.format?s:(t.content=e.selection.isCollapsed()?"":s,e.fire("GetContent",t),t.content)},Lj={getContent:Ij},Mj=function(e,t,n){var r,i,o,a=e.selection.getRng(),s=e.getDoc();if(n=n||{format:"html"},n.set=!0,n.selection=!0,n.content=t,!n.no_events&&(n=e.fire("BeforeSetContent",n),n.isDefaultPrevented()))return void e.fire("SetContent",n);if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer===s&&a.endContainer===s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=t,a.insertNode(i))),r=e.dom.get("__caret"),a=s.createRange(),a.setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(e){}}else a.item&&(s.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)},Vj={setContent:Mj},$j=function(e,t,n,r,i){var o=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return je.from(o).map(Ji.fromDom).map(function(e){return r&&t.collapsed?e:Fa.child(e,i(e,a)).getOr(e)}).bind(function(e){return ao.isElement(e)?je.some(e):Fa.parent(e)}).map(function(e){return e.dom()}).getOr(e)},Uj=function(e,t,n){return $j(e,t,!0,n,function(e,t){return Math.min(Fa.childNodesCount(e),t)})},qj=function(e,t,n){return $j(e,t,!1,n,function(e,t){return t>0?t-1:t})},Hj=function(e,t){for(var n=e;e&&Ls.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},zj=function(e,t){var n,r,i,o,a;return t?(r=t.startContainer,i=t.endContainer,o=t.startOffset,a=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(r===i&&a-o<2&&r.hasChildNodes()&&(n=r.childNodes[o]),3===r.nodeType&&3===i.nodeType&&(r=r.length===o?Hj(r.nextSibling,!0):r.parentNode,i=0===a?Hj(i.previousSibling,!1):i.parentNode,r&&r===i))?r:n&&3===n.nodeType?n.parentNode:n):e},Wj=function(e,t,n,r){var i,o,a=[];if(o=e.getRoot(),n=e.getParent(n||Uj(o,t,t.collapsed),e.isBlock),r=e.getParent(r||qj(o,t,t.collapsed),e.isBlock),n&&n!==o&&a.push(n),n&&r&&n!==r){i=n;for(var s=new b(n,o);(i=s.next())&&i!==r;)e.isBlock(i)&&a.push(i)}return r&&n!==r&&r!==o&&a.push(r),a},Kj=function(e,t,n){return je.from(t).map(function(t){var r=e.nodeIndex(t),i=e.createRng();return i.setStart(t.parentNode,r),i.setEnd(t.parentNode,r+1),n&&(xE(e,i,t,!0),xE(e,i,t,!1)),i})},Xj=xr.each,Yj=function(e){return!!e.select},Jj=function(e){return!(!e||!e.ownerDocument)&&ga.contains(Ji.fromDom(e.ownerDocument),Ji.fromDom(e))},Gj=function(e){return!!e&&(!!Yj(e)||Jj(e.startContainer)&&Jj(e.endContainer))},Zj=function(e,t,n,r){var i,o,a,s,c,l=function(t,n){var i=e.createRng();t?(i.setStart(t,n),i.setEnd(t,n),w(i),y(!1)):(xE(e,i,r.getBody(),!0),w(i))},u=function(e){return Lj.getContent(r,e)},d=function(e,t){return Vj.setContent(r,e,t)},f=function(e){return Uj(r.getBody(),b(),e)},h=function(e){return qj(r.getBody(),b(),e)},p=function(e,t){return i.getBookmark(e,t)},g=function(e){return i.moveToBookmark(e)},m=function(t,n){return Kj(e,t,n).each(w),t},v=function(){var e=b(),t=_();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},y=function(e){var t=b();t.collapse(!!e),w(t)},_=function(){return t.getSelection?t.getSelection():t.document.selection},b=function(){var n,i,o,c,l=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;if(c=t.document,"undefined"==typeof c||null===c)return null;if(void 0!==r.bookmark&&xk.hasFocus(r)===!1){var u=hC.getRng(r);if(u.isSome())return u.map(function(e){return oj.processRanges(r,[e])[0]}).getOr(c.createRange())}try{(n=_())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():c.createRange())}catch(e){}return i=oj.processRanges(r,[i])[0],i||(i=c.createRange?c.createRange():c.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=e.getRoot(),i.setStart(o,0),i.setEnd(o,0)),a&&s&&(0===l(i.START_TO_START,i,a)&&0===l(i.END_TO_END,i,a)?i=s:(a=null,s=null)),i},w=function(e,t){var n,i,o;if(Gj(e)){var c=Yj(e)?e:null;if(c){s=null;try{c.select()}catch(e){}}else{if(n=_(),o=r.fire("SetSelectionRange",{range:e,forward:t}),e=o.range,n){s=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||St.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(i=e.startContainer.childNodes[e.startOffset],i&&"IMG"===i.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(i,0,i,1))),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},x=function(t){return d(e.getOuterHTML(t)),t},C=function(){return zj(r.getBody(),b())},k=function(t,n){return Wj(e,b(),t,n)},E=function(){var t,n,r=_();return!(r&&r.anchorNode&&r.focusNode)||(t=e.createRng(),t.setStart(r.anchorNode,r.anchorOffset),t.collapse(!0),n=e.createRng(),n.setStart(r.focusNode,r.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},T=function(){var t=b(),n=_();if(!Cw.hasMultipleRanges(n)&&CE(r)){var i=Sx.normalize(e,t);return i.each(function(e){w(e,E())}),i.getOr(t)}return t},S=function(t,n){var i;return c||(c={},i={},r.on("NodeChange",function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),o={};Xj(c,function(t,n){Xj(r,function(a){if(e.is(a,n))return i[n]||(Xj(t,function(e){e(!0,{node:a,selector:n,parents:r})}),i[n]=t),o[n]=t,!1})}),Xj(i,function(e,t){o[t]||(delete i[t],Xj(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),c[t]||(c[t]=[]),c[t].push(n),R},N=function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},A=function(e,t){return Oh.scrollElementIntoView(r,e,t)},j=function(e,t){return w(rj.fromPoint(e,t,r.getDoc()))},D=function(){var e=b();return e.collapsed?Ld.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},O=function(){t=a=s=null,o.destroy()},R={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:y,setCursorLocation:l,getContent:u,setContent:d,getBookmark:p,moveToBookmark:g,select:m,isCollapsed:v,isForward:E,setNode:x,getNode:C,getSel:_,setRng:w,getRng:b,getStart:f,getEnd:h,getSelectedBlocks:k,normalize:T,selectorChanged:S,getScrollContainer:N,scrollIntoView:A,placeCaretAt:j,getBoundingClientRect:D,destroy:O};return i=KA(R),o=GA(R,r),R.bookmarkManager=i,R.controlSelection=o,R},Qj=Ls.isContentEditableFalse,eD=fd,tD=eg,nD=Qp,rD=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},iD=function(e,t){var n=$p(e,t);return!(n||!Ls.isBr(e.getNode()))||n},oD=function(e,t,n,r){var i,o,a,s,c=e===Id.Forwards,l=c?nD:tD;return!r.collapsed&&(i=eD(r),Qj(i))?Ff(e,t,i,e===Id.Backwards,!0):(s=Mu(r),o=Zp(e,t.getBody(),r),l(o)?Lf(t,o.getNode(!c)):(o=n(o))?l(o)?Ff(e,t,o.getNode(!c),c,!0):(a=n(o),l(a)&&iD(o,a)?Ff(e,t,a.getNode(!c),c,!0):s?Vf(t,o.toRange(),!0):null):s?r:null)},aD=function(e,t,n,r){var i,o,a,s,c,l,u,d,f;if(f=eD(r),i=Zp(e,t.getBody(),r),o=n(t.getBody(),lT(1),i),a=lr.filter(o,uT(1)),c=lr.last(i.getClientRects()),(nD(i)||tg(i))&&(f=i.getNode()),(tD(i)||ng(i))&&(f=i.getNode(!0)),!c)return null;if(l=c.left,s=mT(a,l),s&&Qj(s.node))return u=Math.abs(l-s.left),d=Math.abs(l-s.right),Ff(e,t,s.node,u<d,!0);if(f){var h=cT(e,t.getBody(),lT(1),f);if(s=mT(lr.filter(h,uT(1)),l))return Vf(t,s.position.toRange(),!0);if(s=lr.last(lr.filter(h,uT(0))))return Vf(t,s.position.toRange(),!0)}},sD=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!St.ie||St.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t},cD=function(e,t,n){var r,i,o,a=eh(e.getBody()),s=_u.curry(rD,a.next),c=_u.curry(rD,a.prev);if(n.collapsed&&e.settings.forced_root_block){if(r=e.dom.getParent(n.startContainer,"PRE"),!r)return;i=1===t?s(Ld.fromRangeStart(n)):c(Ld.fromRangeStart(n)),i||(o=sD(e),1===t?e.$(r).after(o):e.$(r).before(o),e.selection.select(o,!0),e.selection.collapse())}},lD=function(e,t){var n,r=eh(e.getBody()),i=_u.curry(rD,r.next),o=_u.curry(rD,r.prev),a=t?Id.Forwards:Id.Backwards,s=t?i:o,c=e.selection.getRng();return(n=oD(a,e,s,c))?n:(n=cD(e,a,c),n?n:null)},uD=function(e,t){var n,r=t?1:-1,i=t?sT:aT,o=e.selection.getRng();return(n=aD(r,e,i,o))?n:(n=cD(e,r,o),n?n:null)},dD=function(e,t){return function(){var n=lD(e,t);return!!n&&(e.selection.setRng(n),!0)}},fD=function(e,t){return function(){var n=uD(e,t);return!!n&&(e.selection.setRng(n),!0)}},hD=function(e){return He(e,function(e){return fA({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:me},e)})},pD=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},gD=function(e,t){return nt(hD(e),function(e){return pD(e,t)?[e]:[]})},mD=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},vD=function(e,t){return Ge(gD(e,t),function(e){return e.action()})},yD={match:gD,action:mD,execute:vD},_D=function(e,t,n){var r=Hi.detect().os;yD.execute([{keyCode:TT.RIGHT,action:dD(e,!0)},{keyCode:TT.LEFT,action:dD(e,!1)},{keyCode:TT.UP,action:fD(e,!1)},{keyCode:TT.DOWN,action:fD(e,!0)},{keyCode:TT.RIGHT,action:wp(e,!0)},{keyCode:TT.LEFT,action:wp(e,!1)},{keyCode:TT.UP,action:xp(e,!1)},{keyCode:TT.DOWN,action:xp(e,!0)},{keyCode:TT.RIGHT,action:qb.move(e,t,!0)},{keyCode:TT.LEFT,action:qb.move(e,t,!1)},{keyCode:TT.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:qb.moveNextWord(e,t)},{keyCode:TT.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:qb.movePrevWord(e,t)}],n).each(function(e){n.preventDefault()})},bD=function(e,t){e.on("keydown",function(n){n.isDefaultPrevented()===!1&&_D(e,t,n)})},wD={setup:bD},xD=function(e,t){var n=By.parentsAndSelf(t,e);return Ze(n,ds).fold(ye(n),function(e){return n.slice(0,e)})},CD=function(e){return 1===Fa.children(e).length},kD=function(e,t,n,r){var i=be(eN,t),o=He(Xe(r,i),function(e){return e.dom()});if(0===o.length)R_.deleteElement(t,e,n);else{var a=QS(n.dom(),o);t.selection.setRng(a.toRange())}},ED=function(e,t){var n=Ji.fromDom(e.getBody()),r=Ji.fromDom(e.selection.getStart()),i=Xe(xD(n,r),CD);return ut(i).map(function(n){var r=Ld.fromRangeStart(e.selection.getRng());return!!ny.willDeleteLastPositionInElement(t,r,n.dom())&&(kD(t,e,n,i),!0)}).getOr(!1)},TD=function(e,t){return!!e.selection.isCollapsed()&&ED(e,t)},SD={backspaceDelete:TD},ND=function(e,t,n){yD.execute([{keyCode:TT.BACKSPACE,action:yD.action(q_.backspaceDelete,e,!1)},{keyCode:TT.DELETE,action:yD.action(q_.backspaceDelete,e,!0)},{keyCode:TT.BACKSPACE,action:yD.action(Zb.backspaceDelete,e,t,!1)},{keyCode:TT.DELETE,action:yD.action(Zb.backspaceDelete,e,t,!0)},{keyCode:TT.BACKSPACE,action:yD.action(Kw.backspaceDelete,e,!1)},{keyCode:TT.DELETE,action:yD.action(Kw.backspaceDelete,e,!0)},{keyCode:TT.BACKSPACE,action:yD.action(n_.backspaceDelete,e,!1)},{keyCode:TT.DELETE,action:yD.action(n_.backspaceDelete,e,!0)},{keyCode:TT.BACKSPACE,action:yD.action(Xy.backspaceDelete,e,!1)},{keyCode:TT.DELETE,action:yD.action(Xy.backspaceDelete,e,!0)},{keyCode:TT.BACKSPACE,action:yD.action(SD.backspaceDelete,e,!1)},{keyCode:TT.DELETE,action:yD.action(SD.backspaceDelete,e,!0)}],n).each(function(e){n.preventDefault()})},AD=function(e,t){yD.execute([{keyCode:TT.BACKSPACE,action:yD.action(q_.paddEmptyElement,e)},{keyCode:TT.DELETE,action:yD.action(q_.paddEmptyElement,e)}],t)},jD=function(e,t){e.on("keydown",function(n){n.isDefaultPrevented()===!1&&ND(e,t,n)}),e.on("keyup",function(t){t.isDefaultPrevented()===!1&&AD(e,t)})},DD={setup:jD},OD=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},RD=function(e,t){var n,r,i,o,a=t,s=e.dom,c=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var l=OD(t.firstChild);l&&/^(UL|OL|DL)$/.test(l.nodeName)&&t.insertBefore(s.doc.createTextNode(""),t.firstChild)}if(i=s.createRng(),t.normalize(),t.hasChildNodes()){for(n=new b(t,t);r=n.current();){if(Ls.isText(r)){i.setStart(r,0),i.setEnd(r,0);break}if(c[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}a=r,r=n.next()}r||(i.setStart(a,0),i.setEnd(a,0))}else Ls.isBr(t)?t.nextSibling&&s.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),s.remove(o),e.selection.scrollIntoView(t)}},BD=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},PD=function(e){return je.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},FD=function(e){return PD(e).fold(ye(""),function(e){return e.nodeName.toUpperCase()})},ID=function(e){return PD(e).filter(function(e){return ms(Ji.fromDom(e))}).isSome()},LD={moveToCaretPosition:RD,getEditableRoot:BD,getParentBlock:PD,getParentBlockName:FD,isListItemParentBlock:ID},MD=function(e,t){return e.firstChild&&e.firstChild.nodeName===t},VD=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},$D=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},UD=function(e){return $D(e)&&$D(e.parentNode)},qD=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},HD=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!Ls.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},zD=function(e,t,n,r,i){var o=e.dom,a=e.selection.getRng();if(n!==e.getBody()){UD(n)&&(i="LI");var s=i?t(i):o.create("BR");if(HD(n,r,!0)&&HD(n,r,!1))VD(n,"LI")?o.insertAfter(s,qD(n)):o.replace(s,n);else if(HD(n,r,!0))VD(n,"LI")?(o.insertAfter(s,qD(n)),s.appendChild(o.doc.createTextNode(" ")),s.appendChild(n)):n.parentNode.insertBefore(s,n);else if(HD(n,r,!1))o.insertAfter(s,qD(n));else{n=qD(n);var c=a.cloneRange();c.setStartAfter(r),c.setEndAfter(n);var l=c.extractContents();"LI"===i&&MD(l,"LI")?(s=l.firstChild,o.insertAfter(l,n)):(o.insertAfter(l,n),o.insertAfter(s,n))}o.remove(r),LD.moveToCaretPosition(e,s)}},WD={insert:zD},KD=function(e){return e&&"A"===e.nodeName&&0===xr.trim(Cu.trim(e.innerText||e.textContent)).length},XD=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},YD=function(e){e.innerHTML='<br data-mce-bogus="1">'},JD=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},GD=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},ZD=function(e,t,n){var r,i=n,o=[];if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;Ls.isElement(i)&&!t[i.nodeName.toLowerCase()]&&o.push(i)}for(r=o.length;r--;)i=o[r],!i.hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue?e.remove(i):KD(i)&&e.remove(i)}},QD=function(e,t,n){return Ls.isText(t)===!1?n:e?1===n&&t.data.charAt(n-1)===Cu.ZWSP?0:n:n===t.data.length-1&&t.data.charAt(n)===Cu.ZWSP?t.data.length:n},eO=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,QD(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,QD(!1,e.endContainer,e.endOffset)),t},tO=function(e){do Ls.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)},nO=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},rO=function(e,t){var n=rp.getForcedRootBlock(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,rp.getForcedRootBlockAttrs(e))},iO=function(e,t,n,r,i){var o,a,s,c,l,u,d=t||"P",f=e.dom,h=nO(f,r);if(a=f.getParent(r,f.isBlock),!a||!GD(f,a)){if(a=a||h,u=a===e.getBody()||XD(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return o=f.create(d),rO(e,o),a.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(c=r;c.parentNode!==a;)c=c.parentNode;for(;c&&!f.isBlock(c);)s=c,c=c.previousSibling;if(s&&e.schema.isValidChild(u,d.toLowerCase())){for(o=f.create(d),rO(e,o),s.parentNode.insertBefore(o,s),c=s;c&&!f.isBlock(c);)l=c.nextSibling,o.appendChild(c),c=l;n.setStart(r,i),n.setEnd(r,i)}}return r},oO=function(e,t){var n;t.normalize(),n=t.lastChild,n&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")},aO=function(e,t){var n,r,i,o,a,s,c,l,u,d,f,h,p,g=e.dom,m=e.schema,v=m.getNonEmptyElements(),y=e.selection.getRng(),_=function(t){var n,o,s,c=i,l=m.getTextInlineElements();if(t||"TABLE"===d||"HR"===d?(n=g.create(t||h),rO(e,n)):n=a.cloneNode(!1),s=n,rp.shouldKeepStyles(e)===!1)g.setAttrib(n,"style",null),g.setAttrib(n,"class",null);else do if(l[c.nodeName]){if(yf(c))continue;o=c.cloneNode(!1),g.setAttrib(o,"id",""),n.hasChildNodes()?(o.appendChild(n.firstChild),n.appendChild(o)):(s=o,n.appendChild(o))}while((c=c.parentNode)&&c!==r);return YD(s),n},w=function(e){var t,n,r,s;if(s=QD(e,i,o),Ls.isText(i)&&(e?s>0:s<i.nodeValue.length))return!1;if(i.parentNode===a&&p&&!e)return!0;if(e&&Ls.isElement(i)&&i===a.firstChild)return!0;if(JD(i,"TABLE")||JD(i,"HR"))return p&&!e||!p&&e;for(t=new b(i,a),Ls.isText(i)&&(e&&0===s?t.prev():e||s!==i.nodeValue.length||t.next());n=t.current();){
if(Ls.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),v[r]&&"br"!==r))return!1}else if(Ls.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},x=function(){c=/^(H[1-6]|PRE|FIGURE)$/.test(d)&&"HGROUP"!==f?_(h):_(),rp.shouldEndContainerOnEmptyBlock(e)&&GD(g,u)&&g.isEmpty(a)?c=g.split(u,a):g.insertAfter(c,a),LD.moveToCaretPosition(e,c)};if(Sx.normalize(g,y).each(function(e){y.setStart(e.startContainer,e.startOffset),y.setEnd(e.endContainer,e.endOffset)}),i=y.startContainer,o=y.startOffset,h=rp.getForcedRootBlock(e),s=t.shiftKey,Ls.isElement(i)&&i.hasChildNodes()&&(p=o>i.childNodes.length-1,i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i,o=p&&Ls.isText(i)?i.nodeValue.length:0),r=nO(g,i))return(h&&!s||!h&&s)&&(i=iO(e,h,y,i,o)),a=g.getParent(i,g.isBlock),u=a?g.getParent(a.parentNode,g.isBlock):null,d=a?a.nodeName.toUpperCase():"",f=u?u.nodeName.toUpperCase():"","LI"!==f||t.ctrlKey||(a=u,u=u.parentNode,d=f),/^(LI|DT|DD)$/.test(d)&&g.isEmpty(a)?void WD.insert(e,_,u,a,h):void(h&&a===e.getBody()||(h=h||"P",Tu(a)?(c=Lu(a),g.isEmpty(a)&&YD(a),LD.moveToCaretPosition(e,c)):w()?x():w(!0)?(c=a.parentNode.insertBefore(_(),a),LD.moveToCaretPosition(e,JD(a,"HR")?c:a)):(n=eO(y).cloneRange(),n.setEndAfter(a),l=n.extractContents(),tO(l),c=l.firstChild,g.insertAfter(l,a),ZD(g,v,c),oO(g,a),g.isEmpty(a)&&YD(a),c.normalize(),g.isEmpty(c)?(g.remove(c),x()):LD.moveToCaretPosition(e,c)),g.setAttrib(c,"id",""),e.fire("NewBlock",{newBlock:c})))},sO={insert:aO},cO=function(e,t){return LD.getParentBlock(e).filter(function(e){return t.length>0&&sa.is(Ji.fromDom(e),t)}).isSome()},lO=function(e){return cO(e,rp.getBrNewLineSelector(e))},uO=function(e){return cO(e,rp.getNoNewLineSelector(e))},dO={shouldInsertBr:lO,shouldBlockNewLine:uO},fO=i_.generate([{br:[]},{block:[]},{none:[]}]),hO=function(e,t){return dO.shouldBlockNewLine(e)},pO=function(e){return function(t,n){var r=""===rp.getForcedRootBlock(t);return r===e}},gO=function(e){return function(t,n){return LD.isListItemParentBlock(t)===e}},mO=function(e,t){return function(n,r){var i=LD.getParentBlockName(n)===e.toUpperCase();return i===t}},vO=function(e){return mO("pre",e)},yO=function(){return mO("summary",!0)},_O=function(e){return function(t,n){return rp.shouldPutBrInPre(t)===e}},bO=function(e,t){return dO.shouldInsertBr(e)},wO=function(e,t){return t},xO=function(e){var t=rp.getForcedRootBlock(e),n=LD.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t?t:"P")},CO=function(e,t){return function(n,r){var i=Je(e,function(e,t){return e&&t(n,r)},!0);return i?je.some(t):je.none()}},kO=function(e,t){return ib.evaluateUntil([CO([hO],fO.none()),CO([yO()],fO.br()),CO([vO(!0),_O(!1),wO],fO.br()),CO([vO(!0),_O(!1)],fO.block()),CO([vO(!0),_O(!0),wO],fO.block()),CO([vO(!0),_O(!0)],fO.br()),CO([gO(!0),wO],fO.br()),CO([gO(!0)],fO.block()),CO([pO(!0),wO,xO],fO.block()),CO([pO(!0)],fO.br()),CO([bO],fO.br()),CO([pO(!1),wO],fO.br()),CO([xO],fO.block())],[e,t.shiftKey]).getOr(fO.none())},EO={getAction:kO},TO=function(e,t){EO.getAction(e,t).fold(function(){$x.insert(e,t)},function(){sO.insert(e,t)},me)},SO={insert:TO},NO=function(e){e.typing&&(e.typing=!1,e.add())},AO=function(e,t){t.isDefaultPrevented()||(t.preventDefault(),NO(e.undoManager),e.undoManager.transact(function(){e.selection.isCollapsed()===!1&&e.execCommand("Delete"),SO.insert(e,t)}))},jO=function(e){e.on("keydown",function(t){t.keyCode===TT.ENTER&&AO(e,t)})},DO={setup:jO},OO=function(e,t){return FO(e)&&Ls.isText(t.container())},RO=function(e,t){var n=t.container(),r=t.offset();n.insertData(r,""),e.selection.setCursorLocation(n,r+1)},BO=function(e,t,n){return!!OO(n,t)&&(RO(e,t),!0)},PO=function(e){var t=be(Jv.isInlineTarget,e),n=Ld.fromRangeStart(e.selection.getRng()),r=Eb.readLocation(t,e.getBody(),n);return r.map(be(BO,e,n)).getOr(!1)},FO=function(e){return e.fold(ye(!1),ye(!0),ye(!0),ye(!1))},IO=function(e){return!!e.selection.isCollapsed()&&PO(e)},LO={insertAtSelection:IO},MO=function(e,t){yD.execute([{keyCode:TT.SPACEBAR,action:yD.action(LO.insertAtSelection,e)}],t).each(function(e){t.preventDefault()})},VO=function(e){e.on("keydown",function(t){t.isDefaultPrevented()===!1&&MO(e,t)})},$O={setup:VO},UO=function(e){return Il.descendant(Ji.fromDom(e.getBody()),"*[data-mce-caret]").fold(ye(null),function(e){return e.dom()})},qO=function(e){e.selection.setRng(e.selection.getRng())},HO=function(e,t){t.hasAttribute("data-mce-caret")&&(Lu(t),qO(e),e.selection.scrollIntoView(t))},zO=function(e,t){var n=UO(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void HO(e,n)):void(Au(n)&&(HO(e,n),e.undoManager.add()))},WO=function(e){e.on("keyup compositionstart",be(zO,e))},KO={setup:WO},XO=function(e){var t=qb.setupSelectedState(e);KO.setup(e),wD.setup(e,t),DD.setup(e,t),DO.setup(e),$O.setup(e)},YO={setup:XO},JO=function(e){return Ls.isElement(e)&&ps(Ji.fromDom(e))},GO=function(e){var t=e.selection.getRng(),n=S.fromRangeStart(t),r=S.fromRangeEnd(t);if(S.isElementPosition(n)){var i=n.container();JO(i)&&hg.firstPositionIn(i).each(function(e){return t.setStart(e.container(),e.offset())})}if(S.isElementPosition(r)){var i=n.container();JO(i)&&hg.lastPositionIn(i).each(function(e){return t.setEnd(e.container(),e.offset())})}e.selection.setRng(lv.normalize(t))},ZO=function(e){e.on("click",function(t){t.detail>=3&&GO(e)})},QO=function(e){e.on("click",function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()})},eR=function(e){e.parser.addNodeFilter("details",function(e){ze(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){ze(e,function(e){var t=e.attr("data-mce-open");e.attr("open",Re(t)?t:null),e.attr("data-mce-open",null)})})},tR=function(e){QO(e),eR(e)},nR=Cc.DOM,rR=function(e,t){var n=Ji.fromDom(e.getDoc().head),r=Ji.fromTag("style");Co.set(r,"type","text/css"),Fc.append(r,Ji.fromText(t)),Fc.append(n,r)},iR=function(e){var t=G(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var r,i,o,a=t.length,s=e.dom;a--;)if(r=t[a],i=r.attr(n),o="data-mce-"+n,!r.attributes.map[o]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===n?(i=s.serializeStyle(s.parseStyle(i),r.name),i.length||(i=null),r.attr(o,i),r.attr(n,i)):"tabindex"===n?(r.attr(o,i),r.attr(n,null)):r.attr(o,e.convertURL(i,n,r.name))}}),t.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("type")||"no/type",0!==n.indexOf("mce-")&&t.attr("type","mce-"+n)}),t.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,r=t.length,i=e.schema.getNonEmptyElements();r--;)n=t[r],n.isEmpty(i)&&0===n.getAll("br").length&&(n.append(new AA("br",1)).shortEnded=!0)}),t},oR=function(e){e.settings.auto_focus&&Ft.setEditorTimeout(e,function(){var t;t=e.settings.auto_focus===!0?e:e.editorManager.get(e.settings.auto_focus),t.destroyed||t.focus()},100)},aR=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),oR(e)},sR=function(e){return e.inline?nR.styleSheetLoader:e.dom.styleSheetLoader},cR=function(e,t){var n,r,i=e.settings,o=e.getElement(),a=e.getDoc();i.inline||(e.getElement().style.visibility=e.orgVisibility),t||i.content_editable||(a.open(),a.write(e.iframeHTML),a.close()),i.content_editable&&(e.on("remove",function(){var e=this.getBody();nR.removeClass(e,"mce-content-body"),nR.removeClass(e,"mce-edit-focus"),nR.setAttrib(e,"contentEditable",null)}),nR.addClass(o,"mce-content-body"),e.contentDocument=a=i.content_document||document,e.contentWindow=i.content_window||window,e.bodyElement=o,i.content_document=i.content_window=null,i.root_name=o.nodeName.toLowerCase()),n=e.getBody(),n.disabled=!0,e.readonly=i.readonly,e.readonly||(e.inline&&"static"===nR.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=e.getParam("content_editable_state",!0)),n.disabled=!1,e.editorUpload=z(e),e.schema=w(i),e.dom=Cc(a,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:!0,root_element:e.inline?e.getBody():null,collect:i.content_editable,schema:e.schema,onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=iR(e),e.serializer=Q(i,e),e.selection=Zj(e.dom,e.getWin(),e.serializer,e),e.annotator=A(e),e.formatter=J(e),e.undoManager=X(e),e._nodeChangeDispatcher=new W(e),e._selectionOverrides=OT(e),tR(e),ZO(e),YO.setup(e),mE.setup(e),e.fire("PreInit"),i.browser_spellcheck||i.gecko_spellcheck||(a.body.spellcheck=!1,nR.setAttrib(n,"spellcheck","false")),e.quirks=te(e),e.fire("PostRender"),i.directionality&&(n.dir=i.directionality),i.nowrap&&(n.style.whiteSpace="nowrap"),i.protect&&e.on("BeforeSetContent",function(e){xr.each(i.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type}),e.contentStyles.length>0&&(r="",xr.each(e.contentStyles,function(e){r+=e+"\r\n"}),e.dom.addStyle(r)),sR(e).loadAll(e.contentCSS,function(t){aR(e)},function(t){aR(e)}),i.content_style&&rR(e,i.content_style)},lR={initContentBody:cR},uR=Cc.DOM,dR=function(e,t){if(document.domain!==window.location.hostname&&St.ie&&St.ie<12){var n=lE.uuid("mce");e[n]=function(){lR.initContentBody(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return uR.setAttrib(t,"src",r),!0}return!1},fR=function(e){var t="number"==typeof e?e+"px":e;return t?t:""},hR=function(e,t,n,r){var i=Ji.fromTag("iframe");return Co.setAll(i,r),Co.setAll(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Wo.setAll(i,{width:"100%",height:fR(n),display:"block"}),i},pR=function(e){var t,n,r;return r=rp.getDocType(e)+"<html><head>",rp.getDocumentBaseUrl(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=rp.getBodyId(e),n=rp.getBodyClass(e),rp.getContentSecurityPolicy(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+rp.getContentSecurityPolicy(e)+'" />'),r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'},gR=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),r=hR(e.id,n,t.height,rp.getIframeAttrs(e)).dom();r.onload=function(){r.onload=null,e.fire("load")};var i=dR(e,r);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=pR(e),uR.add(t.iframeContainer,r),i},mR=function(e,t){var n=gR(e,t);t.editorContainer&&(uR.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=uR.isHidden(t.editorContainer)),e.getElement().style.display="none",uR.setAttrib(e.id,"aria-hidden","true"),n||lR.initContentBody(e)},vR={init:mR},yR=Cc.DOM,_R=function(e,t,n){var r,i,o=zk.get(n);if(r=zk.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=xr.trim(n),o&&xr.inArray(t,n)===-1){if(xr.each(zk.dependencies(n),function(n){_R(e,t,n)}),e.plugins[n])return;i=new o(e,r,e.$),e.plugins[n]=i,i.init&&(i.init(e,r),t.push(n))}},bR=function(e){return e.replace(/^\-/,"")},wR=function(e){var t=[];xr.each(e.settings.plugins.split(/[ ,]/),function(n){_R(e,t,bR(n))})},xR=function(e){var t,n=e.settings.theme;Re(n)?(e.settings.theme=bR(n),t=Wk.get(n),e.theme=new t(e,Wk.urls[n]),e.theme.init&&e.theme.init(e,Wk.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}},CR=function(e){var t,n,r,i,o,a=e.settings,s=e.getElement();return t=a.width||yR.getStyle(s,"width")||"100%",n=a.height||yR.getStyle(s,"height")||s.offsetHeight,r=a.min_height||100,i=/^[0-9\.]+(|px)$/i,i.test(""+t)&&(t=Math.max(parseInt(t,10),100)),i.test(""+n)&&(n=Math.max(parseInt(n,10),r)),o=e.theme.renderUI({targetNode:s,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),a.content_editable||(n=(o.iframeHeight||n)+("number"==typeof n?o.deltaHeight||0:""),n<r&&(n=r)),o.height=n,o},kR=function(e){var t,n=e.getElement();return t=e.settings.theme(e,n),t.editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t},ER=function(e){return{editorContainer:e,iframeContainer:e}},TR=function(e){var t=yR.create("div");return yR.insertAfter(t,e),ER(t)},SR=function(e){var t=e.getElement();return e.inline?ER(null):TR(t)},NR=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,Re(t.theme)?CR(e):Le(t.theme)?kR(e):SR(e)},AR=function(e){var t,n=e.settings,r=e.getElement();return e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||yR.getAttrib(r,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),xR(e),wR(e),t=NR(e),e.editorContainer=t.editorContainer?t.editorContainer:null,n.content_css&&xr.each(xr.explode(n.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),n.content_editable?lR.initContentBody(e):vR.init(e,t)},jR={init:AR},DR=Cc.DOM,OR=function(e){return"-"===e.charAt(0)},RR=function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)},BR=function(e,t,n,r){var i=t.settings,o=i.theme;if(Re(o)){if(!OR(o)&&!Wk.urls.hasOwnProperty(o)){var a=i.theme_url;a?Wk.load(o,t.documentBaseURI.toAbsolute(a)):Wk.load(o,"themes/"+o+"/theme"+n+".js")}e.loadQueue(function(){Wk.waitFor(o,r)})}else r()},PR=function(e,t){xr.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),xr.each(e.external_plugins,function(t,n){zk.load(n,t),e.plugins+=" "+n}),xr.each(e.plugins.split(/[ ,]/),function(e){if(e=xr.trim(e),e&&!zk.urls[e])if(OR(e)){e=e.substr(1,e.length);var n=zk.dependencies(e);xr.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=zk.createUrl(n,e),zk.load(e.resource,e)})}else zk.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})})},FR=function(e,t){var n=Nc.ScriptLoader;BR(n,e,t,function(){RR(n,e),PR(e.settings,t),n.loadQueue(function(){e.removed||jR.init(e)},e,function(t){Hk.pluginLoadError(e,t[0]),e.removed||jR.init(e)})})},IR=function(e){var t=e.settings,n=e.id,r=function(){DR.unbind(window,"ready",r),e.render()};if(!Xt.Event.domLoaded)return void DR.bind(window,"ready",r);if(e.getElement()&&St.contentEditable){t.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var i=e.getElement().form||DR.getParent(n,"form");i&&(e.formElement=i,t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&(DR.insertAfter(DR.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},DR.bind(i,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),!t.submit_patch||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)})),e.windowManager=I(e),e.notificationManager=P(e),"xml"===t.encoding&&e.on("GetContent",function(e){e.save&&(e.content=DR.encode(e.content))}),t.add_form_submit_trigger&&e.on("submit",function(){e.initialized&&e.save()}),t.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),FR(e,e.suffix)}},LR={render:IR},MR=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r},VR={add:MR},$R=xr.each,UR=xr.trim,qR="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),HR={ftp:21,http:80,https:443,mailto:25},zR=function(e,t){var n,r,i=this;if(e=UR(e),t=i.settings=t||{},n=t.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(i.source=e);var o=0===e.indexOf("//");0!==e.indexOf("/")||o||(e=(n?n.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=t.base_uri?t.base_uri.path:new zR(document.location.href).directory,""==t.base_uri.protocol?e="//mce_host"+i.toAbsPath(r,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(n&&n.protocol||"http")+"://mce_host"+i.toAbsPath(r,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),$R(qR,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),i[t]=r}),n&&(i.protocol||(i.protocol=n.protocol),i.userInfo||(i.userInfo=n.userInfo),i.port||"mce_host"!==i.host||(i.port=n.port),i.host&&"mce_host"!==i.host||(i.host=n.host),i.source=""),o&&(i.protocol="")};zR.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if(e=new zR(e,{base_uri:n}),"mce_host"!==e.host&&n.host!==e.host&&e.host||n.port!==e.port||n.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var r=n.getURI(),i=e.getURI();return r===i||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===i?r:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return e=new zR(e,{base_uri:this}),e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=HR[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;r<i;r++)if(r>=n.length||e[r]!==n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;r<i;r++)if(r>=e.length||e[r]!==n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);r<i;r++)a+="../";for(r=o-1,i=n.length;r<i;r++)a+=r!==o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r,i,o=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),$R(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?o>0?o--:a.push(t[n]):o++);return n=e.length-o,i=n<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/"),0!==i.indexOf("/")&&(i="/"+i),r&&i.lastIndexOf("/")!==i.length-1&&(i+=r),i},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},zR.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},zR.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var WR="html",KR=function(e,t){var n=rp.getForcedRootBlock(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")},XR=function(e,t,n){var r;if(t.format=t.format?t.format:WR,t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=xr.trim($T.trimExternal(e.serializer,n.innerHTML));else if("text"===t.format)r=Cu.trim(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=KR(e,e.serializer.serialize(n,t))}return"text"===t.format||bs(Ji.fromDom(n))?t.content=r:t.content=xr.trim(r),t.no_events||e.fire("GetContent",t),t.content},YR=function(e,t){return void 0===t&&(t={}),je.from(e.getBody()).fold(ye("tree"===t.format?new AA("body",11):""),function(n){return XR(e,t,n)})},JR=function(e,t){t(e),e.firstChild&&JR(e.firstChild,t),e.next&&JR(e.next,t)},GR=function(e,t,n){var r={},i={},o=[];n.firstChild&&JR(n.firstChild,function(n){ze(e,function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})}),ze(t,function(e){"string"==typeof n.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})})});for(var a in r)r.hasOwnProperty(a)&&o.push(r[a]);for(var a in i)i.hasOwnProperty(a)&&o.push(i[a]);return o},ZR=function(e,t,n){var r=GR(e,t,n);ze(r,function(e){ze(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})},QR="html",eB=function(e){return e instanceof AA},tB=function(e){xk.hasFocus(e)&&hg.firstPositionIn(e.getBody()).each(function(t){var n=t.getNode(),r=Ls.isTable(n)?hg.firstPositionIn(n).getOr(t):t;e.selection.setRng(r.toRange())})},nB=function(e,t){e.dom.setHTML(e.getBody(),t),tB(e)},rB=function(e,t,n,r){var i,o;return 0===n.length||/^\s+$/.test(n)?(o='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>"),i=rp.getForcedRootBlock(e),i&&e.schema.isValidChild(t.nodeName.toLowerCase(),i.toLowerCase())?(n=o,n=e.dom.createHTML(i,e.settings.forced_root_block_attrs,n)):n||(n='<br data-mce-bogus="1">'),nB(e,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=D({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=bs(Ji.fromDom(t))?n:xr.trim(n),nB(e,r.content),r.no_events||e.fire("SetContent",r)),r.content},iB=function(e,t,n,r){ZR(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var i=D({validate:e.validate},e.schema).serialize(n);return r.content=bs(Ji.fromDom(t))?i:xr.trim(i),nB(e,r.content),r.no_events||e.fire("SetContent",r),n},oB=function(e,t,n){return void 0===n&&(n={}),n.format=n.format?n.format:QR,n.set=!0,n.content=eB(t)?"":t,eB(t)||n.no_events||(e.fire("BeforeSetContent",n),t=n.content),je.from(e.getBody()).fold(ye(t),function(r){return eB(t)?iB(e,r,t,n):rB(e,r,t,n)})},aB=Cc.DOM,sB=function(e){aB.setStyle(e.id,"display",e.orgDisplay)},cB=function(e){return je.from(e).each(function(e){return e.destroy()})},lB=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},uB=function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),aB.unbind(t,"submit reset",e.formEventDelegate))},dB=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&i&&aB.remove(i.nextSibling),!e.inline&&r&&sB(e),DC.fireRemove(e),e.editorManager.remove(e),aB.remove(e.getContainer()),cB(t),cB(n),e.destroy()}},fB=function(e,t){var n=e.selection,r=e.dom;if(!e.destroyed){if(!t&&!e.removed)return void e.remove();t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),cB(n),cB(r)),uB(e),lB(e),e.destroyed=!0}},hB=Cc.DOM,pB=xr.extend,gB=xr.each,mB=xr.resolve,vB=St.ie,yB=function(e,t,n){var r=this,i=r.documentBaseUrl=n.documentBaseURL,o=n.baseURI;t=Rv(r,e,i,n.defaultSettings,t),r.settings=t,k.language=t.language||"en",k.languageLoad=t.language_load,k.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new zR(t.document_base_url,{base_uri:o}),r.baseURI=o,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new R(r),r.loadedCSS={},r.editorCommands=new O(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(St.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),t.override_viewport===!1&&(St.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=Ur.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};yB.prototype={render:function(){LR.render(this)},focus:function(e){xk.focus(this,e)},hasFocus:function(){return xk.hasFocus(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=this,o=i.settings[e];if(o)return i.callbackLookup&&(r=i.callbackLookup[e])&&(o=r.func,r=r.scope),"string"==typeof o&&(r=o.replace(/\.\w+$/,""),r=r?mB(r):0,o=mB(o),i.callbackLookup=i.callbackLookup||{},i.callbackLookup[e]={func:o,scope:r}),o.apply(r||i,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&xr.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return Lv(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&"undefined"==typeof t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),n.buttons=n.buttons,t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return VR.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:lE.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(hB.show(e.getContainer()),hB.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(vB&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(hB.hide(e.getContainer()),hB.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this,r=n.getElement();return n.removed?"":r?(e=e||{},e.load=!0,t=n.setContent(void 0!==r.value?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,t):void 0},save:function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized&&!r.removed)return e=e||{},e.save=!0,e.element=i,t=e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=t:(!e.is_removing&&r.inline||(i.innerHTML=t),(n=hB.getParent(r.id,"form"))&&gB(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=i=null,e.set_dirty!==!1&&r.setDirty(!1),t},setContent:function(e,t){return oB(this,e,t)},getContent:function(e){return YR(this,e)},insertContent:function(e,t){t&&(e=pB({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){PC(this,e)},getContainer:function(){var e=this;return e.container||(e.container=hB.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=hB.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement,e&&(t.contentWindow=e.contentWindow)),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,i=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=r.visual),gB(i.select("table,a",e),function(e){var o;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",o=i.getAttrib(e,"border"),void(o&&"0"!==o||!n.hasVisual?i.removeClass(e,t):i.addClass(e,t));case"A":return void(i.getAttrib(e,"href")||(o=i.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",o&&n.hasVisual?i.addClass(e,t):i.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){dB(this)},destroy:function(e){fB(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},pB(yB.prototype,zC);var _B,bB,wB,xB=function(e){return e.className.toString().indexOf("mce-")!==-1},CB={isEditorUIElement:xB},kB=function(e){return"nodechange"===e.type&&e.selectionChange},EB=function(e,t){var n=function(){t.throttle()};Cc.DOM.bind(document,"mouseup",n),e.on("remove",function(){Cc.DOM.unbind(document,"mouseup",n)})},TB=function(e){e.on("focusout",function(){hC.store(e)})},SB=function(e,t){e.on("mouseup touchend",function(e){t.throttle()})},NB=function(e,t){var n=Hi.detect().browser;n.isIE()?TB(e):SB(e,t),e.on("keyup nodechange",function(t){kB(t)||hC.store(e)})},AB=function(e){var t=Wc(function(){hC.store(e)},0);e.inline&&EB(e,t),e.on("init",function(){NB(e,t)}),e.on("remove",function(){t.cancel()})},jB={register:AB},DB=Cc.DOM,OB=function(e){return CB.isEditorUIElement(e)},RB=function(e,t){var n=e?e.settings.custom_ui_selector:"",r=DB.getParent(t,function(t){return OB(t)||!!n&&e.dom.is(t,n)});return null!==r},BB=function(){try{return document.activeElement}catch(e){return document.body}},PB=function(e,t){var n=t.editor;jB.register(n),n.on("focusin",function(){var t=this,n=e.focusedEditor;n!==t&&(n&&n.fire("blur",{focusedEditor:t}),e.setActive(t),e.focusedEditor=t,t.fire("focus",{blurredEditor:n}),t.focus(!0))}),n.on("focusout",function(){var t=this;Ft.setEditorTimeout(t,function(){var n=e.focusedEditor;RB(t,BB())||n!==t||(t.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),_B||(_B=function(t){var n,r=e.activeEditor;n=t.target,r&&n.ownerDocument===document&&(n===document.body||RB(r,n)||e.focusedEditor!==r||(r.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},DB.bind(document,"focusin",_B))},FB=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(DB.unbind(document,"focusin",_B),_B=null)},IB=function(e){
e.on("AddEditor",be(PB,e)),e.on("RemoveEditor",be(FB,e))},LB={setup:IB,isEditorUIElement:OB,isUIElement:RB},MB={},VB="en",$B={setCode:function(e){e&&(VB=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return VB},rtl:!1,add:function(e,t){var n=MB[e];n||(MB[e]=n={});for(var r in t)n[r]=t[r];this.setCode(e)},translate:function(e){var t=MB[VB]||{},n=function(e){return xr.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null===e||xr.is(e,"undefined")},i=function(e){return e=n(e),xr.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(xr.is(e,"object")&&xr.hasOwn(e,"raw"))return n(e.raw);if(xr.is(e,"array")){var o=e.slice(1);e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return xr.hasOwn(o,t)?n(o[t]):e})}return i(e).replace(/{context:\w+}$/,"")},data:MB},UB=Cc.DOM,qB=xr.explode,HB=xr.each,zB=xr.extend,WB=0,KB=!1,XB=[],YB=[],JB=function(e){return"length"!==e},GB=function(e){HB(wB.get(),function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})},ZB=function(e){e!==KB&&(e?Ur(window).on("resize scroll",GB):Ur(window).off("resize scroll",GB),KB=e)},QB=function(e){var t=YB;delete XB[e.id];for(var n=0;n<XB.length;n++)if(XB[n]===e){XB.splice(n,1);break}return YB=Xe(YB,function(t){return e!==t}),wB.activeEditor===e&&(wB.activeEditor=YB.length>0?YB[0]:null),wB.focusedEditor===e&&(wB.focusedEditor=null),t.length!==YB.length},eP=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(QB(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e};wB={defaultSettings:{},$:Ur,majorVersion:"4",minorVersion:"8.3",releaseDate:"2018-09-13",editors:XB,i18n:$B,activeEditor:null,settings:{},setup:function(){var e,t,n,r,i=this,o="";if(t=zR.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,o=n.suffix;else{for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){r=a[s].src;var c=r.substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){c.indexOf(".min")!==-1&&(o=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}!e&&document.currentScript&&(r=document.currentScript.src,r.indexOf(".min")!==-1&&(o=".min"),e=r.substring(0,r.lastIndexOf("/")))}i.baseURL=new zR(t).toAbsolute(e),i.documentBaseURL=t,i.baseURI=new zR(i.baseURL),i.suffix=o,LB.setup(i)},overrideDefaults:function(e){var t,n;t=e.base_url,t&&(this.baseURL=new zR(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new zR(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;for(var i in r)k.PluginManager.urls[i]=r[i]},init:function(e){var t,n,r=this;n=xr.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var i=function(e,t){return e.inline&&t.tagName.toLowerCase()in n},o=function(e){var t=e.id;return t||(t=e.name,t=t&&!UB.get(t)?e.name:UB.uniqueId(),e.setAttribute("id",t)),t},a=function(t){var n=e[t];if(n)return n.apply(r,Array.prototype.slice.call(arguments,2))},s=function(e,t){return t.constructor===RegExp?t.test(e.className):UB.hasClass(e,t)},c=function(e){var t,n=[];if(St.ie&&St.ie<11)return Hk.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return HB(e.types,function(e){n=n.concat(UB.select(e.selector))}),n;if(e.selector)return UB.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":t=e.elements||"",t.length>0&&HB(qB(t),function(e){var t;(t=UB.get(e))?n.push(t):HB(document.forms,function(t){HB(t.elements,function(t){t.name===e&&(e="mce_editor_"+WB++,UB.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":HB(UB.select("textarea"),function(t){e.editor_deselector&&s(t,e.editor_deselector)||e.editor_selector&&!s(t,e.editor_selector)||n.push(t)})}return n},l=function(e){t=e},u=function(){var t,n=0,s=[],d=function(e,i,o){var a=new yB(e,i,r);s.push(a),a.on("init",function(){++n===t.length&&l(s)}),a.targetElm=a.targetElm||o,a.render()};return UB.unbind(window,"ready",u),a("onpageload"),t=Ur.unique(c(e)),e.types?void HB(e.types,function(n){xr.each(t,function(t){return!UB.is(t,n.selector)||(d(o(t),zB({},e,n),t),!1)})}):(xr.each(t,function(e){eP(r.get(e.id))}),t=xr.grep(t,function(e){return!r.get(e.id)}),void(0===t.length?l([]):HB(t,function(t){i(e,t)?Hk.initError("Could not initialize inline editor on invalid inline target element",t):d(o(t),e,t)})))};return r.settings=e,UB.bind(window,"ready",u),new At(function(e){t?e(t):l=function(t){e(t)}})},get:function(e){return 0===arguments.length?YB.slice(0):Re(e)?Ge(YB,function(t){return t.id===e}).getOr(null):Me(e)&&YB[e]?YB[e]:null},add:function(e){var t,n=this;return t=XB[e.id],t===e?e:(null===n.get(e.id)&&(JB(e.id)&&(XB[e.id]=e),XB.push(e),YB.push(e)),ZB(!0),n.activeEditor=e,n.fire("AddEditor",{editor:e}),bB||(bB=function(){n.fire("BeforeUnload")},UB.bind(window,"beforeunload",bB)),e)},createEditor:function(e,t){return this.add(new yB(e,t,this))},remove:function(e){var t,n,r=this;if(e)return Re(e)?void HB(UB.select(e),function(e){n=r.get(e.id),n&&r.remove(n)}):(n=e,Fe(r.get(n.id))?null:(QB(n)&&r.fire("RemoveEditor",{editor:n}),0===YB.length&&UB.unbind(window,"beforeunload",bB),n.remove(),ZB(YB.length>0),n));for(t=YB.length-1;t>=0;t--)r.remove(YB[t])},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new yB(n,r.settings,r).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",0,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){HB(YB,function(e){e.save()})},addI18n:function(e,t){$B.add(e,t)},translate:function(e){return $B.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},zB(wB,kC),wB.setup();var tP=wB;!function(e){e.compareRanges=px.isEq,e.getCaretRangeFromPoint=rj.fromPoint,e.getSelectedNode=fd,e.getNode=hd}(ne||(ne={}));var nP,rP,iP=ne,oP=Math.min,aP=Math.max,sP=Math.round,cP=function(e,t,n){var r,i,o,a,s,c;return r=t.x,i=t.y,o=e.w,a=e.h,s=t.w,c=t.h,n=(n||"").split(""),"b"===n[0]&&(i+=c),"r"===n[1]&&(r+=s),"c"===n[0]&&(i+=sP(c/2)),"c"===n[1]&&(r+=sP(s/2)),"b"===n[3]&&(i-=a),"r"===n[4]&&(r-=o),"c"===n[3]&&(i-=sP(a/2)),"c"===n[4]&&(r-=sP(o/2)),hP(r,i,o,a)},lP=function(e,t,n,r){var i,o;for(o=0;o<r.length;o++)if(i=cP(e,t,r[o]),i.x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},uP=function(e,t,n){return hP(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},dP=function(e,t){var n,r,i,o;return n=aP(e.x,t.x),r=aP(e.y,t.y),i=oP(e.x+e.w,t.x+t.w),o=oP(e.y+e.h,t.y+t.h),i-n<0||o-r<0?null:hP(n,r,i-n,o-r)},fP=function(e,t,n){var r,i,o,a,s,c,l,u,d,f;return s=e.x,c=e.y,l=e.x+e.w,u=e.y+e.h,d=t.x+t.w,f=t.y+t.h,r=aP(0,t.x-s),i=aP(0,t.y-c),o=aP(0,l-d),a=aP(0,u-f),s+=r,c+=i,n&&(l+=r,u+=i,s-=o,c-=a),l-=o,u-=a,hP(s,c,l-s,u-c)},hP=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},pP=function(e){return hP(e.left,e.top,e.width,e.height)},gP={inflate:uP,relativePosition:cP,findBestRelativePosition:lP,intersect:dP,clamp:fP,create:hP,fromClientRect:pP},mP={},vP={add:function(e,t){mP[e.toLowerCase()]=t},has:function(e){return!!mP[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=mP.hasOwnProperty(t)?mP[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{},t.type=e):(t=e,e=t.type),e=e.toLowerCase(),n=mP[e],!n)throw new Error("Could not find control by type: "+e);return n=new n(t),n.type=e,n}},yP=xr.each,_P=xr.extend,bP=function(){};bP.extend=nP=function(e){var t,n,r,i=this,o=i.prototype,a=function(){var e,t,n,r=this;if(!rP&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)},s=function(){return this},c=function(e,t){return function(){var n,r=this,i=r._super;return r._super=o[e],n=t.apply(r,arguments),r._super=i,n}};rP=!0,t=new i,rP=!1,e.Mixins&&(yP(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&yP(e.Methods.split(","),function(t){e[t]=s}),e.Properties&&yP(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this;return void 0!==e?(t[n]=e,t):t[n]}}),e.Statics&&yP(e.Statics,function(e,t){a[t]=e}),e.Defaults&&o.Defaults&&(e.Defaults=_P({},o.Defaults,e.Defaults));for(n in e)r=e[n],"function"==typeof r&&o[n]?t[n]=c(n,r):t[n]=r;return a.prototype=t,a.constructor=a,a.extend=nP,a};var wP=Math.min,xP=Math.max,CP=Math.round,kP=function(e){var t={},n=0,r=0,i=0,o=function(e,t,n){var r,i,o,a,s,c;return r=0,i=0,o=0,e/=255,t/=255,n/=255,s=wP(e,wP(t,n)),c=xP(e,xP(t,n)),s===c?(o=s,{h:0,s:0,v:100*o}):(a=e===s?t-n:n===s?e-t:n-e,r=e===s?3:n===s?1:5,r=60*(r-a/(c-s)),i=(c-s)/c,o=c,{h:CP(r),s:CP(100*i),v:CP(100*o)})},a=function(e,t,o){var a,s,c,l;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,o=parseInt(o,10)/100,t=xP(0,wP(t,1)),o=xP(0,wP(o,1)),0===t)return void(n=r=i=CP(255*o));switch(a=e/60,s=o*t,c=s*(1-Math.abs(a%2-1)),l=o-s,Math.floor(a)){case 0:n=s,r=c,i=0;break;case 1:n=c,r=s,i=0;break;case 2:n=0,r=s,i=c;break;case 3:n=0,r=c,i=s;break;case 4:n=c,r=0,i=s;break;case 5:n=s,r=0,i=c;break;default:n=r=i=0}n=CP(255*(n+l)),r=CP(255*(r+l)),i=CP(255*(i+l))},s=function(){var e=function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e};return"#"+e(n)+e(r)+e(i)},c=function(){return{r:n,g:r,b:i}},l=function(){return o(n,r,i)},u=function(e){var o;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,i=e.b):"v"in e&&a(e.h,e.s,e.v):(o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(o[1],10),r=parseInt(o[2],10),i=parseInt(o[3],10)):(o=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(o[1],16),r=parseInt(o[2],16),i=parseInt(o[3],16)):(o=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16),i=parseInt(o[3]+o[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,i=i<0?0:i>255?255:i,t};return e&&u(e),t.toRgb=c,t.toHsv=l,t.toHex=s,t.parse=u,t},EP=function(e,t){var n,r,i,o;if(t=t||'"',null===e)return"null";if(i=typeof e,"string"===i)return r="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return'"'===t&&"'"===e?e:(n=r.indexOf(i),n+1?"\\"+r.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+t;if("object"===i){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,r="[";n<e.length;n++)r+=(n>0?",":"")+EP(e[n],t);return r+"]"}r="{";for(o in e)e.hasOwnProperty(o)&&(r+="function"!=typeof e[o]?(r.length>1?","+t:t)+o+t+":"+EP(e[o],t):"");return r+"}"}return""+e},TP={serialize:EP,parse:function(e){try{return JSON.parse(e)}catch(e){}}},SP={callbacks:{},count:0,send:function(e){var t=this,n=Cc.DOM,r=void 0!==e.count?e.count:t.count,i="tinymce_jsonp_"+r;t.callbacks[r]=function(o){n.remove(i),delete t.callbacks[r],e.callback(o)},n.add(n.doc.body,"script",{id:i,src:e.url,type:"text/javascript"}),t.count++}},NP={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async!==!1,e.data=e.data||"",NP.fire("beforeInitialize",{settings:e}),t=new L){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&xr.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t=NP.fire("beforeSend",{xhr:t,settings:e}).xhr,t.send(e.data),!e.async)return r();setTimeout(r,10)}}};xr.extend(NP,kC);var AP=xr.extend,jP=function(e){this.settings=AP({},e),this.count=0};jP.sendRPC=function(e){return(new jP).send(e)},jP.prototype={send:function(e){var t=e.error,n=e.success;e=AP(this.settings,e),e.success=function(r,i){r=TP.parse(r),"undefined"==typeof r&&(r={error:"JSON Parse error."}),r.error?t.call(e.error_scope||e.scope,r.error,i):n.call(e.success_scope||e.scope,r.result)},e.error=function(n,r){t&&t.call(e.error_scope||e.scope,n,r)},e.data=TP.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",NP.send(e)}};var DP,OP=function(){return function(){var e={},t=[],n={getItem:function(t){var n=e[t];return n?n:null},setItem:function(n,r){t.push(n),e[n]=String(r)},key:function(e){return t[e]},removeItem:function(n){t=t.filter(function(e){return e===n}),delete e[n]},clear:function(){t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:function(){return t.length},configurable:!1,enumerable:!1}),n}()};try{DP=window.localStorage}catch(e){DP=OP()}var RP=DP,BP=tP,PP={geom:{Rect:gP},util:{Promise:At,Delay:Ft,Tools:xr,VK:TT,URI:zR,Class:bP,EventDispatcher:wC,Observable:kC,I18n:$B,XHR:NP,JSON:TP,JSONRequest:jP,JSONP:SP,LocalStorage:RP,Color:kP},dom:{EventUtils:Xt,Sizzle:Zn,DomQuery:Ur,TreeWalker:b,DOMUtils:Cc,ScriptLoader:Nc,RangeUtils:iP,Serializer:Q,ControlSelection:GA,BookmarkManager:KA,Selection:Zj,Event:Xt.Event},html:{Styles:x,Entities:rc,Node:AA,Schema:w,SaxParser:IT,DomParser:G,Writer:j,Serializer:D},ui:{Factory:vP},Env:St,AddOnManager:k,Annotator:A,Formatter:J,UndoManager:X,EditorCommands:O,WindowManager:I,NotificationManager:P,EditorObservable:zC,Shortcuts:R,Editor:yB,FocusManager:CB,EditorManager:tP,DOM:Cc.DOM,ScriptLoader:Nc.ScriptLoader,PluginManager:k.PluginManager,ThemeManager:k.ThemeManager,trim:xr.trim,isArray:xr.isArray,is:xr.is,toArray:xr.toArray,makeMap:xr.makeMap,each:xr.each,map:xr.map,grep:xr.grep,inArray:xr.inArray,extend:xr.extend,create:xr.create,walk:xr.walk,createNS:xr.createNS,resolve:xr.resolve,explode:xr.explode,_addCacheSuffix:xr._addCacheSuffix,isOpera:St.opera,isWebKit:St.webkit,isIE:St.ie,isGecko:St.gecko,isMac:St.mac};BP=xr.extend(BP,PP);var FP=BP,IP=function(t){try{e.exports=t}catch(e){}},LP=function(e){window.tinymce=e,window.tinyMCE=e};LP(FP),IP(FP)}()}()}).call(t,n(214).setImmediate)},216:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}});